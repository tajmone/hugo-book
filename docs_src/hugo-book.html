<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Kent Tessman">
<title>The Hugo Book</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>The Hugo Book</h1>
<div class="details">
<span id="author" class="author">Kent Tessman</span><br>
<span id="email" class="email"><a href="mailto:general@generalcoffee.com">general@generalcoffee.com</a></span><br>
<span id="revnumber">version 1,</span>
<span id="revdate">2018-10-04</span>
<br><span id="revremark">Draft 34 -- Porting to AsciiDoc</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_colophon">COLOPHON</a></li>
<li><a href="#_authors_foreword">AUTHOR&#8217;S FOREWORD</a></li>
<li><a href="#_book_1_the_hugo_programming_manual">BOOK 1: THE HUGO PROGRAMMING MANUAL</a>
<ul class="sectlevel1">
<li><a href="#_introduction">1. INTRODUCTION</a></li>
<li><a href="#_a_first_look_at_hugo">2. A FIRST LOOK AT HUGO</a></li>
<li><a href="#_objects">3. OBJECTS</a></li>
<li><a href="#_hugo_programming">4. HUGO PROGRAMMING</a></li>
<li><a href="#_routines_and_events">5. ROUTINES AND EVENTS</a></li>
<li><a href="#_fuses_daemons_and_scripts">6. FUSES, DAEMONS, AND SCRIPTS</a></li>
<li><a href="#_grammar_and_parsing">7. GRAMMAR AND PARSING</a></li>
<li><a href="#_junction_routines">8. JUNCTION ROUTINES</a></li>
<li><a href="#_the_game_loop">9. THE GAME LOOP</a></li>
<li><a href="#_using_the_object_library">10. USING THE OBJECT LIBRARY</a></li>
<li><a href="#_advanced_features">11. ADVANCED FEATURES</a></li>
<li><a href="#_resources">12. RESOURCES</a></li>
<li><a href="#_summary_of_keywords_and_commands">Appendix A: SUMMARY OF KEYWORDS AND COMMANDS</a></li>
<li><a href="#_the_hugo_library">Appendix B: THE HUGO LIBRARY</a></li>
<li><a href="#_limit_settings_2">Appendix C: LIMIT SETTINGS</a></li>
<li><a href="#_hugofix_and_the_hugo_debugger">Appendix D: HUGOFIX AND THE HUGO DEBUGGER</a></li>
<li><a href="#_precompiled_headers">Appendix E: PRECOMPILED HEADERS</a></li>
<li><a href="#_hugo_versions">Appendix F: HUGO VERSIONS</a></li>
<li><a href="#_additional_resources">Appendix G: ADDITIONAL RESOURCES</a></li>
</ul>
</li>
<li><a href="#_book_2_technical_system_specification">BOOK 2: TECHNICAL SYSTEM SPECIFICATION</a>
<ul class="sectlevel1">
<li><a href="#_introduction_3">13. INTRODUCTION</a></li>
<li><a href="#_organization_of_the_hex_file">14. ORGANIZATION OF THE .HEX FILE</a></li>
<li><a href="#_tokens_and_data_types">15. TOKENS AND DATA TYPES</a></li>
<li><a href="#_engine_parsing">16. ENGINE PARSING</a></li>
<li><a href="#_grammar">17. GRAMMAR</a></li>
<li><a href="#_executable_code">18. EXECUTABLE CODE</a></li>
<li><a href="#_encoding_text">19. ENCODING TEXT</a></li>
<li><a href="#_the_object_table">20. THE OBJECT TABLE</a></li>
<li><a href="#_the_property_table">21. THE PROPERTY TABLE</a></li>
<li><a href="#_the_event_table">22. THE EVENT TABLE</a></li>
<li><a href="#_the_dictionary_and_special_words">23. THE DICTIONARY AND SPECIAL WORDS</a></li>
<li><a href="#_resourcefiles">24. RESOURCEFILES</a></li>
<li><a href="#_the_hugo_compiler_and_how_it_works">25. THE HUGO COMPILER AND HOW IT WORKS</a></li>
<li><a href="#_the_hugo_engine_and_how_it_works">26. THE HUGO ENGINE AND HOW IT WORKS</a></li>
<li><a href="#_dark_secrets_of_the_hugo_debugger">27. DARK SECRETS OF THE HUGO DEBUGGER</a></li>
<li><a href="#_code_patterns">Appendix H: CODE PATTERNS</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="openblock">
<div class="title">ABOUT THE AUTHOR</div>
<div class="content">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Kent Tessman is a filmmaker and accidental game designer.</p>
</div>
<div class="paragraph">
<p><strong>The General Coffee Company Press</strong><br>
Toronto, Canada</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_colophon"><a class="anchor" href="#_colophon"></a>COLOPHON</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Hugo Book<br>
Hugo: An Interactive Fiction Design System</p>
</div>
<div class="paragraph">
<p>Copyright &#169; 2004 by Kent Tessman<br>
The General Coffee Company Film Productions<br>
www.generalcoffee.com</p>
</div>
<div class="paragraph">
<p>All rights reserved.
No part of this book may be used or reproduced in any form or by any means, or stored in a database or retrieval system, without prior written permission of the publisher except in the case of brief quotations embodied in critical articles and reviews.</p>
</div>
<div class="paragraph">
<p><strong>Warning and Disclaimer</strong></p>
</div>
<div class="paragraph">
<p>This book is sold as is, without warranty of any kind, either express or implied.
While every precaution has been taken in the preparation of this book, neither the author nor the publisher assumes any responsibility for errors or omissions.
Neither is any liability assumed for damages resulting from the use of the information or instructions contained herein.
It is further stated that neither the author nor the publisher is responsible for any damage or loss to any data or equipment that results directly or indirectly from the use of this book.</p>
</div>
<div class="paragraph">
<p><em>First Edition</em></p>
</div>
<div class="paragraph">
<p><em>ISBN 0-9735652-0-9</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authors_foreword"><a class="anchor" href="#_authors_foreword"></a>AUTHOR&#8217;S FOREWORD</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Somewhere along the way this became a real book, and a real book deserves a foreword, and maybe even a dedication.
Looking back, the reason any of this exists at all probably has something to do with being ten years old, and me and my little brother Dean sitting in front of the family Apple II Plus computer, one chair and one stool, playing those old text adventures.</p>
</div>
<div class="paragraph">
<p>So Dean, this is for you.
I&#8217;m sorry I always took the chair.</p>
</div>
<div class="paragraph text-right">
<p>Kent Tessman<br>
<em>Toronto, Canada</em><br>
<em>2004</em></p>
</div>
</div>
</div>
<h1 id="_book_1_the_hugo_programming_manual" class="sect0"><a class="anchor" href="#_book_1_the_hugo_programming_manual"></a>BOOK 1: THE HUGO PROGRAMMING MANUAL</h1>
<div class="openblock partintro text-center partsubtitle">
<div class="content">
OR<br>
HOW TO WRITE GAMES AND INFLUENCE PEOPLE
</div>
</div>
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. INTRODUCTION</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_why_youre_here_or_just_what_is_hugo"><a class="anchor" href="#_why_youre_here_or_just_what_is_hugo"></a>1.1. Why You&#8217;re Here (or, Just What Is Hugo?)</h3>
<div class="paragraph">
<p>Chances are if you&#8217;re reading this book you&#8217;re already at least a little familiar with adventure games, and maybe even more specifically interactive fiction or text adventures. <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> Hugo is a system for designing, programming, and running these. It is not the first such system&#8212;&#8203;and it&#8217;s difficult to find substantial fault in any general way with the best of those systems that predate Hugo<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>--but Hugo does hope to extend the concepts developed in earlier, similar systems in order to make interactive fiction programming less cryptic, and more flexible and accessible to designers, as well as to add functionality in certain areas where other systems are lacking.</p>
</div>
<div class="paragraph">
<p>What does it mean to be a &#8220;system&#8221; for interactive fiction? In Hugo&#8217;s case, it means that not only does it provide an environment for running Hugo games&#8212;&#8203;the rather exciting-sounding Hugo Engine&#8212;&#8203;but also the means of creating them (the Hugo Compiler) and a tool for troubleshooting (the Hugo Debugger). Additionally, it includes the Hugo Library, in essence a suite of Hugo programming code providing the basic infrastructure for a Hugo game.</p>
</div>
<div class="paragraph">
<p>This book will serve as a means of becoming familiar with what Hugo is and what it does, and what is required to develop an interactive fiction game using Hugo, whether or not you have any prior programming experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_legal_information"><a class="anchor" href="#_legal_information"></a>1.2. Legal Information</h3>
<div class="paragraph">
<p><strong>Please see the Hugo License for detailed legal information.</strong> Hugo is copyrighted by its Author. Programs created using the Hugo Compiler are the property of the individual user who created them. The use of the Hugo library files (the &#8220;Hugo Library&#8221;) and the distribution of the Hugo Engine are authorized for the creation of non-commercial or shareware-based software. The use of the Hugo Library is allowed in commercial software, although copyright of the library files themselves remains with the Author. Commercial distribution of the Hugo Compiler, the Hugo Engine, and/or the Hugo Debugger may be allowed by arrangement with the Author. The source code for the Hugo Compiler, the Hugo Engine, and the Hugo Debugger (the &#8220;Hugo Source Code&#8221;) is available for porting to new platforms. Public distribution of modified versions of the Hugo Source Code is not permitted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Hugo Compiler, the Hugo Engine, the Hugo Debugger, the Hugo Library, and related components are available free of charge; there is no warranty whatsoever pertaining to their use.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_names_and_acknowledgments"><a class="anchor" href="#_names_and_acknowledgments"></a>1.3. Names And Acknowledgments</h3>
<div class="paragraph">
<p>Those who have taken upon themselves the task of porting Hugo to various platforms include Julian Arnold (Acorn/RiscOS port), Gerald Bostock (OS/2 port), David Kinder (Amiga port), Bill Lash (original Unix/Linux port), Andrew Plotkin (Macintosh port using his Glk library), and Colin Turnbull (original Acorn Archimedes port). The author is considerably indebted to them, for all their work as well as for their input on how to improve the compiler and engine. Without their efforts, Hugo and the games created with it would not be available for so nearly as wide an audience.<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
<div class="paragraph">
<p>More than a few words of appreciation must be given to Volker Blasius, the original maintainer of the Interactive Fiction Archive at GMD, one of the key resources for interactive fiction players and developers, and a primary hub of material for contributors to (and readers of) the Usenet newsgroups <em>rec.arts.int-fiction</em> and <em>rec.games.int-fiction</em>. For years, Volker (earlier with the help of David M. Baggett and later with the help of David Kinder) undertook the substantial task of organizing and cataloguing thousands of existing files and a steady stream of new submissions. The IF Archive is now, as of this writing, housed on the web at <em><a href="http://www.ifarchive.org" class="bare">http://www.ifarchive.org</a></em>, and is currently maintained by David Kinder and Stephen Granade.</p>
</div>
<div class="paragraph">
<p>Thanks also to those whose comments and suggestions have contributed to making Hugo as powerful and usable as it is: Torbj√∂rn Andersson, Julian Arnold, Dmitry Baranov, Mark Bijster, Jonathan Blask, Cam Bowes, Jason Brown, Daniel Cardenas, Jose Luis Cebrian, Gilles Duchesne, Jason Dyer, Miguel Garza, Jeff Jenness, Doug Jones, Alan MacDonald, Cena Mayo, Jesse McGrew, John Menichelli, Iain Merrick, Jim Newland, Jerome Nichols, Jason C. Penney, Giacomo Pini, Andrew Pontious, Vikram Ravindran, Gunther Schmidl, Robb Sherwin, Christopher Tate, Mark J. Tilford, Paolo Vece, and Dean Tessman, as well as to many other Hugo users. Graham Nelson&#8217;s Inform language helped give early shape to some of the ideas in Hugo&#8217;s development with regard to syntax and structure. Finally, sincere apologies on my part for any omission of those who have contributed to Hugo over the years in any way.</p>
</div>
<div class="paragraph">
<p>And thank you, as always, to Jennifer.</p>
</div>
</div>
<div class="sect2">
<h3 id="_manual_conventions"><a class="anchor" href="#_manual_conventions"></a>1.4. Manual Conventions</h3>
<div class="paragraph">
<p>Please refer to the following conventions as they are used in this manual:</p>
</div>
<div class="paragraph">
<p><strong>&lt;parameter&gt;</strong> for required parameters</p>
</div>
<div class="paragraph">
<p><strong>[parameter]</strong> for optional parameters</p>
</div>
<div class="paragraph">
<p><strong>file</strong> for specific filenames</p>
</div>
<div class="paragraph">
<p>FunctionName functions, etc.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong> important notes related to the matter at hand</p>
</div>
<div class="paragraph">
<p>Output for output by the compiler or engine</p>
</div>
<div class="paragraph">
<p>token tokens, keywords</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>for omissions (particularly of non-relevant sections of code)</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_packing_list"><a class="anchor" href="#_packing_list"></a>1.5. Packing List</h3>
<div class="paragraph">
<p>A number of files are part of the basic Hugo package. You&#8217;ll need to make sure to have these before you get started; a good starting point is the Hugo web page at <em><a href="http://www.generalcoffee.com/hugo" class="bare">http://www.generalcoffee.com/hugo</a></em>.</p>
</div>
<div class="paragraph">
<p><strong>Executable package.</strong> You&#8217;ll need, first and foremost, a version of Hugo compiled for your particular computer system, which will allow you to run existing Hugo programs, as well as compile and run your own. Usually the package itself is named something like:</p>
</div>
<div class="paragraph">
<p><strong>hugov31_win32.zip</strong> (Windows)</p>
</div>
<div class="paragraph">
<p><strong>hugov31_macos.sit</strong> (Macintosh)</p>
</div>
<div class="paragraph">
<p><strong>hugov31_unix_source.tar.gz</strong> (Unix sources)</p>
</div>
<div class="paragraph">
<p><em>etc.</em></p>
</div>
<div class="paragraph">
<p>although filenaming may vary between platforms. Generally, like in the examples above, Hugo comes in an archive file containing the various executables for a given platform. The package should contain the following files (although, again, filenames may differ; they&#8217;ll generally appear as <strong>filename</strong>, although on your system they may be lowercase or some combination of upper and lowercase, and the filename extension may vary or be absent):</p>
</div>
<div class="paragraph">
<p>Hugo Compiler (<strong>HC.EXE, hcwin, hc</strong>)</p>
</div>
<div class="paragraph">
<p>Hugo Engine (<strong>HE.EXE, hewin, he, hewx</strong>)</p>
</div>
<div class="paragraph">
<p>Hugo Debugger (<strong>HD.EXE, hdwin, hd</strong>)</p>
</div>
<div class="paragraph">
<p>Debugger help file (<strong>HDHELP.HLP</strong>)</p>
</div>
<div class="paragraph">
<p>Please note that the Hugo Compiler and the Hugo Debugger are not available for all systems; some packages for some systems contain only the Hugo Engine for playing Hugo games. To develop and compile your own games, the Hugo Compiler is necessary. The Hugo Debugger is a useful and powerful tool, but it is not essential for Hugo development.</p>
</div>
<div class="paragraph">
<p><strong>Library package.</strong> You may be relieved to learn that you don&#8217;t have to write every last part of a Hugo game yourself. In fact, much of the basic infrastructure is provided by the Hugo Library, a set of existing Hugo source code files that you include in your game to manage the game world. Using the Hugo Library, you can easily create a small game that incorporates the basic behavior of a standard Hugo game. Normally these files can be found in a single archive called <strong>hugolib.zip</strong>:</p>
</div>
<div class="paragraph">
<p><strong>hugolib.h</strong> Library definitions and routines</p>
</div>
<div class="paragraph">
<p><strong>verblib.h</strong> Standard verb routines</p>
</div>
<div class="paragraph">
<p><strong>verblib.g</strong> Standard verb grammar definitions</p>
</div>
<div class="paragraph">
<p><strong>objlib.h</strong> A library of useful object definitions (included by <strong>hugolib.h</strong>)</p>
</div>
<div class="paragraph">
<p>The library also includes these three less commonly used files:</p>
</div>
<div class="paragraph">
<p><strong>resource.h</strong> Resource-handling routines</p>
</div>
<div class="paragraph">
<p><strong>system.h</strong> System-level routines</p>
</div>
<div class="paragraph">
<p><strong>window.h</strong> Text window management</p>
</div>
<div class="paragraph">
<p>Additionally, the library contains two sets of files that, depending on user-specified settings, are optionally included by <strong>hugolib.h:</strong></p>
</div>
<div class="paragraph">
<p><strong>hugofix.h</strong> Debugging routines</p>
</div>
<div class="paragraph">
<p><strong>hugofix.g</strong> Debugging grammar</p>
</div>
<div class="paragraph">
<p><strong>verbstub.h</strong> Additional verb routines</p>
</div>
<div class="paragraph">
<p><strong>verbstub.g</strong> Additional verb grammar</p>
</div>
<div class="paragraph">
<p><strong>Sources.</strong> It&#8217;s probably a good idea as you delve into Hugo programming to have some existing source code to look at. <strong>sample.hug</strong> is a valuable resource to have handy since it contains examples of most aspects of Hugo programming. Additionally, you&#8217;re probably want to download <strong>shell.hug</strong>, which provides the very bare bones of a Hugo game for you to start building on:</p>
</div>
<div class="paragraph">
<p><strong>sample.hug</strong> Sample game source code</p>
</div>
<div class="paragraph">
<p><strong>shell.hug</strong> Empty source code to build on</p>
</div>
<div class="paragraph">
<p>An additional Hugo source file demonstrates the ability to create precompiled headers (and not something you probably need to worry about just now; it&#8217;s covered in <em>APPENDIX E:</em> <em>PRECOMPILED HEADERS</em>):</p>
</div>
<div class="paragraph">
<p><strong>hugolib.hug</strong> To create a linkable version of <strong>hugolib.h</strong></p>
</div>
<div class="paragraph">
<p><strong>Extras.</strong> The last essential remaining piece you&#8217;ll need to begin Hugo development in earnest is a <em>text editor</em> of some sort. This is what you&#8217;ll use to edit the Hugo source files that you&#8217;ll write and ultimately compile into working Hugo programs. On Windows or Macintosh you could use the pre-packaged Notepad or SimpleText (or TextEdit on Mac OS X) applications, respectively, but it&#8217;s really not recommended: there are far better inexpensive or even freeware editors available (and once you get deeper into programming, you&#8217;ll realize that the one sure investment you can make is an editor you&#8217;re comfortable with). On Unix-ish systems (including Linux), you&#8217;ll generally have a choice of editors including Emacs, vi, and a number of graphical user interface (GUI) programs. It&#8217;s a little beyond the scope of this book to even attempt to recommend an editor&#8212;&#8203;since it&#8217;s as much a matter of personal preference as anything-- so the best advice that can be given is to ask around, experiment, and find out what works best for you.</p>
</div>
<div class="paragraph">
<p>It would also be good preparation to become familiar with the <em>terminal</em> or <em>console</em> on your system. On Windows, this is the &#8220;MS-DOS Prompt&#8221; or &#8220;Command Prompt&#8221; under the Start menu, or type &#8220;command&#8221; (Windows 95/98) or &#8220;cmd&#8221; (Windows NT/2000/XP) from the &#8220;Run&#8230;&#8203;&#8221; option; on Unix systems, this will be bash or tcsh or some other kind of command shell. Other systems will have different names for their command-line environments (although on something like a pre-OS X Macintosh, there is no such thing as a terminal or console, so you needn&#8217;t worry about it).</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_truth_about_programming"><a class="anchor" href="#_the_truth_about_programming"></a>1.6. The Truth About Programming</h3>
<div class="paragraph">
<p>The truth about writing interactive fiction games is that yes, it is programming, and no, there&#8217;s really no way around it. It&#8217;s impossible for a game design system to provide a cookie-cutter means of picking and choosing all the various facets of any relatively complex game so that by clicking on a few buttons a fully formed and entirely original game world and story will be produced. It doesn&#8217;t work that way. The attempt to determine at the outset all of the various game elements that will ever be needed by any game author in any type of game necessarily limits what authors are able to include in their games, as well as their ability to tailor gameplay, presentation, character interaction, geography, and other important aspects of a game to the needs of the particular work of interactive fiction they&#8217;re writing. So, in order to write the best interactive fiction games you&#8217;re capable of, you&#8217;ll need to do a at least a little programming. But that&#8217;s not reason to fret.</p>
</div>
<div class="paragraph">
<p>The word &#8220;programming&#8221; seems to hold a sort of mystique that, to the non-programmer, conjures up some unfathomable combination of knowledge and skills that shall remain forever inaccessible to outsiders. In fact, that&#8217;s pretty far from the truth. Programming is indeed a creative pursuit, but it is pretty much unique among creative pursuits in that it&#8217;s the only one that can be overcome by enough banging of keys: eventually you can make almost anything work.</p>
</div>
<div class="paragraph">
<p>If you&#8217;ve never done any programming before, you can probably expect to be slightly baffled by at least some of the early going in this manual. The truth about <em>learning</em> programming is that you&#8217;re probably not going to be able to read through this book (or any book on programming in any other programming language, for that matter) once, in proper sequence, from cover to cover, and be able to write programs expertly in the language. Many of things will require the introduction of concepts that will only be discussed in full later on once a better grounding in the language is achieved. There will, in fact, be several places in this book (especially in the early sections) where readers will be encouraged to not worry if the subject matter at hand seems quite foreign. But rest assured that, after a brief initial period of acclimation, before long things like &#8220;objects&#8221;, &#8220;properties&#8221;, &#8220;routines&#8221;, &#8220;global variables&#8221;, &#8220;calling parameters&#8221;, and a host of others will be rolling off your tongue like the alphabet.</p>
</div>
<div class="paragraph">
<p>To make everything even easier, Hugo is designed so that writing very basic games will consist largely of defining and describing objects and locations in a very straightforward manner. All of the complex inner workings of the game&#8212;&#8203;from the templates for standard rooms and objects and their related behaviors; to what happens when a player types &gt;GO NORTH or &gt;OPEN THE CARDBOARD BOX or any other command, recognized or unrecognized; to the rules of the game world for containment, edibility, bulk, switching things on or off, or any number of &#8220;physical&#8221; traits&#8212;&#8203;are handled by the Hugo Library, and a prospective doesn&#8217;t have to worry about where these things are handled or how until he or she is ready to investigate deeper.</p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_hugo"><a class="anchor" href="#_working_with_hugo"></a>1.7. Working With Hugo</h3>
<div class="paragraph">
<p>The way Hugo works is fairly standard for a modern programming language. A programmer begins with a <em>source file</em>, which is a human-readable text file (created and edited in a separate text-editing application). The source file contains all the various definitions, instructions, and other text that will ultimately form the content of the game. The content of a source file is formatted in the particular structure of the <em>Hugo language</em>--the programming language with which the majority of this manual will endeavor to help you become acquainted.</p>
</div>
<div class="paragraph">
<p>The programmer inputs the source file to a <em>compiler</em> (here, specifically, the Hugo Compiler), which takes the source code and generates an <em>object file</em>. The object file is&#8212;&#8203;unlike a source file&#8212;&#8203;not human readable, but has instead been translated by the compiler into a series of optimized instructions that are easily understood by the computer. The computer can then take that object file and execute it as a program, just like any application users regularly use (applications&#8212;&#8203;like word processors and spreadsheets and browsers&#8212;&#8203;which were probably produced by a compiler in exactly the same process as described here). The difference between a Hugo-generated program and such other compiled programs is that a Hugo program may, once compiled, be run on any platform for which the Hugo Engine exists. Normally a compiled program can only be executed on the platform for which it was compiled; Hugo programs are much more portable, and can be compiled on one platform and subsequently be run on any other of the large number of platforms that Hugo supports.</p>
</div>
<div class="paragraph">
<p>The Hugo Engine is the <em>interpreter</em> or <em>runtime</em> for compiled Hugo object files (also referred to as <em>.HEX files</em>, after their default extension meaning &#8220;Hugo executable&#8221;). It functions as a hosting environment in which to load the .HEX file, in sort of the same way that a browser loads a web page from the Internet.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started"><a class="anchor" href="#_getting_started"></a>1.8. Getting Started</h3>
<div class="paragraph">
<p>Let&#8217;s take the first step by becoming acquainted with the tools we&#8217;ll be using. First and foremost is the Hugo Compiler. Compiler usage instructions may vary slightly depending on what computer and operating system you&#8217;re using.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re using a GUI version of the compiler (such as the one for Windows), when you start the compiler it will display a form for you to enter the name of the Hugo program you want to compile, along with any other compilation options.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re running a command-line version of the compiler, it will behave pretty much the same regardless of what system you&#8217;re on. Type</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc</pre>
</div>
</div>
<div class="paragraph">
<p>without any parameters to get a full listing of available compiler options and specifications. For example, the Unix and MS-DOS syntax for running the compiler is</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc [-switches] &lt;sourcefile[.hug]&gt; &lt;objectfile&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>It is not absolutely necessary to specify any switches, the name of the objectfile, or the sourcefile extension. The bare-bones version of the compiler invocation is</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc &lt;sourcefile&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>With no other parameters explicitly described, the compiler assumes an extension of <strong>.hug</strong>. The default object filename is <strong>&lt;sourcefile&gt;.hex</strong>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how to compile the sample game from the <strong>sample.hug</strong> source code mentioned earlier in <em>I.e.</em> <em>Packing List</em>. Make sure the compiler executable, library files, and sample game source code are all in the current directory, then type</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc -ls sample.hug</pre>
</div>
</div>
<div class="paragraph">
<p>or simply</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc -ls sample</pre>
</div>
</div>
<div class="paragraph">
<p>and after a few seconds (or more, or less, depending on your processor and configuration) a screenful of statistical information will appear following the completed compilation (because of the -s switch). The new file <strong>sample.hex</strong> will have appeared in current directory. As well, the -l switch wrote all compile-time output (which would have included errors, had there been any) to the file <strong>sample.lst</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The next three sections--<em>I.i. Compiler Switches</em>,* <em>*I.j.<strong></em> *<em>Limit Settings</em>, and</strong> <em>*I.k.*</em> *<em>Directories</em>--may seem a little confusing to those without much compiler experience. Do look them over, but if you&#8217;re not exactly sure what it all means, don&#8217;t worry about it. You won&#8217;t need to tell the compiler to do anything particularly acrobatic at the outset, and the information is here for experimentation and for when you need it.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_compiler_switches"><a class="anchor" href="#_compiler_switches"></a>1.9. Compiler Switches</h3>
<div class="paragraph">
<p>A number of <em>switches</em> may be selected via the invocation line. These are one or more single-letter (usually, at least) options that follow a - character. The available options are:</p>
</div>
<div class="paragraph">
<p>-a <strong>A</strong>bort compilation on any error</p>
</div>
<div class="paragraph">
<p>-d compile as an .HDX <strong>D</strong>ebuggable executable</p>
</div>
<div class="paragraph">
<p>-e <strong>E</strong>xpanded error format</p>
</div>
<div class="paragraph">
<p>-f <strong>F</strong>ull object summaries</p>
</div>
<div class="paragraph">
<p>-h compile in .HLB precompiled <strong>H</strong>eader format</p>
</div>
<div class="paragraph">
<p>-i display debugging <strong>I</strong>nformation</p>
</div>
<div class="paragraph">
<p>-l print <strong>L</strong>isting to disk as <strong>&lt;sourcefile&gt;.lst</strong></p>
</div>
<div class="paragraph">
<p>-o display <strong>O</strong>bject tree</p>
</div>
<div class="paragraph">
<p>-p send output to standard <strong>P</strong>rinter</p>
</div>
<div class="paragraph">
<p>-s print compilation <strong>S</strong>tatistics</p>
</div>
<div class="paragraph">
<p>-t <strong>T</strong>ext to listfile for spellchecking</p>
</div>
<div class="paragraph">
<p>-u show memory <strong>U</strong>sage for objectfile</p>
</div>
<div class="paragraph">
<p>-v <strong>V</strong>erbose compilation</p>
</div>
<div class="paragraph">
<p>-w <strong>W</strong>rite <strong>&lt;objectfile&gt;</strong> despite any errors</p>
</div>
<div class="paragraph">
<p>-x ignore switches in source code</p>
</div>
<div class="paragraph">
<p>-25 compile v<strong>2.5</strong> with compatibility</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>-a</strong> switch to abort compilation on any error is useful particularly when you suspect that an error earlier in the program is triggering a string of compilation errors later on. Using -a will stop compilation after the first error.</p>
</li>
<li>
<p>In order to compile a file usable with the Hugo Debugger (which means it will contain a large amount of symbolic information not normally included in a .HEX file), use the <strong>-d</strong> switch.</p>
</li>
<li>
<p>The standard format in which the Hugo Compiler reports errors is relatively concise, but can sometimes be used by more advanced editors to automatically locate the error-causing line. To have the compiler print errors in greater detail than this standard format, use the <strong>-e</strong> switch.</p>
</li>
<li>
<p>Using the <strong>-f</strong> switch will tell the compiler to output a list of detailed information about each object, which can sometimes be useful for debugging.</p>
</li>
<li>
<p>The <strong>-h</strong> switch is used to generate a precompiled header, described in <em>APPENDIX E:</em> <em>PRECOMPILED HEADERS</em>.</p>
</li>
<li>
<p>The <strong>-i</strong> switch tells the compiler to finish compilation by printing a list of all symbols used, as well as their numerical equivalents and any address information. Again, this can sometimes be useful in debugging.</p>
</li>
<li>
<p>Most programmers will probably make use of the <strong>-l</strong> switch to record all compilation output to a listfile, by default called <strong>&lt;filename&gt;.lst.</strong> Such recorded output will contain not only any compile-time errors, but also any output generated by the use of other switches listed here.</p>
</li>
<li>
<p>To get a list of all objects (as well as a visual depiction of their inheritance), use the <strong>-o</strong> switch.</p>
</li>
<li>
<p>The <strong>-p</strong> switch does not exist in all versions of the Hugo Compiler for all platforms. Where present, it causes all output to be sent to a named printer, such as <code>LPT1</code> under DOS or Windows, or <code>/dev/lp</code> under Unix. (The -p switch is actually deprecated, as it&#8217;s much easier and more flexible to capture output to a listfile using the -l switch, then subsequently view and/or print the listfile using a text editor program.)</p>
</li>
<li>
<p>Compilation statistics are printed as a summary when compilation is done if the <strong>-s</strong> switch is used. The summary includes totals of lines compiled, the numbers of objects, routines, properties, dictionary words, and other elements of a .HEX file.</p>
</li>
<li>
<p>The <strong>-t</strong> switch sends all textual output and dictionary entries to the listfile so that it can be run through a spellchecker.</p>
</li>
<li>
<p>The <strong>-u</strong> switch gives a breakdown of the memory used by the .HEX file for various things including the object table, the property table, and executable code.</p>
</li>
<li>
<p>When the <strong>-v</strong> switch (not available on all versions) is used, the compiler runs in verbose mode and maintains a real-time display of the number of lines compiled, and of the percentage of compilation complete.</p>
</li>
<li>
<p>Normally if the compiler encounters any errors in the source code, it won&#8217;t generate the gamefile. Use the <strong>-w</strong> switch to generate <strong>&lt;objectfile&gt;</strong> regardless of any errors encountered. This is useful in a situation where you want to try out a section of code that has nothing to do with another section that may currently have errors, but is otherwise rarely used (for obvious reasons&#8212;&#8203;it&#8217;s always best to get rid of those pesky errors).</p>
</li>
<li>
<p>The version 3.0 (or later) compiler may be invoked with the <strong>-25</strong> switch in order to generate a v2.5 gamefile. Note, however that it&#8217;s generally unnecessary to do so, since v2.5 and v3.x are compatible; i.e., the v3.0 (or later) engine will run v2.5 gamefiles, and most recent v2.5 builds of the engine will run v3.0 gamefiles. See <em>APPENDIX F:</em> HUGO VERSIONS for more information.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_limit_settings"><a class="anchor" href="#_limit_settings"></a>1.10. Limit Settings</h3>
<div class="paragraph">
<p>Also included on the invocation line before the sourcefile may be one or more limit settings. These settings are primarily for memory management, and limit the number of certain types of program elements, such as objects and dictionary entries. In order to allow the compiler to function optimally across a range of different computer platforms with differing memory management capabilities, the compiler does not automatically allow an unlimited number of all language elements. For the most part, you won&#8217;t need to worry about upping any of these settings until your Hugo games begin to reach larger sizes.</p>
</div>
<div class="paragraph">
<p>To list the settings, type:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc $list</pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll see something like:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>Static limits (non-modifiable):

MAXATTRIBUTES 128 MAXGLOBALS 240

MAXLOCALS 16


Default limits:

MAXALIASES 256 MAXARRAYS 256

MAXCONSTANTS 256 MAXDICT 1024

MAXDICTEXTEND (0) MAXDIRECTORIES 16

MAXEVENTS 256 MAXFLAGS 256

MAXLABELS 256 MAXOBJECTS 1024

MAXPROPERTIES 254 MAXROUTINES 320

MAXSPECIALWORDS 64

Modify non-static default limits using: $&lt;setting&gt;=&lt;new limit&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To change a non-static limit (and compile a source file), type:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc $&lt;setting&gt;=&lt;new limit&gt; &lt;sourcefile&gt;...</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Users of Unix or similar systems (including OS X, BeOS, and others) may, depending on the shell being used, need to escape special tokens like <code>$</code> or enclose these arguments in single quotes (e.g. \$list and \$&lt;setting&gt;=&lt;new limit&gt; or 'list',* *'$&lt;setting&gt;=&lt;new limit&gt;', etc.) to override the shell&#8217;s parsing of those tokens in the compiler invocation line. (Non-Unix users probably don&#8217;t need to worry about what that means.)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, to compile the sample game with the maximum number of dictionary entries doubled from the default limit of 1024, and with the -l and -s switches set,</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc -ls $MAXDICT=2048 sample</pre>
</div>
</div>
<div class="paragraph">
<p>If a compile-time error is generated indicating that too many symbols of a particular type have been declared, it is probably possible to overcome this simply by recompiling with a higher limit for that setting specified in the invocation line.</p>
</div>
<div class="paragraph">
<p>See <em>APPENDIX C:</em> <em>LIMIT SETTINGS</em> for a complete listing of valid limit settings.</p>
</div>
</div>
<div class="sect2">
<h3 id="_directories"><a class="anchor" href="#_directories"></a>1.11. Directories</h3>
<div class="paragraph">
<p>It is possible to specify where the Hugo Compiler will look for different types of files. This can be done in the command line via:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc @&lt;directory&gt;=&lt;real directory&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>For example, to specify that the source files are to be taken from the directory <strong>c:\hugo\source</strong>, invoke the compiler with</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc @source=c:\hugo\source &lt;filename&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Valid directories (which can be listed using <code>hc @list</code>) are:</p>
</div>
<div class="paragraph">
<p><strong>source</strong> Source files</p>
</div>
<div class="paragraph">
<p><strong>object</strong> Where the new .HEX file will be created</p>
</div>
<div class="paragraph">
<p><strong>lib</strong> Library files</p>
</div>
<div class="paragraph">
<p><strong>list</strong> <strong>.lst</strong> files</p>
</div>
<div class="paragraph">
<p><strong>resource</strong> Resources for a resource block</p>
</div>
<div class="paragraph">
<p><strong>temp</strong> Temporary compilation files (if any)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Again, users of Unix or similar systems may, depending on the shell being used, need to escape special tokens like <code>@</code> or enclose these arguments in single quotes (e.g. \@list and \@&lt;directory&gt;=&lt;real directory&gt; or '@list' and '@&lt;directory&gt;=&lt;real directory&gt;') to override the shell&#8217;s parsing of those special tokens in the compiler invocation line.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Advanced users may take advantage of the ability to set default directories using environment variables. (The method for setting an environment variable may vary from operating system to operating system.) The <strong>HUGO_&lt;NAME&gt;</strong> environment variable may be set to the <strong>&lt;name&gt;</strong> directory. For example, the source directory may be set with the <strong>HUGO_SOURCE</strong> environment variable. Command-line-specified directories take precedence over those set in environment variables. In either case, if the file is not found in the specified directory, the current directory is searched. (And if you&#8217;re not familiar with environment variables, again, don&#8217;t worry about it.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_hugo_engine"><a class="anchor" href="#_the_hugo_engine"></a>1.12. The Hugo Engine</h3>
<div class="paragraph">
<p>Once the sample game has been successfully compiled, you can run it with the help of the Hugo Engine. The way in which you do this will vary depending on what platform you&#8217;re using.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you&#8217;re running a GUI version of the engine (such as for Windows), the filetype for .HEX files will generally be associated with the Hugo Engine application, so that double-clicking on the compiled .HEX file will automatically start the engine.</p>
</li>
<li>
<p>Most GUI versions also have the functionality that, if you start the Hugo Engine application directly with no .HEX file given, it will present you with a file-selector to choose the file to run.</p>
</li>
<li>
<p>Command-line versions of the engine require you to specify the name of the .HEX file you want to run. Having compiled the sample game, run it by invoking</p>
</li>
</ol>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>he sample</pre>
</div>
</div>
<div class="paragraph">
<p>at the command line (replacing <code>he</code> with the name of the engine executable for your system, if necessary). Again, it should not be necessary to specify the extension. The engine assumes <strong>.hex</strong> if none is given.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you know how to set environment variables for your system, the environment variable HUGO_OBJECT or HUGO_GAMES may hold the directory that the Hugo Engine searches for the specified .HEX file. The location for save files may be specified with HUGO_SAVE. All of these are optional.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now"><a class="anchor" href="#_what_should_i_be_able_to_do_now"></a>1.13. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>By now, you should be able to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>browse the sample code and library files;</p>
</li>
<li>
<p>run the Hugo Compiler on the platform of your choice, either through a graphical user interface or via the command line;</p>
</li>
<li>
<p>view and set compile-time options such as switches, limits, and directories; and</p>
</li>
<li>
<p>run a compiled Hugo file using the Hugo Engine.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here&#8217;s an example: on the author&#8217;s machine, running under a Unix-like command line, the compiler executable <strong>hc</strong> is in a directory called <strong>/boot/home/hugo</strong>. The library files are in <strong>/boot/home/hugo/lib</strong>, and the source code for the game <em>Future Boy!</em> is in <strong>/boot/home/hugo/fb</strong>, with the main source file called <strong>future.hug</strong>.</p>
</div>
<div class="paragraph">
<p>It&#8217;s possible to call the compiler to compile <em>Future Boy!</em> with a number of different options, including specifying the appropriate directories for source and library files, increasing the maximum possible number of routines, and printing all debugging information, the object tree, and statistics to a file. (Assume that the current directory is <strong>/boot/home/hugo</strong> and that none of the switches or directories are set in the source.)</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how that&#8217;s done:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc -lios $maxobjects=512 @source=fb @lib=lib future</pre>
</div>
</div>
<div class="paragraph">
<p>(or</p>
</div>
<div class="paragraph">
<p><strong>hc -lios '$maxobjects=512' '@source=fb'</strong>, etc.</p>
</div>
<div class="paragraph">
<p>if the command shell requires that sequences beginning with <code>$</code> or <code>@</code> be contained in single-quotes or otherwise escaped). This makes use of various command-line options, including multiple switches, limit settings, and directory specifications. It sets the desired switches, changes the modifiable limit MAXOBJECTS from the compiler default, and points the compiler to look for source files in the <strong>source</strong> subdirectory and library files in the <strong>lib</strong> subdirectory (from the current directory).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_first_look_at_hugo"><a class="anchor" href="#_a_first_look_at_hugo"></a>2. A FIRST LOOK AT HUGO</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_basic_concepts"><a class="anchor" href="#_basic_concepts"></a>2.1. Basic Concepts</h3>
<div class="paragraph">
<p>There are a couple of basic concepts to become familiar with in order to begin working with Hugo. Once you begin to become familiar with them, you will hopefully be able to look at a chunk of Hugo source code and&#8212;&#8203;even if you don&#8217;t understand everything it&#8217;s doing&#8212;&#8203;be able to at least get a sense of the general organization.</p>
</div>
<div class="paragraph">
<p>First of all, the bulk of programming in Hugo will involve the creation of what are called <em>objects</em>. The word &#8220;object&#8221; in this sense has two meanings. First of all, in a programming sense, objects are discrete subsections of source code. They are referred to by individual names, and they &#8220;do something&#8221;, whether that something is storing data or performing some set of functions or both. In the case of Hugo, however, these are not just abstract tools for structuring a program. Hugo objects are, more often than not, also representative of objects in the &#8220;physical world&#8221; of the game: people, places, and things. If, for example, you want to create a book in your game, you&#8217;ll create a book object that may comprise the description of the book, what&#8217;s written in it, how much it weighs, how many pages it has, what happens when you drop it, and anything else you choose to implement.</p>
</div>
<div class="paragraph">
<p>The rest of a Hugo program is mostly comprised of <em>routines</em>. These are the sections of code made up of commands or statements that facilitate the actual behavior of the program at different points in the story. (Routines can also be part of a containing object&#8212;&#8203;we&#8217;ll get to that in a little while.) Routines are less frequently (although more frequently in other languages) called &#8220;functions&#8221;--they may be thought of as performing an operation or series of operations, and then optionally <em>returning</em> some kind of answer or result. A program may have a routine called DescribePlace which, when invoked (or &#8220;called&#8221;, in the parlance of programming) would print the description of a given location. The point of routines is that you don&#8217;t have to repeat the same code every time you want a particular task done: you just have to call the routine. Write once, use many times.</p>
</div>
<div class="paragraph">
<p>The idea of return values from a routine is an important one and, while sometimes puzzling to novices, is actually quite uncomplicated. For instance, often a particular function will be described as &#8220;returning true&#8221; or &#8220;returning false&#8221;--all this means is that when it&#8217;s done it returns either a non-zero value (usually 1) or a zero value, usually to indicate whether the function was successful or not at whatever it was being asked to do. A program will constantly be checking the return values of the routines it calls to determine if particular operations have been successful in order to decide what to do next. A routine can return any kind of value (listed shortly in <em>II.c</em> <em>Data Types</em>). A very simple example is a routine that performs a needed operation, such as adding two supplied values, <em>a</em> and <em>b</em>. Let&#8217;s call it AddTwoValues. When AddTwoValues is called with the two supplied values, it will <em>return</em> the sum <em>a</em>+<em>b</em>.</p>
</div>
<div class="paragraph">
<p>For those familiar with the common programming languages such as C or Basic (including Visual Basic), Hugo will not be entirely visually unfamiliar. Individual objects and routines&#8212;&#8203;as well as conditional blocks&#8212;&#8203;are enclosed in braces as in C (<code>{&#8230;&#8203;}</code>), but unlike C and other C-like languages, a semicolon is not required at the end of each line to tell the compiler when the line is finished, and the language itself is considerably less cryptic. Keywords, variables, routine and object names, and other tokens are not case-sensitive.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hello_sailor"><a class="anchor" href="#_hello_sailor"></a>2.2. Hello, Sailor!</h3>
<div class="paragraph">
<p>In the time-honored tradition of programming texts, the introduction to a new programming language is quite often a description of how to print the optimistic phrase &#8220;Hello, world&#8221; as an example of that particular language&#8217;s form and substance. In the almost-equally time-honored tradition of interactive fiction, we&#8217;ll start with the rallying cry &#8220;Hello, Sailor!&#8221;. Here&#8217;s how one accomplishes that in Hugo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">routine Main

\{

print "Hello, Sailor!"

pause

quit

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The entire program consists of one routine. (Two routines are normally required for any Hugo program, the other being the Init routine, which is omitted in this simple example since there isn&#8217;t anything required in the way of initialization.)</p>
</div>
<div class="paragraph">
<p>The Main routine is automatically called by the engine. It is from here that the central behavior of any Hugo program is controlled. In this case the task at hand is the printing of &#8220;Hello, Sailor!&#8221;, followed by a wait for a keypress (the pause) and an order to exit the program (i.e., quit it) so that we don&#8217;t strand the program waiting for input from the player, which is the normal order of Hugo business.<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup></p>
</div>
</div>
<div class="sect2">
<h3 id="_data_types"><a class="anchor" href="#_data_types"></a>2.3. Data Types</h3>
<div class="paragraph">
<p>Computer programs are mainly about two things: input and output (called <em>i/o</em>, for short), and modifying values. In fact, the bulk of a computer program (that is, what happens behind the scenes, whirring away, unbeknownst to the user) consists of setting, changing, and comparing various values. Hugo is no exception. All data in Hugo is represented in terms of 16-bit integers<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup>, treated as signed (-32768 to 32767) or unsigned (0 to 65535) as appropriate. It&#8217;s up to the compiler and engine to decide what a particular value means in a given context. The name of any individual data type may contain up to 32 alphanumeric characters (as well as the underscore <code>_</code>).</p>
</div>
<div class="paragraph">
<p>All of the following are valid data types:</p>
</div>
<div class="paragraph">
<p>Integer values 0, -10, 16800, -25005</p>
</div>
<div class="paragraph">
<p><em>(constant values that appear in Hugo source code as numbers)</em></p>
</div>
<div class="paragraph">
<p>ASCII characters 'A', 'z', '7'</p>
</div>
<div class="paragraph">
<p><em>(constant values equal to the common ASCII value for a character; i.e., 65 for &#8216;A&#8217;)</em></p>
</div>
<div class="paragraph">
<p>Objects mysuitcase, emptyroom, player</p>
</div>
<div class="paragraph">
<p><em>(constant values representing the object number of the given object)</em></p>
</div>
<div class="paragraph">
<p>Variables a, b, score, TEXTCOLOR</p>
</div>
<div class="paragraph">
<p><em>(changeable value-holders that may be set to equal another variable or constant value)</em></p>
</div>
<div class="paragraph">
<p>Constants true, false, BANNER</p>
</div>
<div class="paragraph">
<p><em>(constant&#8212;&#8203;obviously&#8212;&#8203;values that are given a name similarly to a variable, but are non-modifiable)</em></p>
</div>
<div class="paragraph">
<p>Dictionary entries "a", "the", "basketball"</p>
</div>
<div class="paragraph">
<p><em>_(The appearance of <code>the</code> in a line of code actually refers to the location in the dictionary table where the word &#8220;the&#8221; is stored. Dictionary entries are non-modifiable.)</em></p>
</div>
<div class="paragraph">
<p>Array elements ranking[1]</p>
</div>
<div class="paragraph">
<p><em>(a series of one or more changeable values that may be referenced from a common base point)</em></p>
</div>
<div class="paragraph">
<p>Array addresses ranking</p>
</div>
<div class="paragraph">
<p><em>(the base point of an array&#8212;&#8203;see above; the array address itself is non-modifiable, unlike the contents of the array)</em></p>
</div>
<div class="paragraph">
<p>Properties nouns, short_desc, found_in</p>
</div>
<div class="paragraph">
<p><em>(variable attachments of data relating specifically to objects)</em></p>
</div>
<div class="paragraph">
<p>Attributes open, light, transparent</p>
</div>
<div class="paragraph">
<p><em>(less complex attachments of data describing an object, which may be specified as either having or not having the given attribute)</em></p>
</div>
<div class="paragraph">
<p>Most of these types are relatively straightforward, representing in most cases a simple value. As noted, some values are dynamic (modifiable), while others are static (non-modifiable). Dictionary entries are addresses in the dictionary table (comprising all dictionary words in the .HEX file), with the empty string <code>""</code> having the value 0. Array addresses (as opposed to separate array elements) represent the address at which the array begins in the array table (comprising all array data in the .HEX file). Properties and attributes treated as discrete values represent the number of that property or attribute, assigned sequentially as the individual property or attribute is defined.</p>
</div>
<div class="paragraph">
<p>As mentioned, routines also return values, as do built-in<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup> engine functions, so that</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">FindLight(room)</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">parent(object)</code></pre>
</div>
</div>
<div class="paragraph">
<p>are also valid integer data types. <sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup></p>
</div>
<div class="paragraph">
<p>It&#8217;s good medicine to be as descriptive as possible in naming symbols, regardless of what you&#8217;re naming. A variable that holds the count of a number of objects <em>could</em> be called n, but it&#8217;s almost always better (especially after the fact, when you&#8217;re looking at code you&#8217;ve written days or even months before) to call it something more helpful like object_count.</p>
</div>
<div class="paragraph">
<p>At this point it&#8217;s probably helpful to know that you can assign a value to a variable using the form:</p>
</div>
<div class="paragraph">
<p>&lt;some variable&gt; = &lt;some value&gt;<sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup></p>
</div>
<div class="paragraph">
<p>For instance, to set the variable x equal to 5, you would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>To set it equal to element 4 of array some_array, you would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = some_array[4]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>What follows is one of those if-you-don&#8217;t-quite-understand-yet-don&#8217;t-panic sections of the manual: unless you can think of a place off the top of your head where something like this would be useful, it&#8217;ll probably be a little while until you need to use it.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you want to get the return value of a routine, you would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = Routine</code></pre>
</div>
</div>
<div class="paragraph">
<p>If, then, you ever need to get the indexed address of a routine to use it as a value, as you may at some point, you obviously won&#8217;t be able to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = Routine</code></pre>
</div>
</div>
<div class="paragraph">
<p>again and hope that this time it will assign the address of Routine to the variable x, since that will assign to x the value <em>returned by</em> Routine. Instead, you can use the address operator <code>&amp;</code>, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = &amp;Routine</code></pre>
</div>
</div>
<div class="paragraph">
<p>which won&#8217;t actually call Routine but will instead only assign the routine&#8217;s address to x (or, as we&#8217;ll see later,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = &amp;object.property</code></pre>
</div>
</div>
<div class="paragraph">
<p>to get a property routine address instead of calling the property routine itself.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_lines"><a class="anchor" href="#_multiple_lines"></a>2.4. Multiple Lines</h3>
<div class="paragraph">
<p>If any single command is too long to fit on one line, it may be split across several lines by ending all but the last with the control character <code>\</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">"This is an example string."</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = 5 + 6 * higher(a, b)</code></pre>
</div>
</div>
<div class="paragraph">
<p>are the same as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">"This is an example \

string."</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = 5 + 6 * \

higher(a, b)</code></pre>
</div>
</div>
<div class="paragraph">
<p>String constants, such as in the below print statement, are an exception in that they do not require the <code>\</code> character at the end of each line (although, as shown just above, it&#8217;s not wrong to use it).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print "The engine will properly

print this text, assuming a

single space at the end of each

line."</code></pre>
</div>
</div>
<div class="paragraph">
<p>will result in:</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>The engine will properly print this text, assuming a single space at the end of each line.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Care must be taken, however, to ensure that the closing quotes are not left off the string constant. Failing that, the compiler will likely generate a &#8220;Closing brace missing&#8221; or similar error when it overruns the object/routine/event boundary looking for a resolution to the odd number of quotation marks.</p>
</div>
<div class="paragraph">
<p>(Habitual double-space-after-a-period typists may find it useful to use the <code>\</code> character for line continuation in situations like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print "Here, we'll end a sentence on one line. \</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, we&#8217;d like to make sure there</p>
</div>
<div class="paragraph">
<p>are two spaces before the second sentence."</p>
</div>
<div class="paragraph">
<p>giving:</p>
</div>
<div class="paragraph">
<p>Here, we&#8217;ll end a sentence on one line. However, we&#8217;d like to make sure there are two spaces before the second sentence.</p>
</div>
<div class="paragraph">
<p>since normally, if the <code>/</code> were omitted after &#8220;&#8230;&#8203;on one line.&#8221;, the compiler would assume only a single space before continuing with &#8220;However&#8230;&#8203;&#8221; from the next line.)</p>
</div>
<div class="paragraph">
<p>Also, most lines ending in a comma, and, or or will automatically continue on to the next line (if they occur in a line of code). In other words:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x[0] = 1, 2, 3, ! array assignment x[0]..x[4]
4, 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if a = 5 and

b = "tall"</code></pre>
</div>
</div>
<div class="paragraph">
<p>get compiled the same as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x[0] = 1, 2, 3, 4, 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if a = 5 and b = "tall"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is provided primarily so that lengthy lines and complex expressions do not have to run off the right-hand side of the screen during editing, nor do they continually need to be extended using <code>\</code> and the end of each line.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Multiple lines that are not strictly code, such as property assignments in object definitions&#8212;&#8203;to be discussed shortly&#8212;&#8203;must still be joined with <code>\</code>, as in</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">nouns "plant", "flower", "marigold", \

"fauna", "greenery"</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>and similar cases, even if they end in a comma.</strong></p>
</div>
<div class="paragraph">
<p>There is a complement to the <code>\</code> line-control character: the <code>:</code> character allows multiple lines to be put together on a single line, i.e.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = 5 : y = 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if i = 1: print "Less than three."</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which the compiler translates to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = 5

y = 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if i = 1

\{print "Less than three."}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(We&#8217;ll get to exactly what that <code>if&#8230;&#8203;print&#8230;&#8203;</code> business means in just a little bit in <em>IV.h</em> <em>Conditional Expressions and Program Flow</em>.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_comments"><a class="anchor" href="#_comments"></a>2.5. Comments</h3>
<div class="paragraph">
<p>Comments allow you to insert notes into source code to serve as reminders, descriptions of what a particular chunk of code does, put a curse upon the libary/language author, or whatever else you want. Comments are <em>very helpful</em>, and beginning programmers tend to put in either too many comments or too few. Despite the complaints that some people may have about over-commented code&#8212;&#8203;generally referring to commenting a line like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>with the rather obvious explanation of <code>set x equal to 5</code>--it&#8217;s always better to err on the side of too many comments in order to avoid the situation that every programmer find himself or herself in at least once (and once only if very, very lucky) of trying to remember what a piece of code does that you wrote yesterday, or last week, or several months ago. Comment, comment, comment.<sup class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup></p>
</div>
<div class="paragraph">
<p>There are two types of comments. Comments on a single line begin with a <code>!</code>. Anything following on the line is ignored. Multiple-line comments are begun with <code>!\</code> and ended with <code>\!</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">! A comment on a single line

!\ A multiple-line

comment \!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>!\</code> combination must come at the start of a line to be significant; it cannot be preceded by any other statements or remarks. Similarly, the <code>\!</code> combination must come at the end of a line (or alone on an otherwise blank line).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_compiler_errors_and_warnings"><a class="anchor" href="#_compiler_errors_and_warnings"></a>2.6. Compiler Errors And Warnings</h3>
<div class="paragraph">
<p>The compiler is pretty good about catching you when you do something that isn&#8217;t going to work. When it encounters something in your source code that doesn&#8217;t make sense, or is illegal in terms of the Hugo language, it&#8217;ll tell you.</p>
</div>
<div class="paragraph">
<p>A compiler error is generally of one of two types. A fatal error looks like this:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>Fatal error: &lt;message&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>and halts compiler execution. Fatal errors include things like not being able to find a requested file, encountering some sort of i/o difficulty (such as not being able to read from or write to a necessary file), or having encountered something in the source code that makes it impossible to continue with compilation.</p>
</div>
<div class="paragraph">
<p>A non-fatal error typically looks like:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>&lt;filename&gt;:&lt;line&gt;: Error: &lt;message&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Non-fatal errors are usually programming mistakes: either doing something illegal (like trying to assign a value to something to which you&#8217;re not allowed to assign a value), making a syntax error such as using a symbol name that the compiler doesn&#8217;t know about (often due to a typing mistake), or making a formatting mistake (like missing something that the compiler knows is supposed to be coming next but you forgot to include). Unless the -a switch is specified at invocation to tell the compiler to quit after the first error, multiple non-fatal errors may be printed. The side-effect of this is that a specific error (particularly a formatting error) may affect many lines of code after it, so that the compiler&#8212;&#8203;having become lost and not really knowing what you&#8217;re trying to do&#8212;&#8203;may report a whole string of errors, even on lines that, if the compiler understood their proper context, would be error free.<sup class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup></p>
</div>
<div class="paragraph">
<p>When a compiler issues a warning, it looks like:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>&lt;filename&gt;:&lt;line&gt;: Warning: &lt;message&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Compilation will continue, but this is an indication that the compiler suspects a problem at compile-time.</p>
</div>
<div class="paragraph">
<p>If the -e switch has been set during invocation to generate expanded-format errors, error output looks like:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>&lt;FILENAME&gt;: &lt;LOCATION&gt;

(Error-causing line)

"ERROR: &lt;error message&gt;"</pre>
</div>
</div>
<div class="paragraph">
<p>It prints the section of code that caused the error, followed by an explanation of the problem. Compilation will generally continue unless the -a switch has been set.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The section of offending code may not be printed exactly as it appears in the source when using the -e switch, since the compiler occasionally mildly paraphrases and rebuilds the source line into a more rigid format before finally compiling it.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_compiler_directives"><a class="anchor" href="#_compiler_directives"></a>2.7. Compiler Directives</h3>
<div class="paragraph">
<p>A number of special commands may be used that aren&#8217;t really part of a Huge program <em>per se</em>, but rather give instructions to the compiler itself to determine (a) how the source code&#8212;&#8203;or a part thereof&#8212;&#8203;is read by the compiler and (b) what special output will be generated at compile-time. These special commands or instructions are called <em>compiler directives</em>, and are preceded with a <code>#</code> character to set them apart.</p>
</div>
<div class="paragraph">
<p>To set switches within the source code so that they do not have to be specified each time the compiler is invoked for that particular program, the line</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#switches -&lt;sequence&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>will set the switches specified by &lt;sequence&gt;, where &lt;sequence&gt; is a string of characters representing valid switches, without any separators between characters. Many programmers may find it useful to make</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#switches -ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>the first line in every new program, which will automatically print a statistical summary of compilation (plus any warnings or errors) to the <strong>.lst</strong> list file.</p>
</div>
<div class="paragraph">
<p>Using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#version &lt;version&gt;[.&lt;revision&gt;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>specifies that the file is to be used with version &lt;version&gt;.&lt;revision&gt; of the compiler. If the file and compiler version are mismatched, a warning will be issued.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The #version directive is intended mainly for things like library files, and although you may use it in your own source files, it isn&#8217;t necessary. Its general usage is largely deprecated.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To include the contents of another file at the specified point in the current file, use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#include "&lt;filename&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <strong>&lt;filename&gt;</strong> is the full path and name of the file to be read. When <strong>&lt;filename&gt;</strong> has been read completely, the compiler resumes with the statement immediately following the #include directive. There is no limit on the number of files that a single file may include; also, a file may include a file which includes another file which includes another file and so on. (A file or set of files can be compiled into a precompiled header using the -h switch, and then linked using #link instead of #include. See <em>APPENDIX E:</em> <em>PRECOMPILED HEADERS</em>.)</p>
</div>
<div class="paragraph">
<p>A useful tool for managing Hugo source code is the ability to use compiler flags for conditional compilation. A compiler flag is simply a user-defined marker that can control which sections of the source code are compiled. In this way, a programmer can demarcate sections of a program that can be included or excluded at will. For example, the library files <strong>hugolib.h</strong>, <strong>verblib.h</strong>, and <strong>verblib.g</strong> check to see if a flag called DEBUG has been set previously (as it is in <strong>sample.hug</strong>). Only if it has do they include the <strong>hugofix.h</strong> and <strong>hugofix.g</strong> files, which in turn provide certain debugging features to a running Hugo program. (For a final version to be released to the general public for playing, then, by simply not setting the DEBUG flag those special features are not enabled.)</p>
</div>
<div class="paragraph">
<p>To set and clear flags, use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#set &lt;flagname&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#clear &lt;flagname&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>respectively. (Flags can also be explicitly set on the command line during compiler invocation via</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc #&lt;flagname&gt; &lt;sourcefile&gt;...</pre>
</div>
</div>
<div class="paragraph">
<p>similarly to compiler limit settings and directories, with the same caveat that on some systems it may be necessary to enclose #&lt;flagname&gt; in single quotes or otherwise escape it, if required.)</p>
</div>
<div class="paragraph">
<p>Then, check to see if a flag is set or not (and include or exclude the specified block of source code) by using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#ifset &lt;flagname&gt;

_...conditional block of code..._

#endif</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#ifclear &lt;flagname&gt;

_...conditional block of code..._

#endif</code></pre>
</div>
</div>
<div class="paragraph">
<p>Conditional compilation constructions may be nested up to 32 levels deep. (Note also that compiler flags can be specified in the invocation line as <strong>#&lt;flag name&gt;</strong>.)</p>
</div>
<div class="paragraph">
<p><code>#if set</code> and <code>#if clear</code> are the long form of <code>#ifset</code> and <code>#ifclear</code>, allowing usage of <code>#elseif</code> for code such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#set THIS_FLAG

#set THAT_FLAG

#if clear THIS_FLAG

#message "This will never be printed."

#elseif set THAT_FLAG

#message "This will always be printed."

#else

#message "But not this if THAT_FLAG is set."

#endif</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>#if defined &lt;symbol&gt;</code> and <code>#if undefined &lt;symbol&gt;</code> to test if objects, properties, routines, etc. have previously been defined, where &lt;symbol&gt; is the name of the object, property, routine, etc. in question.</p>
</div>
<div class="paragraph">
<p>As seen above, the #message directive can be used as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#message "&lt;text&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>to output &lt;text&gt; when (or if) that statement is processed during the first compilation pass.</p>
</div>
<div class="paragraph">
<p>Including <code>error</code> or <code>warning</code> before <code>&lt;text&gt;</code> as in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#message error "&lt;text&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#message warning "&lt;text&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>will force the compiler to issue an error or warning, respectively, as it prints <code>&lt;text&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It&#8217;s worth pointing out that all of the text printed in the above #if/#elseif example is <em>compile-time</em> output, not <em>runtime</em> output. That is, it&#8217;s printed only when the compiler initially compiles the source code, not when a player plays the actual game.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is also possible to include inline limit settings, such as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">$&lt;setting&gt;=&lt;limit&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>in the same way as in the invocation line. However, an error will be issued if, for example, an attempt is made to reset MAXOBJECTS if one or more objects have already been defined. Any limit settings in the code of a program must be done before the particular data type for which a new limit is being set has been used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_2"><a class="anchor" href="#_what_should_i_be_able_to_do_now_2"></a>2.8. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>By now you should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>be able to look at Hugo source code and start to see the separation into different discrete parts, such as routines;</p>
</li>
<li>
<p>have a general idea about the various Hugo data types, and be able to differentiate them in Hugo source code;</p>
</li>
<li>
<p>know about different aspects of Hugo source code formatting such as multiple lines and comments;</p>
</li>
<li>
<p>know how to read an error produced by the Hugo Compiler; and</p>
</li>
<li>
<p>know how to use inline compiler directives to set switches, flags, limits, and directories.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To experiment a little, make a copy of <strong>sample.hug</strong> and call it something like <strong>test.hug</strong> so that we can modify and use it without changing the original sample game source code. Pick a line in the new file <strong>test.hug</strong> like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">#set DEBUG</code></pre>
</div>
</div>
<div class="paragraph">
<p>and add some garbage letters to change it to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">asdf#set DEBUG</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, when you compile, you&#8217;ll see:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>test.hug:12: Error: Unknown compiler directive: asdf</pre>
</div>
</div>
<div class="paragraph">
<p>(Depending on the contents of <strong>test.hug</strong>, the actual line number may vary.) Once we&#8217;ve seen the effect of that, go back and remove the <code>asdf</code> from <strong>test.hug</strong>. Next, let&#8217;s try adding the line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">$MAXOBJECTS=50</code></pre>
</div>
</div>
<div class="paragraph">
<p>to the start of <strong>test.hug</strong>. Compile again, and you&#8217;ll see this time a whole bunch of compiler errors. Most importantly are the first couple, which look something like:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>test.hug:691: Error: Maximum of 50 objects exceeded</pre>
</div>
</div>
<div class="paragraph">
<p>(The other errors basically follow from the last few objects in <strong>test.hug</strong> not getting defined, and the compiler subsequently knowing that a particular symbol is the name of an object.)</p>
</div>
<div class="paragraph">
<p>Feel free to experiment with <strong>test.hug</strong> by adding comments, changing lines, commenting out various objects or routines or other sections of codes, and seeing what happens when you try to compile it and run it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_objects"><a class="anchor" href="#_objects"></a>3. OBJECTS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_to_know_your_objects"><a class="anchor" href="#_getting_to_know_your_objects"></a>3.1. Getting To Know Your Objects</h3>
<div class="paragraph">
<p>Objects are the building blocks of any Hugo program. Anything that will be accessible to a player during the game&#8212;&#8203;including items, rooms, other characters, and even directions&#8212;&#8203;will most likely be defined as an object. The basic object definition looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object &lt;objectname&gt; "object name"

\{

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, a suitcase object might be defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object mysuitcase "suitcase"

\{}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The enclosing braces are needed even if the object definition has no content (yet). The only data attached to the suitcase object are&#8212;&#8203;from right to left&#8212;&#8203;a name (&#8220;suitcase&#8221;), an internal identifier (mysuitcase), and membership in the basic object class.</p>
</div>
<div class="paragraph">
<p>The compiler assigns the object labeled &lt;objectname&gt; the next sequential object number. The first-defined object is object 0; the next-defined object is object number 1; the one after that is 2, etc. This is academic, however, as a programmer almost never need know what object number a particular object is&#8212;&#8203;except for certain debugging situations&#8212;&#8203;and can always refer to an object by its label &lt;objectname&gt;. If no explicit &#8220;object name&#8221; (or name property) is provided, the compiler automatically gives it the name <code>(&lt;objectname&gt;)</code>, i.e., &lt;objectname&gt; in parentheses. That is, whereas</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object mysuitcase "suitcase"

\{}</code></pre>
</div>
</div>
<div class="paragraph">
<p>creates an object called &#8220;suitcase&#8221;,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object placeholder

\{}</code></pre>
</div>
</div>
<div class="paragraph">
<p>creates an object called <code>(placeholder)</code>. Usually the latter is used for system objects or classes (see <em>III.e</em> <em>Classes</em>) that will never actually appear in a game.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The compiler automatically creates an object called <code>display</code> as the last-defined object if no other object named <code>display</code> is defined by the program (or the library). The display object can be used to get information about the engine&#8217;s output state and capabilities. See section* <em>XI.a The Display Object</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_the_object_tree"><a class="anchor" href="#_the_object_tree"></a>3.2. The Object Tree</h3>
<div class="paragraph">
<p>In order for objects to have a &#8220;physical place&#8221; in the game, i.e., to be in a room or contained in another object or beside another object, they must occupy a position in the object tree. The object tree is a simple map which represents the relationships between all objects in the game. The total number of objects is held in the global variable objects.</p>
</div>
<div class="paragraph">
<p>The <code>nothing</code> object is defined in the library as object 0 and is referred to in code using the label nothing. This is the root of the object tree, upon which all other objects are based.<sup class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup> (And again, the name <code>nothing</code> is given to this first object by the library.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the standard library routines, ensure that no objects (or classes, to be discussed later) are defined before hugolib.h is included. Problems will arise if the first-defined object&#8212;&#8203;object 0&#8212;&#8203;is not the nothing object. Currently the library will point this out for you as a runtime error if for some reason it&#8217;s not the case.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When referring to object numbers, this manual is generally referring to the name given the object in the source code: i.e., &lt;objectname&gt;. The compiler automatically assigns each object an object number, and refers to it whenever a specified &lt;objectname&gt; is encountered.</p>
</div>
<div class="paragraph">
<p>Here is an example of an object tree:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>nothing
|
Room
|
Table ------ Chair ------ Book ------ Player
|                         |
Bowl                      Bookmark
|
Spoon</pre>
</div>
</div>
<div class="paragraph">
<p>A number of built-in functions can be used to read the object tree.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>parent</code>      
</td>
<td class="hdlist2">
<p></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>sibling</code>     
</td>
<td class="hdlist2">
<p></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>child</code>       
</td>
<td class="hdlist2">
<p></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>youngest</code>    
</td>
<td class="hdlist2">
<p></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elder</code>       
</td>
<td class="hdlist2">
<p></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>eldest</code>      
</td>
<td class="hdlist2">
<p>(same as <code>child</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>younger</code>     
</td>
<td class="hdlist2">
<p>(same as <code>sibling</code>)</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>children</code>    
</td>
<td class="hdlist2">
<p></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each function takes a single object as its argument, so that</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>parent(Table)</code>    
</td>
<td class="hdlist2">
<p>= <code>Room</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>parent(Bookmark)</code> 
</td>
<td class="hdlist2">
<p>= <code>Book</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>parent(Player)</code>   
</td>
<td class="hdlist2">
<p>= <code>Room</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>child(Bowl)</code>      
</td>
<td class="hdlist2">
<p>= <code>Spoon</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>child(Room)</code>      
</td>
<td class="hdlist2">
<p>= <code>Table</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>child(Chair)</code>     
</td>
<td class="hdlist2">
<p>= <code>0</code> (&#8220;nothing&#8221;)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>sibling(Table)</code>   
</td>
<td class="hdlist2">
<p>= <code>Chair</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>sibling(Player)</code>  
</td>
<td class="hdlist2">
<p>= <code>0</code> (&#8220;nothing&#8221;)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>youngest(Room)</code>   
</td>
<td class="hdlist2">
<p>= <code>Player</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>youngest(Spoon)</code>  
</td>
<td class="hdlist2">
<p>= <code>0</code> (&#8220;nothing&#8221;)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elder(Chair)</code>     
</td>
<td class="hdlist2">
<p>= <code>Table</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elder(Table)</code>     
</td>
<td class="hdlist2">
<p>= <code>0</code> (&#8220;nothing&#8221;)</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>children(Room)</code>  
</td>
<td class="hdlist2">
<p>= <code>4</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>children(Table)</code> 
</td>
<td class="hdlist2">
<p>= <code>1</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>children(Chair)</code> 
</td>
<td class="hdlist2">
<p>= <code>0</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>(In keeping with the above explanation of object numbers and &lt;objectname&gt;, the functions in the first set actually return an integer number that refers to the object &lt;objectname&gt;.)</p>
</div>
<div class="paragraph">
<p>To better understand how the object tree represents the physical world, the table, the chair, the book, and the player are all in the room. The bookmark is in the book. The bowl is on the table, and the spoon is on the bowl. The Hugo library will assume that the player object in the example is standing; if the player were seated, the object tree might look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>nothing
|
Room
|
Table ‚Äî‚Äî‚Äî Chair ‚Äî‚Äî‚Äî Book
|         |         |
Bowl      Player    Bookmark
|
Spoon</pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>child(Chair)</code>     
</td>
<td class="hdlist2">
<p>= <code>Player</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>parent(Player)</code>   
</td>
<td class="hdlist2">
<p>= <code>Chair</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>children(Chair)</code>  
</td>
<td class="hdlist2">
<p>= <code>1</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>(Try compiling <strong>sample.hug</strong> with the -o switch in order to see the object tree for the sample game. Or, if the DEBUG flag was set during compilation, use the HugoFix<sup class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup> command <code>$ot</code> or <code>$ot &lt;object&gt;</code> during play to view the current state of the object tree during play. Compiling with the -d switch will generate a debuggable (.HDX) version of the file&#8212;&#8203;the object tree can then be viewed directly from the debugger.)</p>
</div>
<div class="paragraph">
<p>To initially place an object in the object tree, use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">in &lt;parent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>in the object definition, or, alternatively</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">nearby &lt;object&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or simply</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">nearby</code></pre>
</div>
</div>
<div class="paragraph">
<p>to give the object the same parent as &lt;object&gt; or, if &lt;object&gt; is not specified, the same parent as the last-defined object. If no such specification is given (i.e., if you don&#8217;t tell the compiler explicitly where to place the new object), the parent object defaults to 0&#8212;&#8203;the <code>nothing</code> object as defined in the library. All normal room objects have 0 as their parent.</p>
</div>
<div class="paragraph">
<p>Therefore, the expanded basic case of an object definition is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object &lt;objectname&gt; "object name"

\{

in &lt;parent object&gt;

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Ensure that the opening brace <code>{</code> does not come on the same line as the object definition. Trying to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object &lt;objectname&gt; "object name" \{...</code></pre>
</div>
</div>
<div class="paragraph">
<p>is not permitted.)</p>
</div>
<div class="paragraph">
<p>The table in the example presumably had a definition like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object table "Table"

\{

in room

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To put the suitcase object defined earlier into the empty room in <strong>shell.hug</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object mysuitcase "suitcase"

\{

in emptyroom

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Objects can later be moved around the object tree using the move command as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">move &lt;object&gt; to &lt;new parent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>which, essentially, disengages &lt;object&gt; from its old parent, makes the sibling of &lt;object&gt; the sibling of &lt;object&gt;'s elder, and moves &lt;object&gt; (along with all its possessions) to the new parent.</p>
</div>
<div class="paragraph">
<p>Therefore, in the original example, the command</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>&gt; <em>move bowl to player</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>would result in altering the object tree to this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>nothing
|
Room
|
Table ‚Äî‚Äî‚Äî Chair ‚Äî‚Äî- Book ‚Äî‚Äî‚Äî Player
                    |        |
                    Bookmark Bowl
                             |
                             Spoon</pre>
</div>
</div>
<div class="paragraph">
<p>There is also a command to remove an object from its position in the tree:</p>
</div>
<div class="paragraph">
<p>remove &lt;object&gt;</p>
</div>
<div class="paragraph">
<p>which is the same as</p>
</div>
<div class="paragraph">
<p>move &lt;object&gt; to 0</p>
</div>
<div class="paragraph">
<p>The object may of course be moved to any position later.</p>
</div>
<div class="paragraph">
<p>Logical tests can also be evaluated with regard to objects and children. The structure</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;object&gt; [not] in &lt;parent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be true if &lt;object&gt; is in &lt;parent&gt; (or false if not is used). In this way, you can write a piece of code that looks something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if mysuitcase in bedroom

\{

"The suitcase is in the bedroom."

}

else

\{

print "The suitcase is not in the bedroom."

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(We&#8217;ll cover the <code>if&#8230;&#8203;else&#8230;&#8203;</code> structure in <em>IV.h</em> <em>Conditional Expressions and Program Flow</em>.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_attributes"><a class="anchor" href="#_attributes"></a>3.3. Attributes</h3>
<div class="paragraph">
<p>Attributes are essentially qualities that every object either does or doesn&#8217;t have<sup class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup>. An attribute is defined as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">attribute &lt;attribute name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Up to 128 attributes may be defined. Those defined in <strong>hugolib.h</strong> include:</p>
</div>
<div class="paragraph">
<p>known if an object is known to the player</p>
</div>
<div class="paragraph">
<p>moved if an object has been moved</p>
</div>
<div class="paragraph">
<p>visited if a room has been visited</p>
</div>
<div class="paragraph">
<p>static if an object cannot be taken</p>
</div>
<div class="paragraph">
<p>plural for plural objects (i.e., some hats)</p>
</div>
<div class="paragraph">
<p>living if an object is a character</p>
</div>
<div class="paragraph">
<p>female if a character is female</p>
</div>
<div class="paragraph">
<p>openable if an object can be opened</p>
</div>
<div class="paragraph">
<p>open if it is open</p>
</div>
<div class="paragraph">
<p>lockable if an object can be locked</p>
</div>
<div class="paragraph">
<p>locked if it is locked</p>
</div>
<div class="paragraph">
<p>unfriendly if a character is unfriendly</p>
</div>
<div class="paragraph">
<p>light if an object is or provides light</p>
</div>
<div class="paragraph">
<p>readable if an object can be read</p>
</div>
<div class="paragraph">
<p>switchable if an object can be turned on or off</p>
</div>
<div class="paragraph">
<p>switchedon if it is on</p>
</div>
<div class="paragraph">
<p>clothing for objects that can be worn</p>
</div>
<div class="paragraph">
<p>worn if the object is being worn</p>
</div>
<div class="paragraph">
<p>mobile if the object can be rolled, etc.</p>
</div>
<div class="paragraph">
<p>enterable if an object is enterable</p>
</div>
<div class="paragraph">
<p>container if an object can hold other objects</p>
</div>
<div class="paragraph">
<p>platform if other objects can be placed on it<sup class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnotedef_14" title="View footnote.">14</a>]</sup></p>
</div>
<div class="paragraph">
<p>hidden if an object is not to be listed</p>
</div>
<div class="paragraph">
<p>quiet if container or platform is quiet (i.e., the</p>
</div>
<div class="paragraph">
<p>initial listing of contents is suppressed)</p>
</div>
<div class="paragraph">
<p>transparent if object is not opaque</p>
</div>
<div class="paragraph">
<p>already_listed if object has been pre-listed (i.e., before a</p>
</div>
<div class="paragraph">
<p>WhatsIn listing<sup class="footnote">[<a id="_footnoteref_15" class="footnote" href="#_footnotedef_15" title="View footnote.">15</a>]</sup>)</p>
</div>
<div class="paragraph">
<p>workflag for system use</p>
</div>
<div class="paragraph">
<p>special for miscellaneous use</p>
</div>
<div class="paragraph">
<p>Some of these attributes are actually the same attribute with different names. This is primarily just to save on the absolute number of attributes defined and is accomplished via</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">attribute &lt;attribute2&gt; alias &lt;attribute1&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;attribute1&gt; has already been defined. For example, the library equates visited with moved (since, presumably, they will never apply to the same object&#8212;&#8203;rooms are never moved and objects are never visited), so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">attribute visited alias moved</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, an object which is visited is also, by default, moved, so it is expected that attributes which are aliased will never both need to be checked under the same circumstances. For the most part, you should never need to alias your own attributes, although it&#8217;s helpful to know what it means since the library does it, and you may run across it in other places.</p>
</div>
<div class="paragraph">
<p>Attributes are given to an object during its definition as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object &lt;objectname&gt; "object name"

\{

is [not] &lt;attribute1&gt;, [not] &lt;attribute2&gt;, ...

...

}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The not keyword in the object definition is important when using a class instead of the basic object definition, where the class may have predefined attributes that are undesirable for the current object.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To give the suitcase object some appropriate attributes at compile-time, expand the object definition to include</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object mysuitcase "suitcase"

\{

in emptyroom

is openable, not open

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Even if an object was not given a particular attribute in its object definition, it may be given that attribute at any later point in the program with the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;object&gt; is [not] &lt;attribute&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where the not keyword clears the attribute instead of setting it. For example, when the suitcase is opened, somewhere (likely in the library), the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">mysuitcase is open</code></pre>
</div>
</div>
<div class="paragraph">
<p>will be executed. When the suitcase is closed, the command will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">mysuitcase is not open</code></pre>
</div>
</div>
<div class="paragraph">
<p>Attributes can also be read using the is and is not structures and evaluate to either true or false. In code, the expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;object&gt; is [not] &lt;attribute&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns true (1) if &lt;object&gt; is (or is not, if not is specified) &lt;attribute&gt;. Otherwise, it returns false (0). Therefore, given the suitcase object definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object mysuitcase "suitcase"

\{

in emptyroom

is openable, not open

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>the following equations hold true:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">mysuitcase is openable = 1 ! or true

mysuitcase is open = 0 ! or false

mysuitcase is locked = 0 ! or false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_properties"><a class="anchor" href="#_properties"></a>3.4. Properties</h3>
<div class="paragraph">
<p>Properties are considerably more complex than attributes. First, not every object may have every property; in order for an object to have a property, it must be specified in the object definition at the time you create the object. As well, properties are not simple on/off flags. They are sets of valid data associated with an object, where the values may represent almost anything, including object numbers, dictionary addresses, integer values, and sections of executable code.</p>
</div>
<div class="paragraph">
<p>These are some valid properties as they would appear in an object definition (using property names defined in <strong>hugolib.h</strong>)<sup class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnotedef_16" title="View footnote.">16</a>]</sup>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">nouns "tree", "bush", "shrub", "plant"

size 20

found_in livingroom, entrancehall

long_desc

\{

"Exits lead north and west. A door is set

in the southeast wall."

}

short_desc

\{

"There is a box here. It is ";

if self is open

print "open";

else

print "closed";

print "."

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>before<sup class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnotedef_17" title="View footnote.">17</a>]</sup></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">\{

object DoGet

\{

if Acquire(player, self)

\{

"You pick up ";

print Art(self); "."

}

else

return false

}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The nouns property contains four dictionary addresses; the size property is a single integer value; the found_in property holds two object numbers; and the long and short description properties are both <em>property routines</em>, which instead of just containing one or more simple values stored as a data type are actually sections of executable code attached to the object.</p>
</div>
<div class="paragraph">
<p>The before property is a special case. This <em>complex property routine</em> is defined by the compiler and handled differently by the engine than a normal property routine. In this case, the property value representing the routine address is only returned if the global variables object and verbroutine contain the object in question and the address of the DoGet routine, respectively. If there is a match, the routine is executed before DoGet, which is the library routine (in <strong>verblib.h</strong>) that normally handles the taking of objects. (There is also a companion to before called after, which is checked after the verb routine has been called.) See <em>V.c</em> <em>Before And After Routines</em> for further elucidation.</p>
</div>
<div class="paragraph">
<p>There will be more on property routines and complex property routines later. For now, think of a property as simply containing one or more values of some kind.</p>
</div>
<div class="paragraph">
<p>A property is defined similiarly to an attribute as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">property &lt;property name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A default value may be defined for the property using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">property &lt;property name&gt; &lt;default value&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;default value&gt; is a constant or dictionary word. For objects without a given property, attempting to find that property will result in the default value. If no default is explicitly declared, it is 0 (or <code>""</code> or the <code>nothing</code> object, whatever is appropriate in context&#8212;&#8203;since they all represent the same zero value).</p>
</div>
<div class="paragraph">
<p>The list of properties defined in <strong>hugolib.h</strong> is:</p>
</div>
<div class="paragraph">
<p>name the basic object name</p>
</div>
<div class="paragraph">
<p>before pre-verb routines</p>
</div>
<div class="paragraph">
<p>after post-verb routines</p>
</div>
<div class="paragraph">
<p>noun noun(s) for referring to object</p>
</div>
<div class="paragraph">
<p>adjective adjective(s) for describing object</p>
</div>
<div class="paragraph">
<p>article &#8220;a&#8221;, &#8220;an&#8221;, &#8220;the&#8221;, &#8220;some&#8221;, etc.</p>
</div>
<div class="paragraph">
<p>preposition &#8220;in&#8221;, &#8220;inside&#8221;, &#8220;outside of&#8221;, etc.</p>
</div>
<div class="paragraph">
<p>pronoun appropriate for the object in question</p>
</div>
<div class="paragraph">
<p>react_before to allow reaction by an object that is not</p>
</div>
<div class="paragraph">
<p>react_after directly involved in the action</p>
</div>
<div class="paragraph">
<p>short_desc basic &#8220;X is here&#8221; description</p>
</div>
<div class="paragraph">
<p>initial_desc supersedes short_desc (or long_desc</p>
</div>
<div class="paragraph">
<p>for locations)</p>
</div>
<div class="paragraph">
<p>long_desc detailed description</p>
</div>
<div class="paragraph">
<p>found_in in case of multiple locations (virtual,</p>
</div>
<div class="paragraph">
<p><em>not</em> physical parent objects<sup class="footnote">[<a id="_footnoteref_18" class="footnote" href="#_footnotedef_18" title="View footnote.">18</a>]</sup>)</p>
</div>
<div class="paragraph">
<p>type to identify the type of object</p>
</div>
<div class="paragraph">
<p>size for holding/inventory</p>
</div>
<div class="paragraph">
<p>capacity ‚Äú ‚Äú ‚Äú</p>
</div>
<div class="paragraph">
<p>holding ‚Äú ‚Äú ‚Äú</p>
</div>
<div class="paragraph">
<p>reach for limiting object accessibility</p>
</div>
<div class="paragraph">
<p>list_contents for overriding normal listing</p>
</div>
<div class="paragraph">
<p>in_scope actor(s) that can access an object</p>
</div>
<div class="paragraph">
<p>parse_rank for differentiating like-named objects</p>
</div>
<div class="paragraph">
<p>exclude_from_all for interpreting &#8220;all&#8221; in player input</p>
</div>
<div class="paragraph">
<p>door_to for handling ‚Äú&gt;ENTER &lt;object&gt;‚Äú</p>
</div>
<div class="paragraph">
<p>n_to</p>
</div>
<div class="paragraph">
<p>ne_to</p>
</div>
<div class="paragraph">
<p>e_to</p>
</div>
<div class="paragraph">
<p>se_to</p>
</div>
<div class="paragraph">
<p>s_to</p>
</div>
<div class="paragraph">
<p>sw_to (for rooms only, where an exit leads)</p>
</div>
<div class="paragraph">
<p>w_to</p>
</div>
<div class="paragraph">
<p>nw_to</p>
</div>
<div class="paragraph">
<p>u_to</p>
</div>
<div class="paragraph">
<p>d_to</p>
</div>
<div class="paragraph">
<p>in_to</p>
</div>
<div class="paragraph">
<p>out_to</p>
</div>
<div class="paragraph">
<p>cant_go message if a direction is invalid</p>
</div>
<div class="paragraph">
<p>extra_scenery unimportant words/objects in location desc.</p>
</div>
<div class="paragraph">
<p>each_turn a routine called each turn</p>
</div>
<div class="paragraph">
<p>key_object if lockable, the proper key</p>
</div>
<div class="paragraph">
<p>when_open supersedes short_desc</p>
</div>
<div class="paragraph">
<p>when_closed ‚Äú ‚Äú</p>
</div>
<div class="paragraph">
<p>ignore_response for characters</p>
</div>
<div class="paragraph">
<p>order_response ‚Äú ‚Äú</p>
</div>
<div class="paragraph">
<p>contains_desc instead of basic &#8220;Inside X are&#8230;&#8203;&#8221;</p>
</div>
<div class="paragraph">
<p>inv_desc for special inventory descriptions</p>
</div>
<div class="paragraph">
<p>desc_detail parenthetical detail for object listing</p>
</div>
<div class="paragraph">
<p>misc for miscellaneous use</p>
</div>
<div class="paragraph">
<p>(For a detailed description of how each property is used, see <em>APPENDIX B:</em> <em>THE HUGO LIBRARY</em>.)</p>
</div>
<div class="paragraph">
<p>The following properties are also defined and used exclusively by the display object:</p>
</div>
<div class="paragraph">
<p>screenwidth width of the display, in characters</p>
</div>
<div class="paragraph">
<p>screenheight height of the display, in characters</p>
</div>
<div class="paragraph">
<p>linelength width of the current text window</p>
</div>
<div class="paragraph">
<p>windowlines height of the current text window</p>
</div>
<div class="paragraph">
<p>cursor_column horizontal and vertical position of</p>
</div>
<div class="paragraph">
<p>cursor_row the cursor in the current text window</p>
</div>
<div class="paragraph">
<p>hasgraphics true if the current display is graphics-</p>
</div>
<div class="paragraph">
<p>capable</p>
</div>
<div class="paragraph">
<p>title_caption dictionary entry giving the full proper</p>
</div>
<div class="paragraph">
<p>name of the program (optional)</p>
</div>
<div class="paragraph">
<p>statusline_height of the last-printed status line</p>
</div>
<div class="paragraph">
<p>Property names may be aliased similarly to attributes using:</p>
</div>
<div class="paragraph">
<p>property &lt;property2&gt; alias &lt;property1&gt;</p>
</div>
<div class="paragraph">
<p>where &lt;property1&gt; has already been defined. The library aliases (among others) the following:</p>
</div>
<div class="paragraph">
<p>nouns alias noun</p>
</div>
<div class="paragraph">
<p>adjectives alias adjective</p>
</div>
<div class="paragraph">
<p>prep alias preposition</p>
</div>
<div class="paragraph">
<p>pronouns alias pronoun</p>
</div>
<div class="paragraph">
<p>Whereas a simple property is expressed as</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.&lt;property&gt;</p>
</div>
<div class="paragraph">
<p>The number of elements to a property with more than a single value can be found via</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.#&lt;property&gt;</p>
</div>
<div class="paragraph">
<p>and a single element is expressed as</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.&lt;property&gt; #&lt;element number&gt;</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>&lt;object&gt;.&lt;property&gt; is simply the shortened version of &lt;object&gt;.&lt;property&gt; #1.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To add some properties to the suitcase object, expand the object definition to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object mysuitcase "big green suitcase"

\{

in emptyroom ! done earlier

is openable, not open !

nouns "suitcase", "case", "luggage"

adjective "big", "green", "suit"

article "a"

size 25

capacity 100

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the parser&#8217;s rules for object identification, the suitcase object may now be referred to by the player as &#8220;big green suitcase&#8221;, &#8220;big case&#8221;, or &#8220;green suitcase&#8221; among other combinations. Even &#8220;big green&#8221; and &#8220;suit&#8221; may be valid, provided that these don&#8217;t also refer to other objects within valid scope such as &#8220;a big green apple&#8221; or &#8220;your suit jacket&#8221;.</p>
</div>
<div class="paragraph">
<p>The basic form for identification by the parser is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;adjective 1&gt; &lt;adj. 2&gt; &lt;adj. 3&gt;...&lt;adj. n&gt; &lt;noun&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where any subset of these elements is allowable. However, the noun must come last, and only one noun is recognized, so that</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;noun&gt; &lt;noun&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;noun&gt; &lt;adjective&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>as in &#8220;luggage case&#8221; and &#8220;suitcase green&#8221; are not recognized.</p>
</div>
<div class="paragraph">
<p>One occasional source of befuddling code that doesn&#8217;t behave the way the programmer intended is not allowing enough slots for a property on a given object. That is, if an object is originally defined with the property</p>
</div>
<div class="paragraph">
<p>found_in kitchen</p>
</div>
<div class="paragraph">
<p>and later, the program tries to set</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.found_in #2 = livingroom</p>
</div>
<div class="paragraph">
<p>in order to make the object available in both the kitchen <em>and</em> the living room, it will have no substantial effect. That is, there will be no space initialized in &lt;object&gt;'s property table for a second value under found_in. Trying to read &lt;object&gt;.found_in #2 will return a value of 0&#8212;&#8203;a non-existent property&#8212;&#8203;not the number of the livingroom object.</p>
</div>
<div class="paragraph">
<p>To overcome this, if it is known that eventually a second (or third, or fourth, or ninth) value is going to be set&#8212;&#8203;even if only one value is defined at the outset&#8212;&#8203;use</p>
</div>
<div class="paragraph">
<p>found_in kitchen, 0[, 0, 0,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>in the object definition. (A useful shortcut for initializing multiple zero values is to use</p>
</div>
<div class="paragraph">
<p>found_in #4</p>
</div>
<div class="paragraph">
<p>instead of</p>
</div>
<div class="paragraph">
<p>found_in 0, 0, 0, 0</p>
</div>
<div class="paragraph">
<p>where #<em>n</em> initializes <em>n</em> zero values in the object definition.)</p>
</div>
<div class="paragraph">
<p>As might be expected, combinations of properties are read left-to-right, so that</p>
</div>
<div class="paragraph">
<p>location.n_to.name</p>
</div>
<div class="paragraph">
<p>is understood as</p>
</div>
<div class="paragraph">
<p>(location.n_to).name</p>
</div>
<div class="paragraph">
<p>which is, in other words, the name property of the object stored in location.n_to.</p>
</div>
</div>
<div class="sect2">
<h3 id="_classes"><a class="anchor" href="#_classes"></a>3.5. Classes</h3>
<div class="paragraph">
<p>Classes are objects that are specifically intended to be used as prototypes for one or more similar objects. They&#8217;re extremely useful for when you want to create a number of objects that will all share certain basic characteristics. Here is how a class is defined:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">class &lt;classname&gt; ["&lt;optional name&gt;"]

\{

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>with the body of the definition being the same as that for an object definition, where the properties and attributes defined are to be the same for all members of the class.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">class box

\{

noun "box"

long_desc

"It looks like a regular old box."

is openable, not open

}

box largebox "large box"

\{

article "a"

adjectives "big", "large"

is open

}

box greenbox "green box"

\{

article "a"

adjective "green"

long_desc

"It looks like a regular old box,

only green."

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Beginning the long_desc property routine on the line below the property name is understood by the compiler as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">long_desc

\{

"It looks like a regular old box,

only green."

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the property is only one line&#8212;&#8203;a single line of text to print&#8212;&#8203;the braces are unnecessary.)</p>
</div>
<div class="paragraph">
<p>The definition of an object derived from a particular class is begun with the name of the prototype object instead of object. All properties and attributes of the class are inherited (except for its position in the object tree), unless they have been explicitly defined in the new object (in which case they take precedence over any defaults defined in the class).</p>
</div>
<div class="paragraph">
<p>That is, although the box class is defined without the open attribute, the largebox object will begin the game as open, since this is in the largebox definition. It will begin the game as openable, as well, as this is inherited from the box class.</p>
</div>
<div class="paragraph">
<p>And while the largebox object will have the long_desc of the box class, the greenbox object replaces the default property routine with a new description. (An exception to this is an <code>$additive</code> property, to be discussed later, where new properties are added to those of previous classes.)</p>
</div>
<div class="paragraph">
<p>It is also possible to define an object using a previous object as a class even though the previous object was not explicitly defined as a class (using the class keyword). Therefore,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">largebox largeredbox "large red box"

\{

adjectives "big", "large", "red"

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is perfectly valid. We created what amounts to a &#8220;copy&#8221; of largebox, with a different name (&#8220;large red box&#8221; this time) and a different set of adjectives to refer to it.</p>
</div>
<div class="paragraph">
<p>Occasionally, it may be necessary to have an object or class inherit from more than one previously defined class. This can be done using the &#8220;inherits&#8221; instruction.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">&lt;class1&gt; &lt;objectname&gt; "name"

\{

inherits &lt;class2&gt;[, &lt;class3&gt;,...]

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or even</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">object &lt;objectname&gt; "name"

\{

inherits &lt;class1&gt;, &lt;class2&gt;[, &lt;class3&gt;,...]

...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The precedence of inheritance is in the order of occurrence. In either example, the object inherits its properties and attributes first from &lt;class1&gt;, then from &lt;class2&gt;, and so on.</p>
</div>
<div class="paragraph">
<p>The Hugo Object Library (<strong>objlib.h</strong>) contains a number of useful class definitions for things like rooms, characters, scenery, vehicles, etc. Sometimes, however, it may be desirable to use a different definition for, say, the room class while keeping all the others in the Object Library.</p>
</div>
<div class="paragraph">
<p>Instead of actually editing <strong>objlib.h</strong><sup class="footnote">[<a id="_footnoteref_19" class="footnote" href="#_footnotedef_19" title="View footnote.">19</a>]</sup>, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">replace &lt;class&gt; ["&lt;optional name&gt;"]

\{

(...completely new object definition...)

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;class&gt; is the name of a previously defined object or class, such as &#8220;room&#8221;. All subsequent references to &lt;class&gt; will use this object instead of the previously defined one. (Note that this means that the replacement must come <em>before</em><sup class="footnote">[<a id="_footnoteref_20" class="footnote" href="#_footnotedef_20" title="View footnote.">20</a>]</sup> any uses of the class as the parent class for other objects.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_3"><a class="anchor" href="#_what_should_i_be_able_to_do_now_3"></a>3.6. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>By now you should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>be able to create simple objects and add them to an existing game&#8212;&#8203;whether an empty game based on <strong>shell.hug</strong> or a copy of <strong>sample.hug</strong> complete with existing objects and locations;</p>
</li>
<li>
<p>experiment by adding new objects, giving them different names and starting locations as well as nouns and adjectives to describe them, assigning new property values or modifying existing ones, setting different attributes, etc.;</p>
</li>
<li>
<p>have a basic understanding of how the object tree works in terms of how objects are arranged within the physical world of the game, including rooms or locations, objects within those locations, and objects within other objects.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hugo_programming"><a class="anchor" href="#_hugo_programming"></a>4. HUGO PROGRAMMING</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_variables"><a class="anchor" href="#_variables"></a>4.1. Variables</h3>
<div class="paragraph">
<p>What is a variable, exactly? Let&#8217;s start with the difference between a constant value and a variable value. The number 6 is a constant: we can&#8217;t change it. We can&#8217;t tell the program: &#8220;In this particular circumstance, let&#8217;s treat this 6 like it was actually 21.&#8221; Consider a situation, however, where we may want to record a particular value at one point in order to refer to it later. In other words, we may want to use a value that we won&#8217;t know at the time we write the code that will be using it.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a piece of code that, as we&#8217;ll see shortly, prints a single line of output with a number in the middle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print "The temperature is "; number temp; " degrees."</code></pre>
</div>
</div>
<div class="paragraph">
<p>That statement may print</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>The temperature is 10 degrees.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>The temperature is ‚Äì9 degrees.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>or any other similar variation depending on what the <em>variable</em> temp happens to be equal to at the time.<sup class="footnote">[<a id="_footnoteref_21" class="footnote" href="#_footnotedef_21" title="View footnote.">21</a>]</sup></p>
</div>
<div class="paragraph">
<p>Hugo supports two kinds of variables: <em>global</em> and <em>local</em>. Either type simply holds an integer value, so a variable can hold a simple value, an object number, a dictionary address, a routine address, or any other standard Hugo data type through an assignment such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">a = 1

nextobj = parent(obj)

temp_word = "the"</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Global</em> variables are visible throughout the program. They must be defined similarly to properties and attributes as</p>
</div>
<div class="paragraph">
<p>global &lt;global variable name&gt;[ = &lt;initial value&gt;]</p>
</div>
<div class="paragraph">
<p><em>Local</em> variables, on the other hand, are recognized only within the routine in which they are defined. They are defined using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">local &lt;local variable name&gt;[ = &lt;initial value&gt;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Global variables must of course have a unique name, different from that of any other data object; local variables, on the other hand, may share the names of local variables in other routines.</p>
</div>
<div class="paragraph">
<p>In either case, global or local, the default initial value is 0 if no other value is given. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">global time_of_day = 1100</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equal to 1100 when the program is run, and is visible at any point in the program, by any object or routine. On the other hand, the variables</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">local a, max = 100, t</code></pre>
</div>
</div>
<div class="paragraph">
<p>are visible only within the block of code where they are defined, and are initialized to 0, 100, and 0, respectively, each time that section of code (be it a routine, property routine, event, etc.) is run.</p>
</div>
<div class="paragraph">
<p>The compiler defines a set of engine globals: global variables that are referenced directly by the engine, but which may otherwise be treated like any other global variables. These are:</p>
</div>
<div class="paragraph">
<p>object direct object of an action</p>
</div>
<div class="paragraph">
<p>xobject indirect object</p>
</div>
<div class="paragraph">
<p>self self-referential object</p>
</div>
<div class="paragraph">
<p>words total number of words in command</p>
</div>
<div class="paragraph">
<p>player the player object</p>
</div>
<div class="paragraph">
<p>actor the player, or character obj. (for scripts)</p>
</div>
<div class="paragraph">
<p>verbroutine specified by the command</p>
</div>
<div class="paragraph">
<p>location location of the player object</p>
</div>
<div class="paragraph">
<p>endflag if not false (0), run EndGame routine</p>
</div>
<div class="paragraph">
<p>prompt for input; default is ‚Äú&gt;‚Äú</p>
</div>
<div class="paragraph">
<p>objects the total number of objects</p>
</div>
<div class="paragraph">
<p>system_status after certain operations</p>
</div>
<div class="paragraph">
<p>The object, xobject, and verbroutine globals are set up by the engine depending on what command is entered by the player. The self global is undefined except when an object is being referenced (as in a property routine or event). In that case, it is set to the number of that object. The player variable holds the number of the object that the player is controlling; the endflag variable must be 0 unless something has occurred to end the game; and the prompt variable represents the dictionary word appearing at the start of an input line (which most programs set to <code>&gt;</code> by convention).</p>
</div>
<div class="paragraph">
<p>The objects variable can be set by the program, but to no useful effect. The engine will reset it to the &#8220;real&#8221; value whenever referenced. (All object numbers range from 0 to the value of objects.) The system_status variable may be read (after a resource operation or a system call; see the relevant sections for an explanation of these functions) to check for an error value. See the section on <em>"`Resources`"</em> for possible return values.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Setting endflag to a non-zero value forces an <em>immediate</em> break from the game loop. Statements following the endflag assignment even in the same function are not executed; control is passed directly to the engine, which calls the EndGame routine.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_constants"><a class="anchor" href="#_constants"></a>4.2. Constants</h3>
<div class="paragraph">
<p>Constants are simply labels that represent a non-modifiable value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">constant FIRST_NAME "John"

constant LAST_NAME "Smith"</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Note the lack of an <code>=</code> sign between, for example, FIRST_NAME and <code>John</code>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print LAST_NAME; ", "; FIRST_NAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>results in:</p>
</div>
<div class="paragraph">
<p>Smith, John</p>
</div>
<div class="paragraph">
<p>Constants can, like any other Hugo data type, be integers, dictionary entries, object numbers, etc.</p>
</div>
<div class="paragraph">
<p>It is not absolutely necessary that a constant be given a definite value if the constant is to be used as some sort of flag or marker, etc. Therefore,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">constant THIS_RESULT

constant THAT_RESULT</code></pre>
</div>
</div>
<div class="paragraph">
<p>will have unique values from each other, as well as from any other constant defined without a specific value.</p>
</div>
<div class="paragraph">
<p>Sometimes it may be useful to enumerate a series of constants in sequence. Instead of defining them all individually, it is possible to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">enumerate start = 1

\{

MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>giving:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">MONDAY = 1, TUESDAY = 2, WEDNESDAY = 3,

THURSDAY = 4, FRIDAY = 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>The start value is optional. If omitted, it is 0. Also, it is possible to change the current value at any point (therefore also affecting all following values).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">enumerate

\{

A, B, C = 5, D, E

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>giving:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">A = 0, B = 1, C = 5, D = 6, E = 7.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, it is possible to alter the step value of the enumeration using the step keyword followed by <code>+n</code>, <code>-n</code>, <code>*n</code>, or <code>/n</code>, where <code>n</code> is a constant integer value.
To start with 1 and count by multiples of two:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">enumerate step *2

\{

A = 1, B, C, D

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>giving:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">A = 1, B = 2, C = 4, D = 8.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enumeration of global variables is also possible, using the globals specifier, as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">enumerate globals

\{

&lt;global1&gt;, &lt;global2&gt;,...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Otherwise the specifier <code>constants</code> (as opposed to <code>globals</code>) is implied as the default.</p>
</div>
</div>
<div class="sect2">
<h3 id="_printing_text"><a class="anchor" href="#_printing_text"></a>4.3. Printing Text</h3>
<div class="paragraph">
<p>Text can be printed&#8212;&#8203;that is, output to the screen during running of a Hugo program&#8212;&#8203;using two different methods. The first is the basic print command, the simplest form of which is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print "&lt;string&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>where &lt;string&gt; consists of a series of alphanumeric characters and punctuation.</p>
</div>
<div class="paragraph">
<p>The backslash character (<code>\</code>) is handled specially. It modifies how the character following it in a string is treated.<sup class="footnote">[<a id="_footnoteref_22" class="footnote" href="#_footnotedef_22" title="View footnote.">22</a>]</sup></p>
</div>
<div class="paragraph">
<p>\" inserts quotation marks</p>
</div>
<div class="paragraph">
<p>\\ insert a literal backslash character</p>
</div>
<div class="paragraph">
<p>\_ insert a forced space, overriding left-justification for the rest of the string</p>
</div>
<div class="paragraph">
<p>\n insert a forced newline</p>
</div>
<div class="paragraph">
<p>As usual, a single <code>\</code> at the end of a line signals that the line continues with the following line.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="paragraph">
<p>print "\"Hello!\""</p>
</div>
<div class="paragraph">
<p>"Hello!"</p>
</div>
<div class="paragraph">
<p>print "Print a&#8230;&#8203;\n&#8230;&#8203;newline"</p>
</div>
<div class="paragraph">
<p>Print a&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;newline</p>
</div>
<div class="paragraph">
<p>print "One\\two\\three"</p>
</div>
<div class="paragraph">
<p>One\two\three</p>
</div>
<div class="paragraph">
<p>print " Left-justified"</p>
</div>
<div class="paragraph">
<p>print "\_ Not left-justified"</p>
</div>
<div class="paragraph">
<p>Left-justified</p>
</div>
<div class="paragraph">
<p>Not left-justified</p>
</div>
<div class="paragraph">
<p>print "This is a \</p>
</div>
<div class="paragraph">
<p>single line."</p>
</div>
<div class="paragraph">
<p>This is a single line.</p>
</div>
<div class="paragraph">
<p>(Although</p>
</div>
<div class="paragraph">
<p>print "This is a</p>
</div>
<div class="paragraph">
<p>single line."</p>
</div>
<div class="paragraph">
<p>will produce the same result, since the line break occurs within quotation marks.)</p>
</div>
<div class="paragraph">
<p>After each of the above print commands, a newline is printed. To avoid this, append a semicolon (<code>;</code>) to the end of the print statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print "This is a ";

print "single line."</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a single line.</p>
</div>
<div class="paragraph">
<p>Print statements may also contain data types, or a combination of data types and strings. The command</p>
</div>
<div class="paragraph">
<p>print "The "; object.name; " is closed."</p>
</div>
<div class="paragraph">
<p>will print the word located at the dictionary address specified by object.name, so that if object.name points to the word <code>box</code>, the resulting output would be:</p>
</div>
<div class="paragraph">
<p>The box is closed.</p>
</div>
<div class="paragraph">
<p>To capitalize the first letter of the specified word, use the capital modifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print "The "; capital object.name; " is closed."</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Box is closed.</p>
</div>
<div class="paragraph">
<p>To print the data type as a value instead of referencing the dictionary, use the number modifier. For example, if the variable time holds the value 5,</p>
</div>
<div class="paragraph">
<p>print "There are "; number time; " seconds remaining."</p>
</div>
<div class="paragraph">
<p>There are 5 seconds remaining.</p>
</div>
<div class="paragraph">
<p>If number were not used, the engine would try to find a word at the dictionary address 5, and the result will likely be garbage.</p>
</div>
<div class="paragraph">
<p>Mainly for debugging purposes, the modifier hex prints the data type as a hexadecimal number instead of a decimal one. If the variable val equals 127,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">print number val; " is "; hex val; " in hexadecimal."</code></pre>
</div>
</div>
<div class="paragraph">
<p>127 is 7F in hexadecimal.</p>
</div>
<div class="paragraph">
<p>The second way to print text is from the text bank, from which&#8212;&#8203;if memory is in short supply&#8212;&#8203;sections are loaded from disk only when they are needed by the program. This method is provided so that lengthy blocks of text&#8212;&#8203;such as description and narration&#8212;&#8203;do not take up valuable space if memory is limited. The command consists simply of a quoted string without any preceding statement.</p>
</div>
<div class="paragraph">
<p>"This string would be written to disk."</p>
</div>
<div class="paragraph">
<p>This string would be written to disk.</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>"So would this one ";</p>
</div>
<div class="paragraph">
<p>"and this one."</p>
</div>
<div class="paragraph">
<p>So would this one and this one.</p>
</div>
<div class="paragraph">
<p>Notice that a semicolon at the end of the statement still overrides the newline. The in-string formatting combinations are still usable with these print statements, but since each statement is a single line, data types and other modifiers may not be compounded. Because of that,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">"\"Hello,\"" he said."</code></pre>
</div>
</div>
<div class="paragraph">
<p>will write</p>
</div>
<div class="paragraph">
<p>"Hello," he said.</p>
</div>
<div class="paragraph">
<p>to the .HEX file text bank, but</p>
</div>
<div class="paragraph">
<p>"There are "; number time_left; " seconds remaining."</p>
</div>
<div class="paragraph">
<p>is illegal.</p>
</div>
<div class="paragraph">
<p>The color of text may be changed using the color command (also valid with the U.K. spelling colour). The format is</p>
</div>
<div class="paragraph">
<p>color &lt;foreground&gt;[, &lt;background&gt;[, &lt;input color&gt;]]</p>
</div>
<div class="paragraph">
<p>where the background color is not necessary. If no background color is specified, the current one is assumed). The input color is also not necessary&#8212;&#8203;this refers to the color of player input and, if not given, is the same as the foreground color.</p>
</div>
<div class="paragraph">
<p>The standard color set with corresponding values and constant labels (defined in <strong>hugolib.h</strong>) is:</p>
</div>
<div class="paragraph">
<p><strong><span class="underline">COLOR</span> <span class="underline">VALUE</span> <span class="underline">LABEL</span></strong></p>
</div>
<div class="paragraph">
<p>Black 0 BLACK</p>
</div>
<div class="paragraph">
<p>Blue 1 BLUE</p>
</div>
<div class="paragraph">
<p>Green 2 GREEN</p>
</div>
<div class="paragraph">
<p>Cyan 3 CYAN</p>
</div>
<div class="paragraph">
<p>Red 4 RED</p>
</div>
<div class="paragraph">
<p>Magenta 5 MAGENTA</p>
</div>
<div class="paragraph">
<p>Brown 6 BROWN</p>
</div>
<div class="paragraph">
<p>White 7 WHITE</p>
</div>
<div class="paragraph">
<p>Dark gray 8 DARK_GRAY</p>
</div>
<div class="paragraph">
<p>Light blue 9 LIGHT_BLUE</p>
</div>
<div class="paragraph">
<p>Light green 10 LIGHT_GREEN</p>
</div>
<div class="paragraph">
<p>Light cyan 11 LIGHT_CYAN</p>
</div>
<div class="paragraph">
<p>Light red 12 LIGHT_RED</p>
</div>
<div class="paragraph">
<p>Light magenta 13 LIGHT_MAGENTA</p>
</div>
<div class="paragraph">
<p>Yellow 14 YELLOW</p>
</div>
<div class="paragraph">
<p>Bright white 15 BRIGHT_WHITE</p>
</div>
<div class="paragraph">
<p>Default foreground 16 DEF_FOREGROUND</p>
</div>
<div class="paragraph">
<p>Default background 17 DEF_BACKGROUND</p>
</div>
<div class="paragraph">
<p>Default statusline (fore) 18 DEF_SL_FOREGROUND</p>
</div>
<div class="paragraph">
<p>Default statusline (back) 19 DEF_SL_BACKGROUND</p>
</div>
<div class="paragraph">
<p>Match foreground 20 MATCH_FOREGROUND</p>
</div>
<div class="paragraph">
<p>(Since the labels are defined in <strong>hugolib.h,</strong> when using the library, it is never necessary to refer to a color by its numerical value.)</p>
</div>
<div class="paragraph">
<p>It is expected that, regardless of the system, any color will print visibly on any other color. Video technology and shortcomings of the visible light spectrum conspire to foil this plan, however, it is suggested for practicality that white (and less frequently bright while) be used for most text-printing. Blue and black are fairly standard background colors for light-colored (such as white) text&#8212;&#8203;this is a common combination for default text (as is dark text, such as black, on a white background). A game author can use the DEF_FOREGROUND, DEF_BACKGROUND, DEF_SL_FOREGROUND, and DEF_SL_BACKGROUND colors (as is done in <strong>sample.hug</strong> and is the default in <strong>shell.hug</strong>) since this uses the colors supplied by the Hugo Engine, allowing the user to change colors to his or her liking if the port supports that capability.</p>
</div>
<div class="paragraph">
<p>Magenta printing on a cyan background is accomplished by</p>
</div>
<div class="paragraph">
<p>color MAGENTA, CYAN</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>color 5, 3 ! if not using HUGOLIB.H</p>
</div>
<div class="paragraph">
<p>A current line can be filled&#8212;&#8203;with blank spaces in the current color&#8212;&#8203;to a specified column (essentially a tab stop) using the <code>print to&#8230;&#8203;</code> structure as follows:</p>
</div>
<div class="paragraph">
<p>print "Time:"; to 40; "Date:"</p>
</div>
<div class="paragraph">
<p>where the value following to does not exceed the maximum line length in the engine global linelength.</p>
</div>
<div class="paragraph">
<p>The resulting output will be something like:</p>
</div>
<div class="paragraph">
<p>Time: Date:</p>
</div>
<div class="paragraph">
<p>Text can be specifically located using the locate command via</p>
</div>
<div class="paragraph">
<p>locate &lt;column&gt;, &lt;row&gt;</p>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="paragraph">
<p>locate 1, 1</p>
</div>
<div class="paragraph">
<p>places text output at the top left corner of the current text window. Neither &lt;column&gt; nor &lt;row&gt; may exceed the current window boundaries&#8212;&#8203;the engine will automatically constrain them as necessary.</p>
</div>
</div>
<div class="sect2">
<h3 id="_more_formatting_sequences"><a class="anchor" href="#_more_formatting_sequences"></a>4.4. More Formatting Sequences</h3>
<div class="paragraph">
<p>As listed above, the following are valid printing sequences that may be embedded in printed strings:</p>
</div>
<div class="paragraph">
<p>\" quotation marks</p>
</div>
<div class="paragraph">
<p>\\ a literal backslash character</p>
</div>
<div class="paragraph">
<p>\_ a forced space, overriding left-justification for the rest of the string</p>
</div>
<div class="paragraph">
<p>\n a newline</p>
</div>
<div class="paragraph">
<p>The next set of formatting sequences control the appearance of printed text by turning on and off boldface, italic, proportional, and underlined printing. Not all computers and operating systems are able to provide all types of printed output; however, the engine can be relied upon to properly process any formatting&#8212;&#8203;i.e., proportionally printed text will still look fine even on a system that has only a fixed-width font, such as a Unix text terminal or DOS output (although, of course, it won&#8217;t be proportionally spaced).</p>
</div>
<div class="paragraph">
<p>\B boldface on</p>
</div>
<div class="paragraph">
<p>\b boldface off</p>
</div>
<div class="paragraph">
<p>\I italics on</p>
</div>
<div class="paragraph">
<p>\i italics off</p>
</div>
<div class="paragraph">
<p>\P proportional printing on</p>
</div>
<div class="paragraph">
<p>\p proportional printing off</p>
</div>
<div class="paragraph">
<p>\U underlining on</p>
</div>
<div class="paragraph">
<p>\u underlining off</p>
</div>
<div class="paragraph">
<p>A statement like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">"A \Bbold string with some \Iitalics\i and \Uunderline\b thrown in.\u"</code></pre>
</div>
</div>
<div class="paragraph">
<p>will result in output like:</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>A <strong>bold string with some <em>italics</em> and <span class="underline">underline</span></strong> <span class="underline">thrown in.</span></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Print style can also be changed using the Font routine in <strong>hugolib.h</strong>, so that in</p>
</div>
<div class="paragraph">
<p>Font(&lt;font change code&gt;)</p>
</div>
<div class="paragraph">
<p>the &lt;font change code&gt; can be one or more of:</p>
</div>
<div class="paragraph">
<p>BOLD_ON BOLD_OFF</p>
</div>
<div class="paragraph">
<p>ITALICS_ON ITALICS_OFF</p>
</div>
<div class="paragraph">
<p>UNDERLINE_ON UNDERLINE_OFF</p>
</div>
<div class="paragraph">
<p>and can subsequently be used alone or in combination such as:</p>
</div>
<div class="paragraph">
<p>Font(BOLD_ON | ITALICS_ON | PROP_OFF)</p>
</div>
<div class="paragraph">
<p>It&#8217;s preferable to rely on the Font function and the various font constants instead of embedding multiple font-change formatting sequences because if for no other reason than it being clearer to understand when reading the source code.</p>
</div>
<div class="paragraph">
<p>Special characters can also be printed via formatting sequences. Note that these characters are contained in the Latin-1 character set; if a particular system is incapable of displaying it, it will display the normal-ASCII equivalent. (The following examples, appearing in parentheses, may not display properly on all computers and printers.)</p>
</div>
<div class="paragraph">
<p><code>\`</code> accent grave followed by a letter</p>
</div>
<div class="paragraph">
<p>e.g. <code>\`a</code> will print an &#8216;a&#8217; with an accent grave (√†)</p>
</div>
<div class="paragraph">
<p><code>\¬¥</code> accent acute followed by a letter</p>
</div>
<div class="paragraph">
<p>e.g. <code>\¬¥E</code> will print an &#8216;E&#8217; with an accent acute (√â)</p>
</div>
<div class="paragraph">
<p><code>\~</code> tilde followed by a letter</p>
</div>
<div class="paragraph">
<p>e.g. <code>\~n</code> will print an &#8216;n&#8217; with a tilde (√±)</p>
</div>
<div class="paragraph">
<p><code>\^</code> circumflex followed by a letter</p>
</div>
<div class="paragraph">
<p>e.g. <code>\^i</code> will print an &#8216;i&#8217; with a circumflex (√Æ)</p>
</div>
<div class="paragraph">
<p><code>\:</code> umlaut followed by a letter</p>
</div>
<div class="paragraph">
<p>e.g. <code>\:u</code> will print a &#8216;u&#8217; with an umlaut (√º)</p>
</div>
<div class="paragraph">
<p><code>\,</code> cedilla followed by c or C</p>
</div>
<div class="paragraph">
<p>e.g. <code>\,c</code> will print a &#8216;c&#8217; with a cedilla (√ß)</p>
</div>
<div class="paragraph">
<p><code>\&lt;</code> or <code>\&gt;</code> Spanish quotation marks (¬´ ¬ª)</p>
</div>
<div class="paragraph">
<p><code>\!</code> upside-down exclamation point (¬°)</p>
</div>
<div class="paragraph">
<p><code>\?</code> upside-down question mark (¬ø)</p>
</div>
<div class="paragraph">
<p><code>\ae</code> ae ligature (√¶)</p>
</div>
<div class="paragraph">
<p><code>\AE</code> AE ligature (√Ü)</p>
</div>
<div class="paragraph">
<p><code>\c</code> cents symbol (¬¢)</p>
</div>
<div class="paragraph">
<p><code>\L</code> British pound (¬£)</p>
</div>
<div class="paragraph">
<p><code>\Y</code> Japanese Yen (¬•)</p>
</div>
<div class="paragraph">
<p><code>\#xxx</code> any ASCII or Latin-1 character where xxx represents the three-digit ASCII number (or Latin-1 code) of the character to be printed, e.g. <code>\#065</code> will print an &#8216;A&#8217; (ASCII 65) (Care should be taken when using codes other than those for which special character support explicitly exists, as not all systems or fonts may display all desired non-ASCII characters.)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is possible to embed Latin-1 characters directly into printed text in source code using a text editor that allows it&#8212;&#8203;but ensure that the non-ASCII characters are indeed Latin-1. Using non-Latin-1 fonts (such as Mac-encoded fonts or other encodings) will result in the wrong character(s) being printed on various platforms. Also note that platforms which <em>cannot</em> display Latin-1 characters (including some Unix-based terminal displays, DOS windows, etc.) may not have proper Latin-1-to-ASCII translation in order to <em>decode</em> Latin-1 characters embedded directly in printed text. For this reason, or if you&#8217;re not positive whether your font encoding is Latin-1, stick to using the special-character sequences described above, which are guaranteed to work properly across platforms.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_operators_and_assignments"><a class="anchor" href="#_operators_and_assignments"></a>4.5. Operators and Assignments</h3>
<div class="paragraph">
<p>Hugo allows use of all standard mathematical operators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>multiplication</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>/ integer division</p>
</div>
<div class="paragraph">
<p>which take precedence<sup class="footnote">[<a id="_footnoteref_23" class="footnote" href="#_footnotedef_23" title="View footnote.">23</a>]</sup> over:</p>
</div>
<div class="paragraph">
<p>+ addition</p>
</div>
<div class="ulist">
<ul>
<li>
<p>subtraction</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Comparisons are also valid as operators, returning Boolean true or false (1 or 0) so that</p>
</div>
<div class="paragraph">
<p>2 + (n = 1)</p>
</div>
<div class="paragraph">
<p>5 - (n &gt; 1)</p>
</div>
<div class="paragraph">
<p>evaluate respectively to 3 and 5 if n is 1, and 2 and 4 if n is 2 or greater. Valid relational operators are</p>
</div>
<div class="sect3">
<h4 id="_equal_to"><a class="anchor" href="#_equal_to"></a>equal to</h4>
<div class="paragraph">
<p>~= not equal to</p>
</div>
<div class="paragraph">
<p>&lt; less than</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>greater than</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>&#8656; less than or equal to</p>
</div>
<div class="paragraph">
<p>&gt;= greater than or equal to</p>
</div>
<div class="paragraph">
<p>Logical operators (and, or, and not) are also allowed.</p>
</div>
<div class="paragraph">
<p>(x and y) or (a and b)</p>
</div>
<div class="paragraph">
<p>(j + 5) and not ObjectisLight(k)</p>
</div>
<div class="paragraph">
<p>Using and results in true (1) if both values are non-zero. Using or results in true if either is non-zero; not results in true only if the following value is zero.</p>
</div>
<div class="paragraph">
<p>1 and 1 = 1</p>
</div>
<div class="paragraph">
<p>1 and 0 = 0</p>
</div>
<div class="paragraph">
<p>5 and 3 = 1</p>
</div>
<div class="paragraph">
<p>0 and 9 = 0</p>
</div>
<div class="paragraph">
<p>0 and 169 and 1 = 0</p>
</div>
<div class="paragraph">
<p>1 and 12 and 1233 = 1</p>
</div>
<div class="paragraph">
<p>1 or 1 = 1</p>
</div>
<div class="paragraph">
<p>35 or 0 = 1</p>
</div>
<div class="paragraph">
<p>0 or 0 = 0</p>
</div>
<div class="paragraph">
<p>not 0 = 1</p>
</div>
<div class="paragraph">
<p>not 1 = 0</p>
</div>
<div class="paragraph">
<p>not 8 = 0</p>
</div>
<div class="paragraph">
<p>not (8 and 0) = 1</p>
</div>
<div class="paragraph">
<p>1 and 7 or (14 and not 0) = 1</p>
</div>
<div class="paragraph">
<p>(0 or not 1) and 3 = 0</p>
</div>
<div class="paragraph">
<p>Additionally, bitwise operators are provided:</p>
</div>
<div class="paragraph">
<p>1 &amp; 1 = 1 (Bitwise and)</p>
</div>
<div class="paragraph">
<p>1 &amp; 0 = 0</p>
</div>
<div class="paragraph">
<p>1 | 0 = 1 (Bitwise or)</p>
</div>
<div class="paragraph">
<p>1 | 1 = 1</p>
</div>
<div class="paragraph">
<p>~0 = -1 (Bitwise not/inverse)</p>
</div>
<div class="paragraph">
<p>(As mentioned previously, a detailed explanation of bitwise operations is a little beyond the scope of this manual; programmers may occasionally use the <code>|</code> operator to combine bitmask-type parameters for certain library functions such as fonts and list-formats, but only advanced users should have to worry about employing bitwise operators to any great extent in practical programming.)</p>
</div>
<div class="paragraph">
<p>Any Hugo data type can appear in an expression, including routines, attribute tests, properties, constants, and variables. Standard mathematical rules for order of significance in evaluating an expression apply, so that parenthetical sub-expressions are evaluated first, followed by multiplication and division, followed by addition and subtraction.</p>
</div>
<div class="paragraph">
<p>Some sample combinations are:</p>
</div>
<div class="paragraph">
<p>10 + object.size ! integer constant and</p>
</div>
<div class="paragraph">
<p>! property</p>
</div>
<div class="paragraph">
<p>object is openable + 1 ! attribute test and constant</p>
</div>
<div class="paragraph">
<p>FindLight(location) + a ! return value and variable</p>
</div>
<div class="paragraph">
<p>1 and object is light ! constant, logical test,</p>
</div>
<div class="paragraph">
<p>! and attribute</p>
</div>
<div class="paragraph">
<p>Expressions can be evaluated and assigned to either a variable, a property, or an array element.</p>
</div>
<div class="paragraph">
<p>&lt;variable&gt; = &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.&lt;property&gt; [#&lt;element&gt;] = &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>&lt;array&gt;[&lt;element&gt;] = &lt;expression&gt;</p>
</div>
</div>
<div class="sect3">
<h4 id="_efficient_operators"><a class="anchor" href="#_efficient_operators"></a>Efficient Operators</h4>
<div class="paragraph">
<p>Something like</p>
</div>
<div class="paragraph">
<p>number_of_items = number_of_items + 1</p>
</div>
<div class="paragraph">
<p>if number_of_items &gt; 10</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "Too many items!"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>can be coded more simply as</p>
</div>
<div class="paragraph">
<p>if ++number_of_items &gt; 10</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "Too many items!"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The <code>++</code> operator increases the following variable by one before returning the value of the variable. Similarly, <code>--</code> can precede a variable to decrease the value by one before returning it. Since these operators act before the value is returned, they are called &#8220;pre-increment&#8221; and &#8220;pre-decrement&#8221;.</p>
</div>
<div class="paragraph">
<p>If <code>++</code> or <code>--</code> comes <em>after</em> a variable, the value of the variable is returned and then the value is increased or decreased, respectively. In this usage, the operators are called &#8220;post-increment&#8221; and &#8220;post-decrement&#8221;.</p>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="paragraph">
<p>while ++i &lt; 5 ! pre-increment</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print number i; " ";</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>will output:</p>
</div>
<div class="paragraph">
<p>1 2 3 4</p>
</div>
<div class="paragraph">
<p>But</p>
</div>
<div class="paragraph">
<p>while i++ &lt; 5 ! post-increment</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print number i; " ";</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>will output:</p>
</div>
<div class="paragraph">
<p>1 2 3 4 5</p>
</div>
<div class="paragraph">
<p>Since in the second example, the variable is increased before getting the value, while in the second example, it is increased after checking it.</p>
</div>
<div class="paragraph">
<p>It is also possible to use the operators <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>&amp;=</code>, and <code>|=</code>. These can also be used to modify a variable at the same time its value is being checked. All of these, however, operate before the value in question is returned.</p>
</div>
<div class="paragraph">
<p>x = 5</p>
</div>
<div class="paragraph">
<p>y = 10</p>
</div>
<div class="paragraph">
<p>print "x = "; number (x*=y); ", y = "; number y</p>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="paragraph">
<p>x = 50, y = 10</p>
</div>
<div class="paragraph">
<p>When the compiler is processing any of the above lines, the efficient operator takes precedence over a normal (i.e., single-character) operator. For example,</p>
</div>
<div class="paragraph">
<p>x = y + ++z</p>
</div>
<div class="paragraph">
<p>is actually compiled as</p>
</div>
<div class="paragraph">
<p>x = y++ + z</p>
</div>
<div class="paragraph">
<p>since the <code>++</code> is parsed first. To properly code this line with a pre-increment on the z variable instead of a post-increment on y, use parentheses to order the various operators:</p>
</div>
<div class="paragraph">
<p>x = y + (++z)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_arrays_and_strings"><a class="anchor" href="#_arrays_and_strings"></a>4.6. Arrays And Strings</h3>
<div class="paragraph">
<p>Prior to this point, little has been said about arrays. Arrays are sets of values that share a common name, and where the elements are referenced by number. Arrays are defined by</p>
</div>
<div class="paragraph">
<p>array &lt;arrayname&gt; [&lt;array size&gt;]</p>
</div>
<div class="paragraph">
<p>where &lt;array size&gt; must be a numerical constant.</p>
</div>
<div class="paragraph">
<p>An array definition reserves a block of memory of &lt;array size&gt;<sup class="footnote">[<a id="_footnoteref_24" class="footnote" href="#_footnotedef_24" title="View footnote.">24</a>]</sup>, so that, for example,</p>
</div>
<div class="paragraph">
<p>array test_array[10]</p>
</div>
<div class="paragraph">
<p>reserves ten possible storage elements for the array.</p>
</div>
<div class="paragraph">
<p>Keep in mind that &lt;array size&gt; determines the size of the array, not the maximum element number. Elements begin counting at 0, so that test_array, with 10 elements, has members numbered from 0 to 9. Trying to access test_array[10] or higher will return a zero value (and, if running in the debugger, cause a debugger warning). Trying to assign it by mistake will have no effect.</p>
</div>
<div class="paragraph">
<p>To prevent such out-of-bounds array reading/writing, an array&#8217;s length may be read via:</p>
</div>
<div class="paragraph">
<p>array[]</p>
</div>
<div class="paragraph">
<p>where no element number is specified. Using the above example,</p>
</div>
<div class="paragraph">
<p>print number test_array[]</p>
</div>
<div class="paragraph">
<p>would result in <code>10</code>.</p>
</div>
<div class="paragraph">
<p>Array elements can be assigned more than one at a time, as in</p>
</div>
<div class="paragraph">
<p>&lt;arrayname&gt; = &lt;element1&gt;, &lt;element2&gt;, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>where &lt;element1&gt; and &lt;element2&gt; can be expressions or single values.</p>
</div>
<div class="paragraph">
<p>Elements need not be all of the same type, either, so that</p>
</div>
<div class="paragraph">
<p>test_array[0] = (10+5), "Hello!", FindLight(location)</p>
</div>
<div class="paragraph">
<p>is perfectly legal (although perhaps not perfectly useful). More common is a usage like</p>
</div>
<div class="paragraph">
<p>names[0] = "Ned", "Sue", "Bob", "Maria"</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>test_array[2] = 5, 4, 3, 2, 1</p>
</div>
<div class="paragraph">
<p>The array can then be accessed by</p>
</div>
<div class="paragraph">
<p>print names[0]; " and "; names[3]</p>
</div>
<div class="paragraph">
<p>Ned and Maria</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>b = test_array[3] + test_array[5]</p>
</div>
<div class="paragraph">
<p>which would set the variable b to 4 + 2, or 6.</p>
</div>
<div class="paragraph">
<p>Because array space is statically allocated by the compiler, all arrays must be declared at the global level. Local arrays are illegal, as are entire arrays passed as arguments<sup class="footnote">[<a id="_footnoteref_25" class="footnote" href="#_footnotedef_25" title="View footnote.">25</a>]</sup>. However, single elements of arrays are valid arguments.</p>
</div>
<div class="paragraph">
<p>It is, however, possible to pass an array address as an argument, and the routine can then access the elements of the array using the array modifier. For example, if items is an array containing:</p>
</div>
<div class="paragraph">
<p>items[0] = "apples"</p>
</div>
<div class="paragraph">
<p>items[1] = "oranges"</p>
</div>
<div class="paragraph">
<p>items[2] = "socks"</p>
</div>
<div class="paragraph">
<p>The following:</p>
</div>
<div class="paragraph">
<p>routine Test(v)</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print array v[2]</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>can be called using</p>
</div>
<div class="paragraph">
<p>Test(items)</p>
</div>
<div class="paragraph">
<p>to produce the output</p>
</div>
<div class="paragraph">
<p>socks</p>
</div>
<div class="paragraph">
<p>even though v is an argument (i.e., local variable), and technically not an array. The line</p>
</div>
<div class="paragraph">
<p>print array v[2]</p>
</div>
<div class="paragraph">
<p>tells the engine to treat v as an array address, so that we can follow it with [&lt;element number&gt;].</p>
</div>
<div class="paragraph">
<p>Arrays also allow a Hugo programmer to implement what are known as <em>string arrays</em>, which are textual strings, somewhat similar but not identical to dictionary entries. Most significantly, since they are arrays, string arrays may be altered at runtime by a program (unlike dictionary entries, which are hard-coded into the program&#8217;s dictionary). A string array is an array containing a series of character values, terminated by a zero value.</p>
</div>
<div class="paragraph">
<p>If the array apple_array holds the string array <code>apple</code>, the actual elements of apple_array look like:</p>
</div>
<div class="paragraph">
<p>apple_array[0] = 'a'</p>
</div>
<div class="paragraph">
<p>apple_array[1] = 'p'</p>
</div>
<div class="paragraph">
<p>apple_array[2] = 'p'</p>
</div>
<div class="paragraph">
<p>apple_array[3] = 'l'</p>
</div>
<div class="paragraph">
<p>apple_array[4] = 'e'</p>
</div>
<div class="paragraph">
<p>apple_array[5] = 0</p>
</div>
<div class="paragraph">
<p>Hugo provides a handy way to store a dictionary entry in an array as a series of characters using the string built-in function:</p>
</div>
<div class="paragraph">
<p>string(&lt;array address&gt;, &lt;dict. entry&gt;, &lt;max. length&gt;)</p>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="paragraph">
<p>string(a, word[1], 10)</p>
</div>
<div class="paragraph">
<p>will store up to 10 characters from word[1] into the array a.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is expected in the preceding example that a would have at least 11 elements, since string expects to store a terminating 0 after the string itself.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It&#8217;s not necessary to look at the return value from string, but it can be useful, since it lets us know how many characters were written to the string. For example,</p>
</div>
<div class="paragraph">
<p>x = string(a, "microscopic", 10)</p>
</div>
<div class="paragraph">
<p>will store up to 10 characters of <code>microscopic</code> in the array a, and return the length of the stored string to the variable x.<sup class="footnote">[<a id="_footnoteref_26" class="footnote" href="#_footnotedef_26" title="View footnote.">26</a>]</sup></p>
</div>
<div class="paragraph">
<p>The Hugo Library defines the functions StringCopy, StringEqual, StringLength, and StringPrint, which are extremely useful when dealing with string arrays.</p>
</div>
<div class="paragraph">
<p>StringCopy copies one string array to another array.</p>
</div>
<div class="paragraph">
<p>StringCopy(&lt;new array&gt;, &lt;old array&gt;[, &lt;length&gt;])</p>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="paragraph">
<p>StringCopy(a, b)</p>
</div>
<div class="paragraph">
<p>copies the contents of b to a, while</p>
</div>
<div class="paragraph">
<p>StringCopy(a, b, 5)</p>
</div>
<div class="paragraph">
<p>copies only up to 5 characters of b to a.</p>
</div>
<div class="paragraph">
<p>x = StringEqual(&lt;string1&gt;, &lt;string2&gt;)</p>
</div>
<div class="paragraph">
<p>x = StringCompare(&lt;string1&gt;, &lt;string2&gt;)</p>
</div>
<div class="paragraph">
<p>StringEqual returns true only if the two specified string arrays are identical. StringCompare returns 1 if &lt;string1&gt; is lexically greater than &lt;string2&gt;, -1 if &lt;string1&gt; is lexically less than &lt;string2&gt;, and 0 if the two strings are identical.</p>
</div>
<div class="paragraph">
<p>StringLength returns the length of a string array, as in:</p>
</div>
<div class="paragraph">
<p>len = StringLength(a)</p>
</div>
<div class="paragraph">
<p>and StringPrint prints a string array (or part of it).</p>
</div>
<div class="paragraph">
<p>StringPrint(&lt;array address&gt;[, &lt;start&gt;, &lt;end&gt;])</p>
</div>
<div class="paragraph">
<p>For example, if the array a contains ‚Äúpresto‚Äù,</p>
</div>
<div class="paragraph">
<p>StringPrint(a)</p>
</div>
<div class="paragraph">
<p>will print ‚Äúpresto‚Äù, but</p>
</div>
<div class="paragraph">
<p>StringPrint(a, 1, 4)</p>
</div>
<div class="paragraph">
<p>will print ‚Äúres‚Äù. (The &lt;start&gt; parameter in the first example defaults to 0, not 1&#8212;&#8203;remember that the first numbered element in an array is 0.)</p>
</div>
<div class="paragraph">
<p>An interesting side-effect of being able to pass array addresses as arguments is that it is possible to &#8220;cheat&#8221; the address, so that, for example,</p>
</div>
<div class="paragraph">
<p>StringCopy(a, b+2)</p>
</div>
<div class="paragraph">
<p>will copy b to a, beginning with the third letter of b (since the first letter of b is b[0]).</p>
</div>
<div class="paragraph">
<p>It should also be kept in mind that string arrays and dictionary entries are two entirely separate animals, and that comparing them directly is using StringCompare is not possible. That is, while a dictionary entry is a simple value representing an address, a string array is a series of values each representing a character in the string.</p>
</div>
<div class="paragraph">
<p>The library provides the following to overcome this:</p>
</div>
<div class="paragraph">
<p>StringDictCompare(&lt;array&gt;, &lt;dict. entry&gt;)</p>
</div>
<div class="paragraph">
<p>which returns the same values (1, -1, 0) as StringCompare, depending on whether the string array is lexically greater than, less than, or equal to the dictionary entry.</p>
</div>
<div class="paragraph">
<p>There is also a complement to string: the dict built-in function, that dynamically creates a new dictionary entry at runtime. Its syntax is:</p>
</div>
<div class="paragraph">
<p>x = dict(&lt;array&gt;, &lt;maxlen&gt;)</p>
</div>
<div class="paragraph">
<p>x = dict(parse$, &lt;maxlen&gt;)</p>
</div>
<div class="paragraph">
<p>where the contents of &lt;array&gt; or parse$ are written into the dictionary, to a maximum of &lt;maxlen&gt; characters, and the address of the new word is returned.</p>
</div>
<div class="paragraph">
<p>However, since this requires extending the actual length of the dictionary table in the game file, it is necessary to provide for this during compilation. Inserting</p>
</div>
<div class="paragraph">
<p>$MAXDICTEXTEND=&lt;number&gt;</p>
</div>
<div class="paragraph">
<p>at the start of the source file will write a buffer of &lt;number&gt; empty bytes at the end of the dictionary. (MAXDICTEXTEND is, by default, 0.)</p>
</div>
<div class="paragraph">
<p>Dynamic dictionary extension is used primarily in situations where the player may be able to, for example, name an object, then refer to that object by the new name, or whenever the game needs to introduce new words into the dictionary that are not known at compile-time. However, a guideline for programmers is that there should be a limit to how many new words the program or player can cause to be created, so that the total length of the new entries never exceeds &lt;number&gt;, keeping in mind that the length of an entry is the number of characters plus one (the byte representing the actual length). That is, the word <code>test</code> requires 5 bytes.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_conditional_expressions_and_program_flow"><a class="anchor" href="#_conditional_expressions_and_program_flow"></a>4.7. Conditional Expressions and Program Flow</h3>
<div class="paragraph">
<p>Program flow can be controlled using a variety of constructions, each of which is built around an expression that evaluates to false (zero) or non-false (non-zero).</p>
</div>
<div class="paragraph">
<p>The most basic of these is the if statement.</p>
</div>
<div class="paragraph">
<p>if &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;conditional code block&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>The enclosing braces are not necessary if the code block is a single line. Note also that the conditional block may begin (and even end) on the same line as the if statement provided that braces are used.</p>
</div>
<div class="paragraph">
<p>if &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;single line&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>if &lt;expression&gt; \{&#8230;&#8203;conditional code block&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>If braces are not used for a single line, the compiler automatically inserts them, although special care must be taken when constructing a block of code nesting several single-line conditionals. While</p>
</div>
<div class="paragraph">
<p>if &lt;expression1&gt;</p>
</div>
<div class="paragraph">
<p>if &lt;expression2&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>may be properly interpreted, other constructions (particularly those involving some of the more complex program-flow concepts we&#8217;re about to get into) may not be. Therefore, it&#8217;s always best to be as clear as possible about your intent, more along the lines of:</p>
</div>
<div class="paragraph">
<p>if &lt;expression1&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>if &lt;expression2&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>More elaborate uses of if involve the use of elseif and else.</p>
</div>
<div class="paragraph">
<p>if &lt;expression1&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;first conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>elseif &lt;expression2&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;second conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>elseif &lt;expression3&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;third conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>else</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;default code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>In this case, the engine evaluates each expression until it finds one that is true, and then executes it. Control then passes to the next non-if/elseif/else statement following the conditional construction. If no true expression is found, the default code block is executed. If, for example, &lt;expression1&gt; evaluates to a non-false value, then none of the following expressions are tested.</p>
</div>
<div class="paragraph">
<p>Of course, all three (if, elseif, and else) need not be used every time, and simple if-elseif and if-else combinations are perfectly valid.</p>
</div>
<div class="paragraph">
<p>In certain cases, the if statement may not lend itself perfectly to clarity, and the select-case construction may be more appropriate. The general form is:</p>
</div>
<div class="paragraph">
<p>select &lt;var&gt;</p>
</div>
<div class="paragraph">
<p>case &lt;value1&gt;[, &lt;value2&gt;, &#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;first conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>case &lt;value3&gt;[, &lt;value4&gt;, &#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;second conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>case else</p>
</div>
<div class="paragraph">
<div class="title">.default code block&#8230;&#8203;<sup class="footnote">[<a id="_footnoteref_27" class="footnote" href="#_footnotedef_27" title="View footnote.">27</a>]</sup></div>
<p>In this case, the evaluation is essentially</p>
</div>
<div class="paragraph">
<p>if &lt;var&gt; = &lt;value1&gt; [or &lt;var&gt; = &lt;value2&gt; &#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>There is no limit on the number of values (separated by commas) that can appear on a line following case<sup class="footnote">[<a id="_footnoteref_28" class="footnote" href="#_footnotedef_28" title="View footnote.">28</a>]</sup>. The same rules for bracing multiple-line code blocks apply as with if (as well as for every other type of conditional block).</p>
</div>
<div class="paragraph">
<p>Basic loops may be coded using while and do-while.</p>
</div>
<div class="paragraph">
<p>while &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>do</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>while &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>Each of these executes the conditional code block as long as &lt;expression&gt; holds true. It is assumed that the code block somehow alters &lt;expression&gt; so that at some point it will become false; otherwise the loop will execute endlessly.</p>
</div>
<div class="paragraph">
<p>while x &#8656; 10</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>x = x + 1</p>
</div>
<div class="paragraph">
<p>print "x is "; number x</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>do</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>x = x + 1</p>
</div>
<div class="paragraph">
<p>print "x is "; number x</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>while x &#8656; 10</p>
</div>
<div class="paragraph">
<p>The only difference between the two is that if &lt;expression&gt; is false at the outset, the while code block will never run. The do-while code block will run at least once even if &lt;expression&gt; is false at the outset.</p>
</div>
<div class="paragraph">
<p>It is also important to recognize&#8212;&#8203;with while or do-while loops&#8212;&#8203;that the expression is tested each time the loop executes. The most important side effect of this is that if you&#8217;re doing something in the expression that has some effect&#8212;&#8203;whether printing something, calling a function, or modifying some other value&#8212;&#8203;this will happen <em>every time</em> the expression is evaluated.</p>
</div>
<div class="paragraph">
<p>The most complex loop construction uses the for statement:</p>
</div>
<div class="paragraph">
<p>for (&lt;assignment&gt;; &lt;expression&gt;; &lt;modifier&gt;)</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>for (i=1; i&#8656;15; i=i+1)</p>
</div>
<div class="paragraph">
<p>print "i is equal to: "; number i</p>
</div>
<div class="paragraph">
<p>First, the engine executes the assignment setting <code>i = 1</code>. Next, it checks to see if the expression holds true (if i is less than or equal to 15). If it does, it executes the print statement and the modifying assignment that increments i. It continues the loop until the expression tests false.</p>
</div>
<div class="paragraph">
<p>Not all elements of the for construction are necessary. For example, the assignment may be omitted, as in</p>
</div>
<div class="paragraph">
<p>for (; i&#8656;15; i=i+1)</p>
</div>
<div class="paragraph">
<p>and the engine will simply use the existing value of i, whatever it was before this point. With</p>
</div>
<div class="paragraph">
<p>for (i=1;;i=i+1)</p>
</div>
<div class="paragraph">
<p>the loop will execute endlessly, unless some other means of exit is provided.</p>
</div>
<div class="paragraph">
<p>The modifying expression does not have to be an arithmetic expression as shown above. It may be a routine that modifies a global variable, for example, which is then tested by the for loop.</p>
</div>
<div class="paragraph">
<p>A second form of a for loop is:</p>
</div>
<div class="paragraph">
<p>for &lt;var&gt; in &lt;object&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;conditional code block&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>which loops through all the children of &lt;object&gt; (if any), setting the variable &lt;var&gt; to the object number of each child in sequence, so that</p>
</div>
<div class="paragraph">
<p>for i in mysuitcase</p>
</div>
<div class="paragraph">
<p>print i.name</p>
</div>
<div class="paragraph">
<p>will print the names of each object in the mysuitcase object.</p>
</div>
<div class="paragraph">
<p>Hugo also supports jump commands and labels. A label is simply a user-specified token preceded by a colon (<code>:</code>) at the beginning of a line. The label name must be a unique token in the program.<sup class="footnote">[<a id="_footnoteref_29" class="footnote" href="#_footnotedef_29" title="View footnote.">29</a>]</sup></p>
</div>
<div class="paragraph">
<p>print "We&#8217;re about to make a jump."</p>
</div>
<div class="paragraph">
<p>jump NextLine</p>
</div>
<div class="paragraph">
<p>print "This will never get printed."</p>
</div>
<div class="paragraph">
<p>:NextLine</p>
</div>
<div class="paragraph">
<p>print "But this will."</p>
</div>
<div class="paragraph">
<p>One final concept is important in program flow, and that is break. At any point during a loop, it may be necessary to exit immediately (and probably prematurely). The break statement passes control to the statement immediately following the current loop. In the example:</p>
</div>
<div class="paragraph">
<p>do</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>while &lt;expression2&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>if &lt;expression3&gt;</p>
</div>
<div class="paragraph">
<p>break</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>while &lt;expression1&gt;</p>
</div>
<div class="paragraph">
<p>the break causes the immediately running while &lt;expression2&gt; loop to terminate, even if &lt;expression2&gt; is true. However, the external do-while &lt;expression1&gt; loop continues to run.</p>
</div>
<div class="paragraph">
<p>It has been previously stated that lines ending in and or or are continued onto the next line in the case of long conditional expressions. A second useful provision is the ability to use a comma to separate options within a conditional expression. As a result,</p>
</div>
<div class="paragraph">
<p>if word[1] = "one", "two", "three"</p>
</div>
<div class="paragraph">
<p>while object is open, not locked</p>
</div>
<div class="paragraph">
<p>if box not in livingroom, garage</p>
</div>
<div class="paragraph">
<p>if a ~= 1, 2, 3</p>
</div>
<div class="paragraph">
<p>are interpreted as:</p>
</div>
<div class="paragraph">
<p>if word[1]="one" or word[1]="two" or word[1]="three"</p>
</div>
<div class="paragraph">
<p>while object is open and object is not locked</p>
</div>
<div class="paragraph">
<p>if box not in livingroom and box not in garage</p>
</div>
<div class="paragraph">
<p>if a ~= 1 and a ~= 1 and a ~= 3</p>
</div>
<div class="paragraph">
<p>respectively.</p>
</div>
<div class="paragraph">
<p>Note that with an <code>=</code> or in comparison, a comma results in an or comparison. With <code>~=</code> or an attribute comparison, the result is an and comparison. The compiler looks after this translation for you.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_4"><a class="anchor" href="#_what_should_i_be_able_to_do_now_4"></a>4.8. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>+
[<mark><em>RefHeading</em>_Toc86221383 .anchor]</mark>#Example: Mixing Text Styles</p>
</div>
<div class="paragraph">
<p>! Sample to print various typefaces/colors:</p>
</div>
<div class="paragraph">
<p>#include "hugolib.h"</p>
</div>
<div class="paragraph">
<p>routine main</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "Text may be printed in \Bboldface\b,</p>
</div>
<div class="paragraph">
<p>\Iitalics\i, \Uunderlined\u, or</p>
</div>
<div class="paragraph">
<p>\Pproportional\p typefaces."</p>
</div>
<div class="paragraph">
<p>color RED ! or color 4</p>
</div>
<div class="paragraph">
<p>print "\nGet ready. ";</p>
</div>
<div class="paragraph">
<p>color YELLOW ! color 14</p>
</div>
<div class="paragraph">
<p>print "Get set. ";</p>
</div>
<div class="paragraph">
<p>color GREEN ! color 2</p>
</div>
<div class="paragraph">
<p>print "Go!"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The output will be:</p>
</div>
<div class="paragraph">
<p>Text may be printed in <strong>boldface</strong>, <em>italics</em>, <span class="underline">underlined</span>, or proportional typefaces.</p>
</div>
<div class="paragraph">
<p>Get ready. Get set. Go!</p>
</div>
<div class="paragraph">
<p>with &#8220;boldface&#8221;, &#8220;italics&#8221;, &#8220;underlined&#8221;, and &#8220;proportional&#8221; printed in their respective typefaces. &#8220;Get ready&#8221;, &#8220;Get set&#8221;, and &#8220;Go!&#8221; will all appear on the same line in three different colors.</p>
</div>
<div class="paragraph">
<p>Note that not all computers will be able to print all typefaces. The basic Unix and MS-DOS ports, for example, use color changes instead of actual typeface changes, and do not support proportional printing.</p>
</div>
<div class="paragraph">
<p>[<mark><em>RefHeading</em>_Toc86221384 .anchor]</mark>#Example: Managing Strings</p>
</div>
<div class="paragraph">
<p>#include "hugolib.h"</p>
</div>
<div class="paragraph">
<p>routine main</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>StringTests</p>
</div>
<div class="paragraph">
<p>return</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>array s1[32]</p>
</div>
<div class="paragraph">
<p>array s2[10]</p>
</div>
<div class="paragraph">
<p>array s3[10]</p>
</div>
<div class="paragraph">
<p>routine StringTests</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>local a, len</p>
</div>
<div class="paragraph">
<p>a = "This is a sample string."</p>
</div>
<div class="paragraph">
<p>len = string(s1, a, 31)</p>
</div>
<div class="paragraph">
<p>string(s2, "Apple", 9)</p>
</div>
<div class="paragraph">
<p>string(s3, "Tomato", 9)</p>
</div>
<div class="paragraph">
<p>print "a = \""; a; "\""</p>
</div>
<div class="paragraph">
<p>print "(Dictionary address: "; number a; ")"</p>
</div>
<div class="paragraph">
<p>print "s1 contains \""; StringPrint(s1); "\""</p>
</div>
<div class="paragraph">
<p>print "(Array address: "; number s1;</p>
</div>
<div class="paragraph">
<p>print ", length = "; number len; ")"</p>
</div>
<div class="paragraph">
<p>print "s2 is \""; StringPrint(s2);</p>
</div>
<div class="paragraph">
<p>print "\", s3 is \""; StringPrint(s3); "\""</p>
</div>
<div class="paragraph">
<p>"\nStringCompare(s1, s2) = ";</p>
</div>
<div class="paragraph">
<p>print number StringCompare(s1, s2)</p>
</div>
<div class="paragraph">
<p>"StringCompare(s1, s3) = ";</p>
</div>
<div class="paragraph">
<p>print number StringCompare(s1, s3)</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The output will be:</p>
</div>
<div class="paragraph">
<p>a = "This is a sample string."</p>
</div>
<div class="paragraph">
<p>(Dictionary address = 887)</p>
</div>
<div class="paragraph">
<p>s1 contains "This is a sample string."</p>
</div>
<div class="paragraph">
<p>(Array address = 1625, length = 24)</p>
</div>
<div class="paragraph">
<p>s2 is "Apple", s3 is "Tomato"</p>
</div>
<div class="paragraph">
<p>StringCompare(s1, s2) = 1</p>
</div>
<div class="paragraph">
<p>StringCompare(s1, s3) = -1</p>
</div>
<div class="paragraph">
<p>As is evident above, a dictionary entry does not need to be a single word; any piece of text which is referred to by the program as a value gets entered into the dictionary table.</p>
</div>
<div class="paragraph">
<p>The argument 31 in the first call to the string function allows up to 31 characters from a to be copied to s1, but since the length of a is only 24 characters, only 25 values (including the terminating 0) get copied, and the string length of s1 is returned in len.</p>
</div>
<div class="paragraph">
<p>Since &#8220;A(pple)&#8221; is lexically less than &#8220;T(his&#8230;&#8203;)&#8221;, comparing the two returns -1. As &#8220;To(mato)&#8221; is lexically greater than &#8220;Th(is&#8230;&#8203;)&#8221;, StringCompare returns 1.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_routines_and_events"><a class="anchor" href="#_routines_and_events"></a>5. ROUTINES AND EVENTS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_routines"><a class="anchor" href="#_routines"></a>5.1. Routines</h3>
<div class="paragraph">
<p>Routines are blocks of code that may be called at any point in a program. A routine may or may not return a value, and it may or may not require a list of <em>parameters</em> or <em>arguments</em>. (Some different uses of routines have already been encountered in previous examples, but here is the formal explication.) Routines are also sometimes referred to <em>subroutines</em> or <em>functions</em>, the latter particularly when they&#8217;re returning a value, i.e., performing some function and reporting the result.</p>
</div>
<div class="paragraph">
<p>A routine is defined as:</p>
</div>
<div class="paragraph">
<p>routine &lt;routinename&gt; [(&lt;arg1&gt;, &lt;arg2&gt;, &#8230;&#8203;)]</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>once again ensuring that the opening brace (<code>{</code>) comes on a new line following the routine specifier.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To substitute a new routine for an existing one with the same name (such as in a library file), define the new one using replace instead of routine.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>replace &lt;routinename&gt; [(&lt;arg1&gt;, &lt;arg2&gt;, &#8230;&#8203;)]</p>
</div>
<div class="paragraph">
<p>An example of a simple routine definition is:</p>
</div>
<div class="paragraph">
<p>routine TestRoutine(obj)</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "The "; obj.name; " has a size of ";</p>
</div>
<div class="paragraph">
<p>print obj.size; "."</p>
</div>
<div class="paragraph">
<p>return obj.size</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Where TestRoutine takes a single value as an argument, assigns it to a local variable obj, executes a simple printing sequence, and returns the property value: obj.size.</p>
</div>
<div class="paragraph">
<p>The return keyword exits the current routine, and returns a value if specified. Both</p>
</div>
<div class="paragraph">
<p>return</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>return &lt;expression&gt;</p>
</div>
<div class="paragraph">
<p>are valid. If no expression is given, the routine returns 0. If no return statement at all is encountered, the routine continues until the closing brace (<code>}</code>), then returns 0.<sup class="footnote">[<a id="_footnoteref_30" class="footnote" href="#_footnotedef_30" title="View footnote.">30</a>]</sup></p>
</div>
<div class="paragraph">
<p>Once defined, TestRoutine can be called several ways:</p>
</div>
<div class="paragraph">
<p>TestRoutine(mysuitcase)</p>
</div>
<div class="paragraph">
<p>will (assuming the mysuitcase object as been defined as previously illustrated) print</p>
</div>
<div class="paragraph">
<p>"The big green suitcase has a size of 25."</p>
</div>
<div class="paragraph">
<p>The return value will be ignored. On the other hand,</p>
</div>
<div class="paragraph">
<p>x = TestRoutine(mysuitcase)</p>
</div>
<div class="paragraph">
<p>will print the same output, but will assign the return value of TestRoutine to the variable x.</p>
</div>
<div class="paragraph">
<p>Now, unlike C and similar languages, Hugo does not require that routines follow a strict prototype. Therefore, both</p>
</div>
<div class="paragraph">
<p>TestRoutine</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>TestRoutine(mysuitcase, 5)</p>
</div>
<div class="paragraph">
<p>are valid calls for the above routine. In the first case, the argument obj defaults to 0, since no value is passed. (The parentheses are not necessary if no arguments are passed.) In the second case, the value 5 is passed to TestRoutine, but ignored.</p>
</div>
<div class="paragraph">
<p>Arguments are always passed by value, not by reference or address. A local variable in one routine can never be altered by another routine. What this means is that, for example, in the following routines:</p>
</div>
<div class="paragraph">
<p>routine TestRoutine</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>local a</p>
</div>
<div class="paragraph">
<p>a = 5</p>
</div>
<div class="paragraph">
<p>Double(a)</p>
</div>
<div class="paragraph">
<p>print number a</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>routine Double(a)</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>a = a * 2</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>calling TestRoutine would print &#8220;5&#8221; and not &#8220;10&#8221; because the local variable a in Double is only a copy of the variable passed to it as an argument.</p>
</div>
<div class="paragraph">
<p>These two routines would, on the other hand, print &#8220;10&#8221;:</p>
</div>
<div class="paragraph">
<p>routine TestRoutine</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>local a</p>
</div>
<div class="paragraph">
<p>a = 5</p>
</div>
<div class="paragraph">
<p>a = Double(a)</p>
</div>
<div class="paragraph">
<p>print number a</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>routine Double(a)</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>return a * 2</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The local a in TestRoutine is reassigned with the return value from the Double routine.</p>
</div>
<div class="paragraph">
<p>An interesting side-effect of a zero (0) return value can be seen using the print command<sup class="footnote">[<a id="_footnoteref_31" class="footnote" href="#_footnotedef_31" title="View footnote.">31</a>]</sup>. Consider the The routine in <strong>hugolib.h</strong>, which prints an object&#8217;s definite article (i.e., &#8220;the&#8221;, if appropriate), followed by the object&#8217;s name property.</p>
</div>
<div class="paragraph">
<p>print "You open "; The(object); "."</p>
</div>
<div class="paragraph">
<p>might result in</p>
</div>
<div class="paragraph">
<p>You open the suitcase.</p>
</div>
<div class="paragraph">
<p>Note that the above print command itself really only prints</p>
</div>
<div class="paragraph">
<p>"You open "</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>"."</p>
</div>
<div class="paragraph">
<p>It is the The routine that prints</p>
</div>
<div class="paragraph">
<p>the suitcase</p>
</div>
<div class="paragraph">
<p>Since The returns 0 (the empty string, or <code>""</code>), the print command is actually displaying</p>
</div>
<div class="paragraph">
<p>"You open ", "", and "."</p>
</div>
<div class="paragraph">
<p>where the empty string (<code>""</code>) is preceded on the output line by The&#8217;s printing of "`the `" (notice the trailing space) and the object name.</p>
</div>
</div>
<div class="sect2">
<h3 id="_property_routines"><a class="anchor" href="#_property_routines"></a>5.2. Property Routines</h3>
<div class="paragraph">
<p>Property routines are slightly more complex than the simple routines described so far, but follow the same basic rules. Normally, a property routine runs when the program attempts to get the value of a property that contains a routine.</p>
</div>
<div class="paragraph">
<p>That is, instead of having the property value:</p>
</div>
<div class="paragraph">
<p>size 10</p>
</div>
<div class="paragraph">
<p>an object may contain the property:</p>
</div>
<div class="paragraph">
<p>size</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>return some_value + 5</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Trying to read object.size in either case will return an integer value, although in the second case it is calculated by a routine.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While normal routines return false (or 0) by default, property routines return true (or 1) by default.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here&#8217;s another example. Normally, if &lt;object&gt; is the current room object, then &lt;object&gt;.n_to would contain the object number of the room to the north (if there is one). The library checks &lt;object&gt;.n_to to see if a value exists for it; if none does, the move is invalid.</p>
</div>
<div class="paragraph">
<p>Consider this:</p>
</div>
<div class="paragraph">
<p>n_to office</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>n_to</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"The office door is locked."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>n_to</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"The office door is locked. ";</p>
</div>
<div class="paragraph">
<p>return false</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>In the first case, an attempt on the part of the player to move north would result in parent(player) being changed to the office object. In the second case, a custom invalid-move message would be displayed. In the third case, the custom invalid-move message would be displayed, but then the library would continue as if it had not found a n_to property for &lt;object&gt;, and it would print the standard invalid-move message (without a newline, thanks to the semicolon):</p>
</div>
<div class="paragraph">
<p>"The office door is locked. You can&#8217;t go that way."</p>
</div>
<div class="paragraph">
<p>(For those wondering why the true (i.e., equal to 1) return value in the second case doesn&#8217;t prompt a move to object number 1, the library DoGo routine assumes that there will never be a room object numbered one, since there are all manner of system objects that get defined first.)</p>
</div>
<div class="paragraph">
<p>Property routines may be run directly using the run command:</p>
</div>
<div class="paragraph">
<p>run &lt;object&gt;.&lt;property&gt;</p>
</div>
<div class="paragraph">
<p>If &lt;object&gt; does not have &lt;property&gt;, or if &lt;object&gt;.&lt;property&gt; is not a routine, nothing happens. Otherwise, the property routine executes. Property routines do not take arguments.</p>
</div>
<div class="paragraph">
<p>Remember that at any point in a program, an existing property may be changed using</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.&lt;property&gt; = &lt;value&gt;</p>
</div>
<div class="paragraph">
<p>A property routine may be changed using</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;.&lt;property&gt; =</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;the new code for this property routine&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>where the new routine must be enclosed in braces.</p>
</div>
<div class="paragraph">
<p>It is entirely possible to change what was once a property routine into a simple value, or vice-versa, providing that space for the routine (and the required number of elements) was allowed for in the original object definition. Even if a property routine is to be assigned later in the program, the property itself must still be defined at the outset in the original object definition. A simple</p>
</div>
<div class="paragraph">
<p>&lt;property&gt; 0</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>&lt;property&gt; \{return false}</p>
</div>
<div class="paragraph">
<p>will suffice.</p>
</div>
<div class="paragraph">
<p>There is, however, one drawback to this reassignment of property values to routines and vice-versa. A property routine is given a &#8220;length&#8221; of one value, which is the property address. When assigning a value or set of values to a property routine, the engine behaves as if the property was originally defined for this object with only one word of data, since it has no way of knowing the original length of the property data.</p>
</div>
<div class="paragraph">
<p>For example, if the original property specification in the object definition was:</p>
</div>
<div class="paragraph">
<p>found_in bedroom, livingroom, garage</p>
</div>
<div class="paragraph">
<p>and at some point the following was executed:</p>
</div>
<div class="paragraph">
<p>found_in = \{ return basement }</p>
</div>
<div class="paragraph">
<p>then the following would not subsequently work:</p>
</div>
<div class="paragraph">
<p>found_in #3 = attic</p>
</div>
<div class="paragraph">
<p>because the engine now believes &lt;object&gt;.found_in to have only one element&#8212;&#8203;a routine address&#8212;&#8203;attached to it.</p>
</div>
<div class="paragraph">
<p>Finally, keep in mind that whenever calling a property routine, the global variable self is normally set to the object number. To avoid this, such as when &#8220;borrowing&#8221; a property from another object from within a different object, reference the property via</p>
</div>
<div class="paragraph">
<p>&lt;object&gt;..&lt;property&gt;</p>
</div>
<div class="paragraph">
<p>using <code>..</code> instead of the normal property operator.</p>
</div>
</div>
<div class="sect2">
<h3 id="_before_and_after_routines"><a class="anchor" href="#_before_and_after_routines"></a>5.3. Before And After Routines</h3>
<div class="paragraph">
<p>The Hugo Compiler predefines two special properties: before and after. They are unique in that not only are they always routines, but they are much more complex (and versatile) than a standard property routine.</p>
</div>
<div class="paragraph">
<p><em>Complex</em> properties like before and after are defined with</p>
</div>
<div class="paragraph">
<p>property &lt;property name&gt; $complex</p>
</div>
<div class="paragraph">
<p>as in:</p>
</div>
<div class="paragraph">
<p>property before $complex</p>
</div>
<div class="paragraph">
<p>property after $complex</p>
</div>
<div class="paragraph">
<p>Here is the syntax for the before property:</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&lt;usage1&gt; &lt;verbroutine1&gt;[, &lt;verbroutine2&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>&lt;usage2&gt; &lt;verbroutine3&gt;[, &lt;verbroutine4&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>(The after property is the same, substituting after for before.)</p>
</div>
<div class="paragraph">
<p>The &lt;usage&gt; specifier is a value against which the specified object is matched. Most commonly, it is <code>object</code>, <code>xobject</code>, <code>location</code>, <code>actor</code>, <code>parent(object)</code>, etc. The &lt;verbroutine&gt; is the name of a verb routine to which the usage in question applies.</p>
</div>
<div class="paragraph">
<p>When the Hugo Engine goes to execute a player command, it runs a series of tests on the various elements of the command, such as the object on which the specified verb is to be enacted<sup class="footnote">[<a id="_footnoteref_32" class="footnote" href="#_footnotedef_32" title="View footnote.">32</a>]</sup>. Know for now that when a player command is executed, the before properties of the object (i.e., the direct object) and xobject (i.e., the indirect object)<sup class="footnote">[<a id="_footnoteref_33" class="footnote" href="#_footnotedef_33" title="View footnote.">33</a>]</sup> are checked, then if neither has returned non-false, the appropriate verbroutine is run. Afterward, the after properties are checked; if neither returns non-false, a default message is normally printed by the verbroutine. In other words, before routines typically pre-empt the execution of a verbroutine, and after routines typically pre-empt the default response of a verbroutine.</p>
</div>
<div class="paragraph">
<p>When the &lt;object&gt;.before property is checked, with the global verbroutine set to one of the specified verbroutines in the before property, and &lt;usage&gt; in that instance is <code>object</code>, then the following block of code is executed. If no match is found, &lt;object&gt;.before returns false.</p>
</div>
<div class="paragraph">
<p>Here is an example applied to the mysuitcase object created previously:</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoEat</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"You can&#8217;t eat the suitcase!"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>after</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoGet</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"With a vigorous effort, you pick up</p>
</div>
<div class="paragraph">
<p>the suitcase."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>xobject DoPutIn</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"You put ";</p>
</div>
<div class="paragraph">
<p>The(object)</p>
</div>
<div class="paragraph">
<p>" into the suitcase."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>When the player tries the command &#8220;eat suitcase&#8221;, the response printed will be:</p>
</div>
<div class="paragraph">
<p>You can&#8217;t eat the suitcase!</p>
</div>
<div class="paragraph">
<p>and the normal verbroutine for <code>eat</code>, the library&#8217;s DoEat verbroutine, will not be run. When the player tries to &#8220;get the suitcase&#8221;, the library&#8217;s DoGet verbroutine will be run (since no before property interrupts it), but instead of the default library response (which is a simple &#8220;Taken.&#8221;), the game will print:</p>
</div>
<div class="paragraph">
<p>With a vigorous effort, you pick up the suitcase.</p>
</div>
<div class="paragraph">
<p>Finally, when the player tries to put something into the suitcase using, say, &#8220;put the book in the suitcase&#8221;, the normal DoPutIn routine will be run, but the custom response of the suitcase will be printed instead:</p>
</div>
<div class="paragraph">
<p>You put the book into the suitcase.</p>
</div>
<div class="paragraph">
<p>Each of these examples will return true (as property routines do by default), thereby overriding the engine&#8217;s default operation<sup class="footnote">[<a id="_footnoteref_34" class="footnote" href="#_footnotedef_34" title="View footnote.">34</a>]</sup>. In order to fool the engine into continuing normally, as if no before or after property has been found, return false from the property routine.</p>
</div>
<div class="paragraph">
<p>after</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoGet</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"Fine. ";</p>
</div>
<div class="paragraph">
<p>return false</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>will result in:</p>
</div>
<div class="paragraph">
<p>&gt;GET SUITCASE</p>
</div>
<div class="paragraph">
<p>Fine. Taken.</p>
</div>
<div class="paragraph">
<p>Since the after routine returns false, and the library&#8217;s default response for a successful call to DoGet is &#8220;Taken.&#8221;</p>
</div>
<div class="paragraph">
<p>It is important to remember that, unlike other property routines, before and after routines are also <em>additive</em>; i.e., a before (or after) routine defined in an inherited class or object is not overwritten by a new property routine in the new object. Instead, the definition for the routine is&#8212;&#8203;in essence&#8212;&#8203;added onto. An additive property is defined using the $additive qualifier, as in:</p>
</div>
<div class="paragraph">
<p>property &lt;property name&gt; $additive &lt;default value&gt;</p>
</div>
<div class="paragraph">
<p>All previously inherited before/after subroutines are carried over. However, the processing of a before/after property begins with the present object, progressing backward through the object&#8217;s ancestry until a usage/verbroutine match is found; once a match is made, no further preceding class inheritances are processed (unless the property routine in question returns false).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To force a before or after property routine to apply to <em>any</em> verbroutine, do not explicitly specify a verbroutine.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>xobject</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;property routine&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The specified routine will be run whenever the object in question is the xobject of any valid input.</p>
</div>
<div class="paragraph">
<p>If a non-specific block occurs before any block(s) specifying verbroutines, then the following blocks, if matched, will run as well so long as the block does not return true. If the non-specific block comes after any other blocks, then it will run only if no other object/verbroutine combination is matched.</p>
</div>
<div class="paragraph">
<p>A drawback of this non-specification is that all verbroutines are matched&#8212;&#8203;both verbs and xverbs<sup class="footnote">[<a id="_footnoteref_35" class="footnote" href="#_footnotedef_35" title="View footnote.">35</a>]</sup>. This can be particularly undesirable in the case of location before/after properties, where you may wish to be circumventing any action the player tries to perform in that location, but where the non-specific response will be triggered even for save, restore, etc. (i.e.,</p>
</div>
<div class="paragraph">
<p>To get around this, the library provides a function AnyVerb, which takes an object as its argument and returns that object number if the current verbroutine is not within the group of xverbs; otherwise it returns false. Therefore, it can be used via:</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>AnyVerb(location)</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>instead of</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>location</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The former will execute the conditional block of code whenever the location global matches the current object and the current verbroutine is not an xverb. The latter (without using AnyVerb), will run for verbs and xverbs. (The reason for this, simply put, is that the location global always equals the location global (of course!). But AnyVerb(location) will only equal the location global if the verbroutine is not an xverb.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_init_and_main"><a class="anchor" href="#_init_and_main"></a>5.4. Init And Main</h3>
<div class="paragraph">
<p>At least two routines are typically part of every Hugo problem: Init and Main. Init is optional but almost always implemented. If it exists, is called once at the start of the program (as well as during a restart command). The routine should configure all variables, objects, and arrays needed to set up the game state and begin the game. Here&#8217;s the Init routine from <strong>shell.hug</strong>:</p>
</div>
<div class="paragraph">
<p>routine init</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p><em>Start the counter at one turn before 0 turns, since Main will increment it to begin the game:</em></p>
</div>
<div class="paragraph">
<p>counter = -1</p>
</div>
<div class="paragraph">
<p><em>Set up the kind of statusline we&#8217;re going to be displaying, as well as define the default text colors</em><sup class="footnote">[<a id="_footnoteref_36" class="footnote" href="#_footnotedef_36" title="View footnote.">36</a>]</sup><em>:</em></p>
</div>
<div class="paragraph">
<p>STATUSTYPE = 1 ! score/turns</p>
</div>
<div class="paragraph">
<p>TEXTCOLOR = DEF_FOREGROUND</p>
</div>
<div class="paragraph">
<p>BGCOLOR = DEF_BACKGROUND</p>
</div>
<div class="paragraph">
<p>SL_TEXTCOLOR = DEF_SL_FOREGROUND</p>
</div>
<div class="paragraph">
<p>SL_BGCOLOR = DEF_SL_BACKGROUND</p>
</div>
<div class="paragraph">
<p><em>Set the player prompt to the default <code>&gt;</code>, and set the starting foreground and background colors:</em></p>
</div>
<div class="paragraph">
<p>prompt = "&gt;"</p>
</div>
<div class="paragraph">
<p>color TEXTCOLOR, BGCOLOR</p>
</div>
<div class="paragraph">
<p><em>Clear the screen before starting the game, set the font to the default font, and print the game title (&#8220;SHELL&#8221;, in this case) and a subtitle, followed by the BANNER constant:</em></p>
</div>
<div class="paragraph">
<p>cls</p>
</div>
<div class="paragraph">
<p>Font(BOLD_ON | DEFAULT_FONT)</p>
</div>
<div class="paragraph">
<p>"SHELL"</p>
</div>
<div class="paragraph">
<p>Font(BOLD_OFF)</p>
</div>
<div class="paragraph">
<p>"An Interactive Starting Point\n"</p>
</div>
<div class="paragraph">
<p>print BANNER</p>
</div>
<div class="paragraph">
<p><em>Set the player to the <code>you</code> object (from</em> <strong>objlib.h</strong><em>), and set up the starting location:</em></p>
</div>
<div class="paragraph">
<p>player = you ! player initialization</p>
</div>
<div class="paragraph">
<p>location = emptyroom</p>
</div>
<div class="paragraph">
<p>old_location = location</p>
</div>
<div class="paragraph">
<p><em>Move the player to the starting location, run the library rules to see if there&#8217;s light in the location, then describe the starting location and flag it as visited. Also, determine the starting bulk of whatever the player is carrying at the outset (if anything):</em></p>
</div>
<div class="paragraph">
<p>move player to location</p>
</div>
<div class="paragraph">
<p>FindLight(location)</p>
</div>
<div class="paragraph">
<p>DescribePlace(location)</p>
</div>
<div class="paragraph">
<p>location is visited</p>
</div>
<div class="paragraph">
<p>CalculateHolding(player)</p>
</div>
<div class="paragraph">
<p><em>Finally, if we&#8217;ve defined USE_PLURAL_OBJECTS</em><sup class="footnote">[<a id="_footnoteref_37" class="footnote" href="#_footnotedef_37" title="View footnote.">37</a>]</sup><em>, call the appropriate initialization routine:</em></p>
</div>
<div class="paragraph">
<p>#ifset USE_PLURAL_OBJECTS</p>
</div>
<div class="paragraph">
<p>InitPluralObjects</p>
</div>
<div class="paragraph">
<p>#endif</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Main is called every turn. It should take care of general game management such as moving ahead the counter, as well as running events and scripts<sup class="footnote">[<a id="_footnoteref_38" class="footnote" href="#_footnotedef_38" title="View footnote.">38</a>]</sup>. The Main routine from <strong>shell.hug</strong> is as follows:</p>
</div>
<div class="paragraph">
<p>routine main</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p><em>The counter global gets incremented each turn, and the statusline gets updated:</em></p>
</div>
<div class="paragraph">
<p>counter = counter + 1</p>
</div>
<div class="paragraph">
<p>PrintStatusLine</p>
</div>
<div class="paragraph">
<p><em>The each_turn property of the current location object gets run. The runevents statement runs all valid events. The RunScripts library routine runs any active scripts:</em></p>
</div>
<div class="paragraph">
<p>run location.each_turn</p>
</div>
<div class="paragraph">
<p>runevents</p>
</div>
<div class="paragraph">
<p>RunScripts</p>
</div>
<div class="paragraph">
<p><em>Finally, we check to see if the player is currently engaged in conversation with a character (if the speaking global is set) and, if so, if the character in question has left the current location:</em></p>
</div>
<div class="paragraph">
<p>if parent(speaking)~=location</p>
</div>
<div class="paragraph">
<p>speaking = 0</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
</div>
<div class="sect2">
<h3 id="_events"><a class="anchor" href="#_events"></a>5.5. Events</h3>
<div class="paragraph">
<p>Events are useful for bringing a game to life, so that little quirks, behaviors, and occurrences can be provided for with little difficulty or complexity. Events are also routines, but their special characteristic is that they may be attached to a particular object, and they are run as a group by the runevents command. Events are defined as:</p>
</div>
<div class="paragraph">
<p>event</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;Event routine&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>for global events, and</p>
</div>
<div class="paragraph">
<p>event [in] &lt;object&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;Event routine&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>for events attached to a particular object. (The in is optional, but is recommended for legibility.) If an event is attached to an object, it is run only when that object has the same grandparent as the player object, where &#8220;grandparent&#8221; refers to the last object before 0 (the nothing object as defined in <strong>hugolib.h</strong>), or can otherwise be determined to be in the player&#8217;s current location<sup class="footnote">[<a id="_footnoteref_39" class="footnote" href="#_footnotedef_39" title="View footnote.">39</a>]</sup>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the event is not a global event, the self global is set to the number of the object to which the event is attached.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_5"><a class="anchor" href="#_what_should_i_be_able_to_do_now_5"></a>5.6. What Should I Be Able To Do Now?</h3>
<div class="sect3">
<h4 id="_example_borrowing_property_routines"><a class="anchor" href="#_example_borrowing_property_routines"></a>Example: &#8220;Borrowing&#8221; Property Routines</h4>
<div class="paragraph">
<p>Consider a situation where a class provides a particular property routine. Normally, that routine is inherited by all objects defined using that class. But there may arise a situation where one of those objects must have a variation or expansion on the original routine.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">class food

\{

bites_left 5

eating

\{

self.bites_left = self.bites_left - 1

if self.bites_left = 0

remove self ! all gone

}

}

food health_food

\{

eating

\{

actor.health = actor.health + 1

run food..eating

}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Assuming that bites_left, eating, and health are defined as properties, with eating being called whenever a food object is eaten.)</p>
</div>
<div class="paragraph">
<p>In this case, it would be inconvenient to have to retype the entire food.eating routine for the health_food object just because the latter must also increase actor.health. Using <code>..</code> calls food.eating with self set to health_food, not the food class, so that food.eating affects health_food. This also allows changes to be made to any property, attribute, or property routine in a class, and that change will be reflected in all objects built from that class.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_building_a_more_complex_object"><a class="anchor" href="#_example_building_a_more_complex_object"></a>Example: Building a (More) Complex Object</h4>
<div class="paragraph">
<p>At this point, enough material has been covered to develop a comprehensive example of a functional object that will serve as a summary of concepts introduced so far, as well as providing instances of a number of common properties from <strong>hugolib.h</strong>.</p>
</div>
<div class="paragraph">
<p>object woodcabinet "wooden cabinet"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>in emptyroom</p>
</div>
<div class="paragraph">
<p>article "a"</p>
</div>
<div class="paragraph">
<p>nouns "cabinet", "shelf", "shelves", \</p>
</div>
<div class="paragraph">
<p>"furniture", "doors", "door"</p>
</div>
<div class="paragraph">
<p>adjectives "wooden", "wood", "fine", "mahogany"</p>
</div>
<div class="paragraph">
<p>short_desc</p>
</div>
<div class="paragraph">
<p>"A wooden cabinet sits along one wall."</p>
</div>
<div class="paragraph">
<p>when_open</p>
</div>
<div class="paragraph">
<p>"An open wooden cabinet sits along</p>
</div>
<div class="paragraph">
<p>one wall."</p>
</div>
<div class="paragraph">
<p>long_desc</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"The cabinet is made of fine mahogany wood,</p>
</div>
<div class="paragraph">
<p>hand-crafted by a master cabinetmaker. In</p>
</div>
<div class="paragraph">
<p>front are two doors (presently ";</p>
</div>
<div class="paragraph">
<p>if self is open</p>
</div>
<div class="paragraph">
<p>print "open";</p>
</div>
<div class="paragraph">
<p>else: print "closed";</p>
</div>
<div class="paragraph">
<p>print ")."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>contains_desc</p>
</div>
<div class="paragraph">
<p>"Behind the open doors of the cabinet you</p>
</div>
<div class="paragraph">
<p>can see"; ! note semicolon--</p>
</div>
<div class="paragraph">
<p>! no line feed</p>
</div>
<div class="paragraph">
<p>key_object cabinetkey ! a cabinetkey object</p>
</div>
<div class="paragraph">
<p>! must also be created</p>
</div>
<div class="paragraph">
<p>holding 0 ! starts off empty</p>
</div>
<div class="paragraph">
<p>capacity 100</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoLookUnder</p>
</div>
<div class="paragraph">
<p>\{"Nothing there but dust."}</p>
</div>
<div class="paragraph">
<p>object DoGet</p>
</div>
<div class="paragraph">
<p>\{"The cabinet is far too heavy</p>
</div>
<div class="paragraph">
<p>to lift!"}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>after</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoLock</p>
</div>
<div class="paragraph">
<p>\{"With a twist of the key, you lock the</p>
</div>
<div class="paragraph">
<p>cabinet up tight."}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>is container, openable, not open</p>
</div>
<div class="paragraph">
<p>is lockable, static</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Now, for bonus points for those who have looked ahead to <em>APPENDIX B:</em> <em>THE HUGO LIBRARY</em> to see what things like when_open, contains_desc, and static are for, how could the cabinet be converted into, say, a secret passage into another room?</p>
</div>
<div class="paragraph">
<p>The answer is: by adding a door_to property, such as:</p>
</div>
<div class="paragraph">
<p>door_to secondroom ! a new room object</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>is enterable</p>
</div>
<div class="paragraph">
<p>as a new attribute. The cabinet can now be entered via: &#8220;go cabinet&#8221;, &#8220;get into cabinet&#8221;, &#8220;enter cabinet&#8221;, etc.</p>
</div>
</div>
<div class="sect3">
<h4 id="_example_building_a_clock_event"><a class="anchor" href="#_example_building_a_clock_event"></a>Example: Building a Clock Event</h4>
<div class="paragraph">
<p>Suppose that there is a clock object in a room. Here is a possible event:</p>
</div>
<div class="paragraph">
<p>event in clock</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>local minutes, hours</p>
</div>
<div class="paragraph">
<p>hours = counter / 60</p>
</div>
<div class="paragraph">
<p>minutes = counter - (hours * 60)</p>
</div>
<div class="paragraph">
<p>if minutes = 0</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "The clock chimes ";</p>
</div>
<div class="paragraph">
<p>select hour</p>
</div>
<div class="paragraph">
<p>case 1: print "one";</p>
</div>
<div class="paragraph">
<p>case 2: print "two";</p>
</div>
<div class="paragraph">
<p>case 3: print "three";</p>
</div>
<div class="paragraph">
<p>.</p>
</div>
<div class="paragraph">
<p>.</p>
</div>
<div class="paragraph">
<p>.</p>
</div>
<div class="paragraph">
<p>case 12: print "twelve";<sup class="footnote">[<a id="_footnoteref_40" class="footnote" href="#_footnotedef_40" title="View footnote.">40</a>]</sup></p>
</div>
<div class="paragraph">
<p>print " o&#8217;clock."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Whenever the player and the clock are in the same room (when a runevents command is given), the event will run.</p>
</div>
<div class="paragraph">
<p>Now, suppose the clock should be audible throughout the entire game&#8212;&#8203;i.e., in any location on the game map. Simply changing the event definition to:</p>
</div>
<div class="paragraph">
<p>event ! no object is given</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>will make the event a global one. (In this case, the self global is not altered.)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fuses_daemons_and_scripts"><a class="anchor" href="#_fuses_daemons_and_scripts"></a>6. FUSES, DAEMONS, AND SCRIPTS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introduction_2"><a class="anchor" href="#_introduction_2"></a>6.1. Introduction</h3>
<div class="paragraph">
<p>While most of the previously discussed elements of programming with Hugo (such as events) are part of the internal architecture of the Hugo Engine, the means of running fuses, daemons, and scripts are written entirely in the Hugo language itself and contained in the Hugo Library.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fuses_and_daemons"><a class="anchor" href="#_fuses_and_daemons"></a>6.2. Fuses And Daemons</h3>
<div class="paragraph">
<p>A <em>daemon</em> is the traditional name for a recurring activity. Hugo handles daemons as special events attached to objects that may be activated or deactivated (i.e., moved in and out of the scope of runevents). Since the daemon class is defined in the library, define a daemon itself using:</p>
</div>
<div class="paragraph">
<p>daemon &lt;name&gt;</p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>The body of the daemon definition is empty. The daemon object is only needed to attach the daemon event to, so the daemon definition must be followed by:</p>
</div>
<div class="paragraph">
<p>event [in] &lt;name&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Activate it by:</p>
</div>
<div class="paragraph">
<p>Activate(&lt;name&gt;)</p>
</div>
<div class="paragraph">
<p>which moves the specified daemon object into scope of the player. This way, whenever a runevents command is given (as it should be in the Main routine), the event attached to &lt;name&gt; will run.</p>
</div>
<div class="paragraph">
<p>Deactivate the daemon using:</p>
</div>
<div class="paragraph">
<p>Deactivate(&lt;name&gt;)</p>
</div>
<div class="paragraph">
<p>which removes the daemon object from scope. (It can be seen here that a daemon is actually a special type of object which is moved in and out of the scope of runevents, and that it is the event attached to the daemon that actually contains the code.)</p>
</div>
<div class="paragraph">
<p>A fuse is the traditional name for a timer&#8212;&#8203;i.e., any event set to happen after a certain period of time. The fuse itself is a slightly more complex version of a daemon object, containing two additional properties as well as in_scope:</p>
</div>
<div class="paragraph">
<p>timer the number of turns before the fuse event runs</p>
</div>
<div class="paragraph">
<p>tick a routine that decrements timer and returns the number of turns remaining (i.e., the value of timer)</p>
</div>
<div class="paragraph">
<p>Similarly to a daemon, define a fuse in two steps:</p>
</div>
<div class="paragraph">
<p>fuse &lt;name&gt;</p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>event [in] &lt;name&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>if not self.tick</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>and turn it on or off by:</p>
</div>
<div class="paragraph">
<p>Activate(&lt;name&gt;, &lt;setting&gt;)</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>Deactivate(&lt;name&gt;)</p>
</div>
<div class="paragraph">
<p>where &lt;setting&gt; is the initial value of the timer property.</p>
</div>
<div class="paragraph">
<p>Note that it is up to the event itself to run the timer and check for its expiration. The line</p>
</div>
<div class="paragraph">
<p>if not self.tick</p>
</div>
<div class="paragraph">
<p>runs the tick property&#8212;&#8203;defined in the library, which is responsible for decrementing the timer&#8212;&#8203;and executes the following conditional block if self.timer is 0.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scripts"><a class="anchor" href="#_scripts"></a>6.3. Scripts</h3>
<div class="paragraph">
<p>Scripts are considerably more complex than fuses and daemons. The purpose of a script (also called a character script) is to allow an object&#8212;&#8203;usually a character&#8212;&#8203;to follow a sequence of actions turn-by-turn, independent of the player. Up to 16 scripts may be running at once.<sup class="footnote">[<a id="_footnoteref_41" class="footnote" href="#_footnotedef_41" title="View footnote.">41</a>]</sup></p>
</div>
<div class="paragraph">
<p>A script is represented by two arrays: scriptdata and setscript. The latter was named for programming clarity rather than for what it actually contains. Here&#8217;s why:</p>
</div>
<div class="paragraph">
<p>To define a script, use the following notation:</p>
</div>
<div class="paragraph">
<p>setscript[Script(&lt;char&gt;, &lt;num&gt;)] = &amp;CharRoutine, obj,</p>
</div>
<div class="paragraph">
<p>&amp;CharRoutine, obj,</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>(remembering that a hanging comma at the end of a line of code is a signal to the compiler that the line continues onto the next unbroken.)</p>
</div>
<div class="paragraph">
<p>Notice that <code>setscript</code> is actually an array, taking its starting element from the return value of the Script routine, which has &lt;object&gt; and &lt;number&gt; as its arguments.</p>
</div>
<div class="paragraph">
<p>Script returns a pointer within the large <code>setscript</code> array where &lt;num&gt; number of steps of a script for &lt;object&gt; may reside. A single script may have up to 32 steps. A step in a script consists of a routine and an object&#8212;&#8203;both are required, even if the routine does not require an object. (Use the nothing object (0); see the CharWait routine in <strong>hugolib.h</strong> for reference.)</p>
</div>
<div class="paragraph">
<p>The custom in <strong>hugolib.h</strong> is that character script routines use the prefix <code>Char</code> although this is not required. Currently, routines provided include:</p>
</div>
<div class="paragraph">
<p>CharMove (requiring a direction object)</p>
</div>
<div class="paragraph">
<p>CharWait (using the nothing object)</p>
</div>
<div class="paragraph">
<p>CharGet (requiring a takeable object)</p>
</div>
<div class="paragraph">
<p>CharDrop (requiring an object held by the character)</p>
</div>
<div class="paragraph">
<p>as well as the special routine</p>
</div>
<div class="paragraph">
<p>LoopScript (using the nothing object)</p>
</div>
<div class="paragraph">
<p>which indicates that a script will continually execute. (It is the responsibility of the programmer to ensure that the ending position of the character or object is suitable to loop back to the beginning if LoopScript is used. That is, if the script consists of a complex series of directions, the character should always return to the same starting point.)</p>
</div>
<div class="paragraph">
<p>The sequence of routines and objects for each script is stored in the setscript array.</p>
</div>
<div class="paragraph">
<p>Scripts are run using the RunScripts routine, similar to runevents, the only difference being that runevents is an engine command while RunScripts is contained entirely in <strong>hugolib.h</strong>. The line:</p>
</div>
<div class="paragraph">
<p>RunScripts</p>
</div>
<div class="paragraph">
<p>will run all active object/character scripts, one turn at a time, freeing the space used by each once it has run its course.</p>
</div>
<div class="paragraph">
<p>Here is a sample script for a character named &#8220;Ned&#8221;:</p>
</div>
<div class="paragraph">
<p>setscript[Script(ned, 4)] = &amp;CharMove, s_obj,</p>
</div>
<div class="paragraph">
<p>&amp;CharGet, cannonball,</p>
</div>
<div class="paragraph">
<p>&amp;CharMove, n_obj,</p>
</div>
<div class="paragraph">
<p>&amp;CharWait, 0,</p>
</div>
<div class="paragraph">
<p>&amp;CharDrop, cannonball</p>
</div>
<div class="paragraph">
<p>Ned will go south, retrieve the cannonball object, bring it north, wait a turn, and drop it. (The character script routines provided in the library are relatively basic; for example, CharGet assumes that the specified object will be there when the character comes to get it, so it&#8217;s more or less up to the game author&#8212;&#8203;at least when using the default library routines for character scripting&#8212;&#8203;to have things well planned out.)</p>
</div>
<div class="paragraph">
<p>Other script-management routines in <strong>hugolib.h</strong> include:</p>
</div>
<div class="paragraph">
<p>CancelScript(obj) to immediately halt execution of the script for &lt;obj&gt;</p>
</div>
<div class="paragraph">
<p>PauseScript(obj) to temporarily pause execution of the script for &lt;obj&gt;</p>
</div>
<div class="paragraph">
<p>ResumeScript(obj) to resume execution of a paused script</p>
</div>
<div class="paragraph">
<p>SkipScript(obj) skips the script for &lt;obj&gt; during the next call to RunScripts only</p>
</div>
<div class="paragraph">
<p>The RunScripts routine also checks for before and after properties. It continues with the default action&#8212;&#8203;i.e., the character action routine specified in the script&#8212;&#8203;if it finds a false value.</p>
</div>
<div class="paragraph">
<p>To override a default character action routine, include a before property for the character object using the following form:</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>actor CharRoutine</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>where CharRoutine is CharWait, CharMove, CharGet, CharDrop, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_note_about_the_event_flag_global"><a class="anchor" href="#_a_note_about_the_event_flag_global"></a>6.4. A Note About The event_flag Global</h3>
<div class="paragraph">
<p>The library routines&#8212;&#8203;particularly the DoWait&#8230;&#8203; verb routines (invoked whenever a player types &#8220;wait&#8221;, &#8220;wait for (someone)&#8221;, or &#8220;wait for 5 turns&#8221;--expect the event_flag global variable to be set to a non-false value if something happens (i.e., in an event or script) so that the player may be notified and given the opportunity to quit waiting. For instance, the character script routines in <strong>hugolib.h</strong> set event_flag whenever a character does something in the same location as the player.</p>
</div>
<div class="paragraph">
<p>If <strong>hugolib.h</strong> is to be used, the convention of setting event_flag after every significant event should be adhered to.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_6"><a class="anchor" href="#_what_should_i_be_able_to_do_now_6"></a>6.5. <em>What Should I Be Able To Do Now?</em></h3>
<div class="sect3">
<h4 id="_example_a_simple_daemon_and_a_simpler_fuse"><a class="anchor" href="#_example_a_simple_daemon_and_a_simpler_fuse"></a>Example: A Simple Daemon and a Simpler Fuse</h4>
<div class="paragraph">
<p>The most basic daemon would be something like a sleep counter, which measures how far a player can go beginning from a certain rested state. Assume that the player&#8217;s amount of rest is kept in a property called rest, which decreases by 2 each turn.</p>
</div>
<div class="paragraph">
<p>daemon gettired</p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>event in gettired</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>player.rest = player.rest - 2</p>
</div>
<div class="paragraph">
<p>if player.rest &lt; 0</p>
</div>
<div class="paragraph">
<p>player.rest = 0</p>
</div>
<div class="paragraph">
<p>select player.rest</p>
</div>
<div class="paragraph">
<p>case 20</p>
</div>
<div class="paragraph">
<p>"You&#8217;re getting quite tired."</p>
</div>
<div class="paragraph">
<p>case 10</p>
</div>
<div class="paragraph">
<p>"You&#8217;re getting \Ivery\i tired."</p>
</div>
<div class="paragraph">
<p>case 0</p>
</div>
<div class="paragraph">
<p>"You fall asleep!"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Start and stop the daemon with Activate(gettired) and Deactivate(gettired).</p>
</div>
<div class="paragraph">
<p>Now, as for a fuse, why not construct the most obvious example: that of a ticking bomb? (Assume that there exists another physical bomb object; tickingbomb is only the countdown fuse.)</p>
</div>
<div class="paragraph">
<p>fuse tickingbomb</p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>event in tickingbomb</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>if not self.tick</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>if Contains(location, bomb)</p>
</div>
<div class="paragraph">
<p>"You vanish in a nifty KABOOM!"</p>
</div>
<div class="paragraph">
<p>else</p>
</div>
<div class="paragraph">
<p>"You hear a distant KABOOM!"</p>
</div>
<div class="paragraph">
<p>remove bomb</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Start it (with a countdown of 25 turns):</p>
</div>
<div class="paragraph">
<p>Activate(tickingbomb, 25)</p>
</div>
<div class="paragraph">
<p>and stop it with:</p>
</div>
<div class="paragraph">
<p>Deactivate(tickingbomb)</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grammar_and_parsing"><a class="anchor" href="#_grammar_and_parsing"></a>7. GRAMMAR AND PARSING</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_grammar_definition"><a class="anchor" href="#_grammar_definition"></a>7.1. Grammar Definition</h3>
<div class="paragraph">
<p>Every valid player command must specified. More precisely, each usage of a particular verb must be detailed in full by the source code. Grammar definitions must <em>always</em> come at the start of a program, preceding any objects or executable code. That is, if several additional grammar files are to be included, or new grammar is to be explicitly defined in the source code, it must be done before any files containing executable code are included, or any routines, objects, etc. are defined.</p>
</div>
<div class="paragraph">
<p>The syntax used for grammar definition is:</p>
</div>
<div class="paragraph">
<p>[x]verb "&lt;verb1&gt;" [, "&lt;verb2&gt;", "&lt;verb3&gt;",&#8230;&#8203;]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&lt;syntax specification 1&gt; &lt;VerbRoutine1&gt;</p>
</li>
<li>
<p>&lt;syntax specification 2&gt; &lt;VerbRoutine2&gt;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Now, what does that mean? Here are some examples from the library grammar file <strong>verblib.g</strong>:</p>
</div>
<div class="paragraph">
<p>verb "get"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoVague</p>
</li>
<li>
<p>"up"/"out"/"off" DoExit</p>
</li>
<li>
<p>"outof"/"offof"/"off" object DoExit</p>
</li>
<li>
<p>"in"/"on" object DoEnter</p>
</li>
<li>
<p>multinotheld "from"/"off" parent DoGet</p>
</li>
<li>
<p>multinotheld "offof"/"outof" parent DoGet</p>
</li>
<li>
<p>multinotheld DoGet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>verb "take"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoVague</p>
</li>
<li>
<p>"off" multiheld DoTakeOff</p>
</li>
<li>
<p>multiheld "off" DoTakeOff</p>
</li>
<li>
<p>multinotheld DoGet</p>
</li>
<li>
<p>multinotheld "from"/"off" parent DoGet</p>
</li>
<li>
<p>multinotheld "offof"/"outof" parent DoGet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>xverb "save"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoSave</p>
</li>
<li>
<p>"game" DoSave</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>verb "read", "peruse"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoVague</p>
</li>
<li>
<p>readable DoRead</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>verb "unlock"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoVague</p>
</li>
<li>
<p>lockable "with" held DoUnLock</p>
</li>
<li>
<p>lockable DoUnLock</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each verb or xverb header begins a new verb definition. An xverb is a special signifier that indicates that the engine should not call the Main routine after successful completion of the action. xverb is typically used with non-action, housekeeping-type verbs such as saving, restoring, quitting, and restarting.</p>
</div>
<div class="paragraph">
<p>Another thing that can be done is to specify:</p>
</div>
<div class="paragraph">
<p>verb some_object</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object DoVerb</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>which will have the effect of, instead of defining the verb with a dictionary word, checking at runtime some_object.noun as the verb word to be matched. What this allows is for the some_object.noun property to be a routine that can return varying values at runtime in order to provide for dynamic grammar, if required. However, since this sort of dynamic grammar isn&#8217;t often required, static grammar definitions are far more common.</p>
</div>
<div class="paragraph">
<p>Next in the header comes one or more verb words. Each of the specified words will share the following verb grammar <em>exactly</em>. This is why <code>get</code> and <code>take</code> in the above examples are defined separately, instead of as</p>
</div>
<div class="paragraph">
<p>verb "get", "take"</p>
</div>
<div class="paragraph">
<p>In this way, the commands like</p>
</div>
<div class="paragraph">
<p>&gt;get up</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>&gt;take off hat</p>
</div>
<div class="paragraph">
<p>are allowable, while</p>
</div>
<div class="paragraph">
<p>&gt;take up</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>&gt;get off hat</p>
</div>
<div class="paragraph">
<p>won&#8217;t make any sense.</p>
</div>
<div class="paragraph">
<p>Each line beginning with an asterisk (<code>*</code>) is a separate valid usage of the verb being defined. (Every player input line must begin with a verb. Exceptions, where a command is directed to an object as in</p>
</div>
<div class="paragraph">
<p>&gt;Ned, get the ball</p>
</div>
<div class="paragraph">
<p>will be dealt with later.)</p>
</div>
<div class="paragraph">
<p>Up to two objects and any number of dictionary words may make up a syntax line. The objects must be separated by at least one dictionary word.</p>
</div>
<div class="paragraph">
<p>Valid object specifications are:</p>
</div>
<div class="paragraph">
<p>object any visible object (the direct object)</p>
</div>
<div class="paragraph">
<p>xobject the indirect object</p>
</div>
<div class="paragraph">
<p>attribute any visible object that is attribute</p>
</div>
<div class="paragraph">
<p>parent an xobject that is the parent of the object</p>
</div>
<div class="paragraph">
<p>held any object possessed by the player object</p>
</div>
<div class="paragraph">
<p>notheld an object explicitly not held</p>
</div>
<div class="paragraph">
<p>anything any object, held or not, visible or not</p>
</div>
<div class="paragraph">
<p>multi multiple visible objects</p>
</div>
<div class="paragraph">
<p>multiheld multiple held objects</p>
</div>
<div class="paragraph">
<p>multinotheld multiple notheld objects</p>
</div>
<div class="paragraph">
<p>number a positive integer number</p>
</div>
<div class="paragraph">
<p>word any dictionary word</p>
</div>
<div class="paragraph">
<p>string a quoted string</p>
</div>
<div class="paragraph">
<p>(RoutineName) a routine name, in parentheses</p>
</div>
<div class="paragraph">
<p>(objectname) a single object name, in parentheses</p>
</div>
<div class="paragraph">
<p>(If a number is specified in the grammar syntax, it will be passed to the verbroutine in the object global. If a string is specified, it will be passed in the engine&#8217;s parse$ variable, which can then be turned into a string array using the string function.)</p>
</div>
<div class="paragraph">
<p>Dictionary words that may be used interchangeably are separated by a slash (<code>/</code>).</p>
</div>
<div class="paragraph">
<p>Two or more dictionary words in sequence must be specified separately. That is, in the input line:</p>
</div>
<div class="paragraph">
<p>&gt;take hat out of suitcase</p>
</div>
<div class="paragraph">
<p>the syntax line</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object "out" "of" container</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>will be matched, while</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object "out of" container</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>would never be recognized, since the engine will automatically parse &#8220;out&#8221; and &#8220;of&#8221; as two separate words; the parser will never find a match for &#8220;out of&#8221;.</p>
</div>
<div class="paragraph">
<p>Regarding object specification within the syntax line: once the direct object has been found, the remaining object in the input line will be stored as the xobject. That is, in the example immediately above, a valid object in the input line with the attribute container will be treated as the indirect object by the verb routine.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>An important point to remember when mixing dictionary words and objects within a syntax line is that, unless directed differently, the parser may confuse a word-object combination with an invalid object name.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Consider the following:</p>
</div>
<div class="paragraph">
<p>verb "pick"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object DoGet</p>
</li>
<li>
<p>"up" object DoGet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This definition will result in something like</p>
</div>
<div class="paragraph">
<p>&gt;pick up box</p>
</div>
<div class="paragraph">
<p>You haven&#8217;t seen any "up box", nor are you likely to in the near future even if such a thing exists.</p>
</div>
<div class="paragraph">
<p>(assuming that &#8220;up&#8221; has been defined elsewhere as part of a different object name, as in <strong>objlib.h</strong>), because the processor processes the syntax</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and determines that an invalid object name is being used; it never gets to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"up" object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The proper verb definition would be ordered like</p>
</div>
<div class="paragraph">
<p>verb "pick"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"up" object DoGet</p>
</li>
<li>
<p>object DoGet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>so that both ‚Äúpick &lt;object&gt;‚Äú and ‚Äúpick up &lt;object&gt;‚Äú are valid player commands. It&#8217;s generally good practice to make sure that more specific grammar precedes more general grammar for this reason.</p>
</div>
<div class="paragraph">
<p>To define a new grammar condition that will take precedence over an existing one&#8212;&#8203;such as in <strong>verblib.g</strong>--simply define the new condition first (i.e., before including <strong>verblib.g</strong>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As a rule, unless you need to preempt the library&#8217;s normal grammar processing, include any new grammar <em>after</em> the library files. (The reason for this is that the library grammar is carefully tuned to handle situations exactly like that described above.)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A single object may be specified as the only valid object for a particular syntax:</p>
</div>
<div class="paragraph">
<p>verb "rub"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(magic_lamp) DoRubMagicLamp</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>will produce a &#8220;You can&#8217;t do that with&#8230;&#8203;&#8221; error for any object other than the magic_lamp object.</p>
</div>
<div class="paragraph">
<p>Using a routine name to specify an object is slightly more involved: the engine calls the given routine with the object specified in the input line as its argument; if the routine returns true, the object is valid&#8212;&#8203;if not, a parsing error is expected to have been printed by the routine. If two routine names are used in a particular syntax, such as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>(FirstRoutine) "with" (SecondRoutine)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>then FirstRoutine validates the object and SecondRoutine validates the xobject.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_parser"><a class="anchor" href="#_the_parser"></a>7.2. The Parser</h3>
<div class="paragraph">
<p>Immediately after an input line is received, the engine calls the parser, and the first step taken is to identify any invalid words, i.e., words that are not in the dictionary table.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>One non-dictionary word or phrase is allowed in an input line, providing it is enclosed in quotation marks. If the command is successfully parsed and the quoted word or phrase is matched to a string grammar token, that string is passed to parse$. More than one non-dictionary word or phrase (even if the additional phrases are enclosed in quotes) are not allowed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next step is to break the line down into individual words. Words are separated by spaces and basic punctuation (including <code>!</code> and <code>?</code>) which are removed. All characters in an input line are converted to lowercase (except those inside quotation marks).</p>
</div>
<div class="paragraph">
<p>The next step is to process the four types of special &#8220;words&#8221; which may be defined in the source code.</p>
</div>
<div class="paragraph">
<p><em>Removals</em> are the simplest. These are simply words that are to be automatically removed from any input line, and are generally limited to words such as &#8220;a&#8221; and &#8220;the&#8221; which would, generally speaking, only make grammar matching more complicated and difficult. The syntax for defining a removal is:</p>
</div>
<div class="paragraph">
<p>removal "&lt;word1&gt;"[, "&lt;word2&gt;", "word&lt;3&gt;",&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>as in</p>
</div>
<div class="paragraph">
<p>removal "a", "an", "the"</p>
</div>
<div class="paragraph">
<p><em>Punctuation</em> is similar to a removal, except it specifies the removal of individual characters instead of whole words:</p>
</div>
<div class="paragraph">
<p>punctuation "&lt;character1&gt;[&lt;character2&gt;&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>as in</p>
</div>
<div class="paragraph">
<p>punctuation "$%"</p>
</div>
<div class="paragraph">
<p><em>Synonyms</em> are slightly more complex. These are words that will never be found in the parsed input line; they are replaced by the specified word for which they are a synonym.</p>
</div>
<div class="paragraph">
<p>synonym "&lt;synonym&gt;" for "&lt;word&gt;"</p>
</div>
<div class="paragraph">
<p>as in</p>
</div>
<div class="paragraph">
<p>synonym "myself" for "me"</p>
</div>
<div class="paragraph">
<p>The above example will replace every occurrence of &#8220;myself&#8221; in the input line with &#8220;me&#8221;. Usage of synonyms will likely not be extensive, since of course it is possible to, particularly in the case of object nouns and adjectives specify synonymous words which are still treated as distinct.</p>
</div>
<div class="paragraph">
<p><em>Compounds</em> are the final type of special word, specified as:</p>
</div>
<div class="paragraph">
<p>compound "&lt;word1&gt;", "&lt;word2&gt;"</p>
</div>
<div class="paragraph">
<p>as in</p>
</div>
<div class="paragraph">
<p>compound "out", "of"</p>
</div>
<div class="paragraph">
<p>so that the input line</p>
</div>
<div class="paragraph">
<p>&gt;get hat out of suitcase</p>
</div>
<div class="paragraph">
<p>would be parsed to</p>
</div>
<div class="paragraph">
<p>&gt;get hat outof suitcase</p>
</div>
<div class="paragraph">
<p>Depending on the design of grammar tables for certain syntaxes, the use of compounds may make grammar definition more straightforward, so that by using the above compound,</p>
</div>
<div class="paragraph">
<p>verb "get"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>multinotheld "outof"/"offof"/"from" parent</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>is possible, and likely more desirable to</p>
</div>
<div class="paragraph">
<p>verb "get"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>multinotheld "out"/"off" "of" parent</p>
</li>
<li>
<p>multinotheld "from" parent</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the parser has finished processing the input line, the result is a specially defined (by the Hugo Engine) array called word[], where the number of valid elements is held in the global variable words. Therefore, in</p>
</div>
<div class="paragraph">
<p>&gt;get the hat from the table</p>
</div>
<div class="paragraph">
<p>the parser&#8212;&#8203;using the removals defined in <strong>hugolib.h</strong>--will produce the following results:</p>
</div>
<div class="paragraph">
<p>word[1] = "get"</p>
</div>
<div class="paragraph">
<p>word[2] = "hat"</p>
</div>
<div class="paragraph">
<p>word[3] = "from"</p>
</div>
<div class="paragraph">
<p>word[4] = "table"</p>
</div>
<div class="paragraph">
<p>words = 4</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Multiple-command input lines are also allowed, provided that the individual commands are separated by a period (<code>.</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&gt;get hat. go n. go e.</p>
</div>
<div class="paragraph">
<p>would become</p>
</div>
<div class="paragraph">
<p>word[1] = "get"</p>
</div>
<div class="paragraph">
<p>word[2] = "hat"</p>
</div>
<div class="paragraph">
<p>word[3] = ""</p>
</div>
<div class="paragraph">
<p>word[4] = "go"</p>
</div>
<div class="paragraph">
<p>word[5] = "n"</p>
</div>
<div class="paragraph">
<p>word[6] = ""</p>
</div>
<div class="paragraph">
<p>word[7] = "go"</p>
</div>
<div class="paragraph">
<p>word[8] = "e"</p>
</div>
<div class="paragraph">
<p>word[9] = ""</p>
</div>
<div class="paragraph">
<p>words = 9</p>
</div>
<div class="paragraph">
<p>(See <strong>hugolib.h</strong> for an example of how</p>
</div>
<div class="paragraph">
<p>&gt;get hat then go n</p>
</div>
<div class="paragraph">
<p>is translated into:</p>
</div>
<div class="paragraph">
<p>word[1] = "get"</p>
</div>
<div class="paragraph">
<p>word[2] = "hat"</p>
</div>
<div class="paragraph">
<p>word[3] = ""</p>
</div>
<div class="paragraph">
<p>word[4] = "go"</p>
</div>
<div class="paragraph">
<p>word[5] = "n"</p>
</div>
<div class="paragraph">
<p>in the Parse routine.)</p>
</div>
<div class="paragraph">
<p>A maximum of thirty-two words is allowed. The period is in each case converted to the empty dictionary entry (<code>""</code>; dictionary address = 0), which is a signal to the engine that processing of the current command should end here.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The parsing and grammar routines also recognize several system words, each in the format <code>~word</code>. These are:</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>~and referring to: multiple specific objects</strong></p>
</div>
<div class="paragraph">
<p><strong>~all ‚Äú ‚Äú multiple objects in general</strong></p>
</div>
<div class="paragraph">
<p><strong>~any ‚Äú ‚Äú any one of a list of objects</strong></p>
</div>
<div class="paragraph">
<p><strong>~except ‚Äú ‚Äú an excluded object</strong></p>
</div>
<div class="paragraph">
<p><strong>~oops to correct an error in the previous input line</strong></p>
</div>
<div class="paragraph">
<p>To allow an input line to access any of these system words, a synonym must be defined, such as:</p>
</div>
<div class="paragraph">
<p>synonym <code>and</code> for <code>~and</code></p>
</div>
<div class="paragraph">
<p>The library defines several such synonyms.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_7"><a class="anchor" href="#_what_should_i_be_able_to_do_now_7"></a>7.3. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>It should by now be relatively straightforward how to go about adding a new verb (with appropriate grammer)--or even modifying an existing one. For instance, consider a game in which disco dancing plays an absolutely vital role, and where the command &#8220;&gt;GET DOWN&#8221; must at all costs be implemented as a synonym for &#8220;&gt;DANCE&#8221; or &#8220;&gt;BOOGIE&#8221;.</p>
</div>
<div class="paragraph">
<p>For starters, you&#8217;ll need to add the initial grammar and verbroutine:</p>
</div>
<div class="paragraph">
<p>verb "dance", "boogie"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoDance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>routine DoDance</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"You get down, all night long."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Keep in mind that the verb definition, as with all grammar, must come before any other code, definitions, etc. Now, you&#8217;ll have to add the &#8220;&gt;GET DOWN&#8221; grammar:</p>
</div>
<div class="paragraph">
<p>verb "get"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"down" DoDance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, this must come both before any other code or definitions as well as the <em>existing</em> grammar for &#8220;&gt;GET &lt;object&gt;&#8221; (from VERBLIB.G). Otherwise, the regular grammar for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object DoGet</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>will take precedence. By superseding it, however, we ensure that any grammar matching the desired pattern will result in DoDance being called instead.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_junction_routines"><a class="anchor" href="#_junction_routines"></a>8. JUNCTION ROUTINES</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_before_we_get_to_the_routines"><a class="anchor" href="#_before_we_get_to_the_routines"></a>8.1. Before We Get To The Routines</h3>
<div class="paragraph">
<p>Because, the engine is unaware of such things as attributes, properties, and objects in anything but a technical sense<sup class="footnote">[<a id="_footnoteref_42" class="footnote" href="#_footnotedef_42" title="View footnote.">42</a>]</sup>, there are provided a number of routines to facilitate communication between the engine and the program proper. Along with these junction routines are certain global variables and properties that are pre-defined by the compiler and accessed directly by the engine. They are:</p>
</div>
<div class="paragraph">
<p><strong><span class="underline">GLOBALS</span></strong></p>
</div>
<div class="paragraph">
<p>object the direct object of a verb</p>
</div>
<div class="paragraph">
<p>xobject the indirect object</p>
</div>
<div class="paragraph">
<p>self self-referential object</p>
</div>
<div class="paragraph">
<p>words total number of words</p>
</div>
<div class="paragraph">
<p>player the player object</p>
</div>
<div class="paragraph">
<p>actor the player, or character obj. (for scripts)</p>
</div>
<div class="paragraph">
<p>location location of the player</p>
</div>
<div class="paragraph">
<p>verbroutine the verb routine address</p>
</div>
<div class="paragraph">
<p>endflag if not false (0), call EndGame</p>
</div>
<div class="paragraph">
<p>prompt for the player input line</p>
</div>
<div class="paragraph">
<p>objects total number of objects</p>
</div>
<div class="paragraph">
<p>system_status after certain operations</p>
</div>
<div class="paragraph">
<p><strong><span class="underline">PROPERTIES</span></strong></p>
</div>
<div class="paragraph">
<p>name basic object name</p>
</div>
<div class="paragraph">
<p>before pre-verb routines</p>
</div>
<div class="paragraph">
<p>after post-verb routines</p>
</div>
<div class="paragraph">
<p>noun noun(s) for referring to object</p>
</div>
<div class="paragraph">
<p>adjective adjective(s) for referring to object</p>
</div>
<div class="paragraph">
<p>article &#8220;a&#8221;, &#8220;an&#8221;, &#8220;the&#8221;, &#8220;some&#8221;, etc.</p>
</div>
<div class="paragraph">
<p>(Additionally, the aliases nouns and adjectives for noun and adjective, respectively, are defined by the library.)</p>
</div>
<div class="paragraph">
<p>Junction routines are not required. The engine has built-in default routines, although it&#8217;s likely that not all of these will be satisfactory for most programmers. <strong>hugolib.h</strong> contains each of the following routines which fully implement all the features of the library. If a different routine is desired in place of a provided one, the routine should be substituted using replace.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parse"><a class="anchor" href="#_parse"></a>8.2. Parse</h3>
<div class="paragraph">
<p>The Parse routine, if one exists, is called by the engine parser. Here, the program itself may modify the input line before grammar matching is attempted. What happens is:</p>
</div>
<div class="paragraph">
<p>1. The input line is split into discrete words (by the engine).</p>
</div>
<div class="paragraph">
<p>2. The Parse routine, if it exists, is called.</p>
</div>
<div class="paragraph">
<p>3. Control returns to the engine for grammar matching.</p>
</div>
<div class="paragraph">
<p>4. During grammar matching, the FindObject routine may be called (possibly repeatedly).</p>
</div>
<div class="paragraph">
<p>For example, the Parse routine in <strong>hugolib.h</strong> takes care of such things as pronouns (&#8220;he&#8221;, &#8220;she&#8221;, &#8220;it&#8221;, &#8220;them&#8221;) and repeating the last legal command (with &#8220;again&#8221; or simply &#8220;g&#8221;).</p>
</div>
<div class="paragraph">
<p>Returning true from the Parse routine calls the engine parser again (i.e., returns to step 1 in the process above); returning false continues normally. This is useful in case the Parse routine has changed the input line substantially, requiring a reconfiguration of the already split words.</p>
</div>
<div class="paragraph">
<p>The HugoFix debugging library can be used at runtime to monitor the goings-on of the Parse routine by enabling parser monitoring with the <code>$pm</code> command.<sup class="footnote">[<a id="_footnoteref_43" class="footnote" href="#_footnotedef_43" title="View footnote.">43</a>]</sup></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since the library&#8217;s Parse routine is rather extensive, a provision is made for a PreParse routine&#8212;&#8203;which in the library is defined as being empty&#8212;&#8203;which may more easily be replaced for additional parsing.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_parseerror"><a class="anchor" href="#_parseerror"></a>8.3. ParseError</h3>
<div class="paragraph">
<p>The ParseError routine is called whenever a command is invalid. ParseError is called in the form:</p>
</div>
<div class="paragraph">
<p>ParseError(&lt;errornumber&gt;, &lt;object&gt;)</p>
</div>
<div class="paragraph">
<p>where &lt;object&gt; is the object number (if any) of the object involved in the error.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The engine also sets up the special variable parse$, which represents the illegal component of an input line, whether it is the verb itself, an object name, a partial object name, or any other word combination.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>print "The illegal word was: "; parse$; "."</p>
</div>
<div class="paragraph">
<p>The default responses provided by the engine parse error routine are:</p>
</div>
<div class="paragraph">
<p><strong>ERROR NUMBER RESPONSE</strong></p>
</div>
<div class="paragraph">
<p>0 <code>What?</code></p>
</div>
<div class="paragraph">
<p>1 <code>You can&#8217;t use the word <em>&lt;parse$&gt;</em>.</code></p>
</div>
<div class="paragraph">
<p>2 <code>Better start with a verb.</code></p>
</div>
<div class="paragraph">
<p>3 <code>You can&#8217;t <em>&lt;parse$&gt;</em> multiple objects.</code></p>
</div>
<div class="paragraph">
<p>4 <code>Can&#8217;t do that.</code></p>
</div>
<div class="paragraph">
<p>5 <code>You haven&#8217;t seen any <em>&lt;parse$&gt;</em>, nor are you likely to in the near future even if such a thing exists.</code></p>
</div>
<div class="paragraph">
<p>6 <code>That doesn&#8217;t make any sense.</code></p>
</div>
<div class="paragraph">
<p>7 <code>You can&#8217;t use multiple objects like that.</code></p>
</div>
<div class="paragraph">
<p>8 <code>Which <em>&lt;parse$&gt;</em> do you mean,&#8230;&#8203;?</code></p>
</div>
<div class="paragraph">
<p>9 <code>Nothing to <em>&lt;parse$&gt;</em>.</code></p>
</div>
<div class="paragraph">
<p>10 <code>You haven&#8217;t seen anything like that.</code></p>
</div>
<div class="paragraph">
<p>11 <code>You don&#8217;t see that.</code></p>
</div>
<div class="paragraph">
<p>12 <code>You can&#8217;t do that with the <em>&lt;parse$&gt;</em>.</code></p>
</div>
<div class="paragraph">
<p>13 <code>You&#8217;ll have to be a little more specific.</code></p>
</div>
<div class="paragraph">
<p>14 <code>You don&#8217;t see that there.</code></p>
</div>
<div class="paragraph">
<p>15 <code>You don&#8217;t have that.</code></p>
</div>
<div class="paragraph">
<p>16 <code>You&#8217;ll have to make a mistake first.</code></p>
</div>
<div class="paragraph">
<p>17 <code>You can only correct one word at a time.</code></p>
</div>
<div class="paragraph">
<p>The ParseError routine in <strong>hugolib.h</strong> provides customized responses that take into account such things as, for example, whether the player is first or second-person, whether or not an object is a character or not, and if so, if it is male or female, etc.</p>
</div>
<div class="paragraph">
<p>If the ParseError routine does not provide a response for a particular &lt;errornumber&gt;, it should return false. Returning false is a signal that the engine should continue with the default message. Returning 2 is a signal to reparse the entire existing line (useful in cases where a peculiar syntax is trapped as an error, changed, and must then be reparsed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If custom error messages are desired for user parsing routines, replace the routine CustomError with a new routine (called with the same parameters as ParseError), providing that &lt;errornumber&gt; is greater than or equal to 100.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_endgame"><a class="anchor" href="#_endgame"></a>8.4. EndGame</h3>
<div class="paragraph">
<p>The EndGame routine is called immediately whenever the global variable endflag is non-zero, regardless of whether or not the current function has not yet been terminated.</p>
</div>
<div class="paragraph">
<p><strong>hugolib.h</strong>'s EndGame routine behaves according to the value to which endflag is set:</p>
</div>
<div class="paragraph">
<p><strong>endflag RESULT</strong></p>
</div>
<div class="paragraph">
<p>1 Player wins</p>
</div>
<div class="paragraph">
<p>2 Player&#8217;s demise</p>
</div>
<div class="paragraph">
<p>0 Other ending&#8212;&#8203;not provided for by default PrintEndGame routine)</p>
</div>
<div class="paragraph">
<p>Returning false from Endgame terminates the game completely; returning non-false restarts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To modify only the message displayed at the end of the game (defaults: <code><strong>* YOU&#8217;VE WON THE GAME! </strong><strong></code> and <code><strong></strong> YOU ARE DEAD </strong>*</code>), replace the PrintEndGame routine.
Other than being non-false, the various values of endflag are insignificant except to PrintEndGame.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_findobject"><a class="anchor" href="#_findobject"></a>8.5. FindObject</h3>
<div class="paragraph">
<p>The FindObject routine takes into account all the relevant properties, attributes, and object hierarchy to determine whether or not a particular object is available in the current context. For example, the child of a parent object may be available if the parent is a platform, but unavailable if the parent is a container (and closed)--although internally, the object hierarchy is the same. FindObject is called via:</p>
</div>
<div class="paragraph">
<p>FindObject(&lt;object&gt;, &lt;location&gt;)</p>
</div>
<div class="paragraph">
<p>where &lt;object&gt; is the object in question, and &lt;location&gt; is the object where its availability is being tested. (Usually &lt;location&gt; is a room, unless a different parent has been specified in the input line.)</p>
</div>
<div class="paragraph">
<p>FindObject returns true (1) if the object is available, false (0) if unavailable. It returns 2 if the object is visible but not physically accessible.</p>
</div>
<div class="paragraph">
<p>The FindObject routine in <strong>hugolib.h</strong> considers not only the location of &lt;object&gt; in the object tree, but also tests the attributes of the parent to see if it is open or closed. As well, it checks the found_in property, in case &lt;object&gt; has been assigned multiple locations instead of an explicit parent, and then scans the in_scope property of the object (if one exists).</p>
</div>
<div class="paragraph">
<p>Finally, the default behavior of the library&#8217;s FindObject requires that a player have encountered an object for it to be valid in an action, i.e., it must have the known attribute set. To override this, replace the routine ObjectisKnown with a routine that returns an unconditional true value.</p>
</div>
<div class="paragraph">
<p>There is one special case in which the engine expects the FindObject routine to be especially helpful: that is if the routine is called with &lt;location&gt; equal to 0. This occurs whenever the engine needs to determine if an object is available <em>at all</em>--regardless of any rules normally governing object availability&#8212;&#8203;such as when an anything grammar token is encountered, or the engine needs to disambiguate two or more seemingly identical objects. (Also, FindObject may be called by the engine with both &lt;object&gt; and &lt;location&gt; equal to 0 to reset any library-based object disambiguation.)</p>
</div>
<div class="paragraph">
<p>The HugoFix debugging library can be used at runtime to monitor calls to FindObject by enabling the <code>$fi</code> command. <sup class="footnote">[<a id="_footnoteref_44" class="footnote" href="#_footnotedef_44" title="View footnote.">44</a>]</sup></p>
</div>
</div>
<div class="sect2">
<h3 id="_speakto"><a class="anchor" href="#_speakto"></a>8.6. SpeakTo</h3>
<div class="paragraph">
<p>The SpeakTo routine is called whenever an input line begins with a valid object name instead of a verb. This is so the player may direct commands to (usually) characters in the game. For example:</p>
</div>
<div class="paragraph">
<p>&gt;Professor Plum, drop the lead pipe</p>
</div>
<div class="paragraph">
<p>It is up to the SpeakTo routine to properly interpret the instruction. SpeakTo is called via:</p>
</div>
<div class="paragraph">
<p>SpeakTo(&lt;character&gt;)</p>
</div>
<div class="paragraph">
<p>where &lt;character&gt; in the above example would be the Professor Plum object. The globals object, xobject, and verbroutine are all set up as normal. For the above example, then, these would be</p>
</div>
<div class="paragraph">
<p>object leadpipe</p>
</div>
<div class="paragraph">
<p>xobject nothing</p>
</div>
<div class="paragraph">
<p>verbroutine &amp;DoDrop</p>
</div>
<div class="paragraph">
<p>when SpeakTo is called.</p>
</div>
<div class="paragraph">
<p><strong>hugolib.h</strong>'s SpeakTo routine provides basic interpretation of questions, so that</p>
</div>
<div class="paragraph">
<p>&gt;Professor Plum, what about the lead pipe?</p>
</div>
<div class="paragraph">
<p>may be directed to the proper verb routine, as if the player had typed:</p>
</div>
<div class="paragraph">
<p>&gt;ask Professor Plum about the lead pipe</p>
</div>
<div class="paragraph">
<p>Imperative commands are, such as</p>
</div>
<div class="paragraph">
<p>&gt;Colonel Mustard, stand up</p>
</div>
<div class="paragraph">
<p>are first directed to the order_response property of the character object in question. It is subsequently up to &lt;character&gt;.order_response to analyze verbroutine (as well as object and xobject, if applicable) to see if the request is a valid one. If no response is provided, order_response should return false.</p>
</div>
<div class="paragraph">
<p>The HugoFix debugging library can be used at runtime to monitor calls to SpeakTo by enabling the <code>$pm</code> command. <sup class="footnote">[<a id="_footnoteref_45" class="footnote" href="#_footnotedef_45" title="View footnote.">45</a>]</sup></p>
</div>
<div class="paragraph">
<p>order_response</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>if verbroutine = &amp;DoGet</p>
</div>
<div class="paragraph">
<p>"I would, but my back is too sore."</p>
</div>
<div class="paragraph">
<p>else</p>
</div>
<div class="paragraph">
<p>return false</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is important to check in an order_response property if any objects to be acted upon are present (or otherwise available), since this check is not necessarily done before SpeakTo is called.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When something like the following is directed toward a character:</p>
</div>
<div class="paragraph">
<p>&gt;BOB, GET THE PACKAGE</p>
</div>
<div class="paragraph">
<p>SpeakTo(bob) will be called with verbroutine = &amp;DoGet and object = package, even if the package object is not physically present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_perform"><a class="anchor" href="#_perform"></a>8.7. Perform</h3>
<div class="paragraph">
<p>The Perform routine is what is called by the engine in order to execute the appropriate verbroutine with the given object(s) and/or indirect object, if either or both are applicable. It is the responsibility of Perform to do the appropriate checking of before routines to determine if execution actually gets to the verbroutine. Perform is called as:</p>
</div>
<div class="paragraph">
<p>Perform(&lt;verbroutine&gt;, &lt;object&gt;, &lt;xobject&gt;, &lt;queue&gt;, &lt;isxverb&gt;)</p>
</div>
<div class="paragraph">
<p>The first three arguments represent the match verb (always), object (if given), and indirect object, i.e., the xobject (if given). The &lt;queue&gt; is 0 unless the verbroutine is being called more than once for multiple objects. (As a special case, &lt;queue&gt; is ‚Äì1 if object or xobject is a number supplied in the input as one or more digits, in order to signal Perform not to do normal before/after routine calling.) The &lt;isxverb&gt; argument is true if the grammar for invoking Perform designates an xverb<sup class="footnote">[<a id="_footnoteref_46" class="footnote" href="#_footnotedef_46" title="View footnote.">46</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>For example, various player commands might (approximately, depending on verbroutine and object names) result in the routine calls:</p>
</div>
<div class="paragraph">
<p>&gt;i</p>
</div>
<div class="paragraph">
<p>Perform(&amp;DoInventory, 0, 0, 0)</p>
</div>
<div class="paragraph">
<p>&gt;get key</p>
</div>
<div class="paragraph">
<p>Perform(&amp;DoGet, key_object, 0, 0)</p>
</div>
<div class="paragraph">
<p>&gt;put the key on the table</p>
</div>
<div class="paragraph">
<p>Perform(&amp;DoGet, key_object, 0, 0)</p>
</div>
<div class="paragraph">
<p>&gt;turn the dial to 127</p>
</div>
<div class="paragraph">
<p>Perform(&amp;DoTurn, dial, 127, -1)</p>
</div>
<div class="paragraph">
<p>&gt;get key and banana</p>
</div>
<div class="paragraph">
<p>Perform(&amp;DoGet, key_object, 0, 1)</p>
</div>
<div class="paragraph">
<p>Perform(&amp;DoGet, banana, 0, 2)</p>
</div>
<div class="paragraph">
<p>(If no Perform routine exists, the engine performs a default calling of player.before, location.before, xobject.before, object.before, and finally verbroutine if none of those returns true.)</p>
</div>
<div class="paragraph">
<p>Using HugoFix&#8217;s parser monitoring (<code>$pm</code>) at runtime will trace calls to Perform. <sup class="footnote">[<a id="_footnoteref_47" class="footnote" href="#_footnotedef_47" title="View footnote.">47</a>]</sup></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_game_loop"><a class="anchor" href="#_the_game_loop"></a>9. THE GAME LOOP</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_of_the_game_loop"><a class="anchor" href="#_overview_of_the_game_loop"></a>9.1. Overview Of The Game Loop</h3>
<div class="paragraph">
<p>This the basic execution pattern that the Hugo Engine follows during program execution. (Also mentioned are the calling of before routines and the verbroutine by Perform in <strong>hugolib.h</strong>. While not necessarily part of the game loop&#8212;&#8203;since they may or may not be included in a program&#8212;&#8203;they are mentioned here because they are relevant to any Hugo program that uses the standard Hugo Library.)</p>
</div>
<div class="paragraph">
<p><strong>Init</strong>: The Init routine is called only when the program is first run, or when a restart command is issued.</p>
</div>
<div class="paragraph">
<p><strong>Main:</strong> At the start of the game loop, the engine calls the Main routine. The routine should&#8212;&#8203;as in the provided sample programs&#8212;&#8203;take care of advancing the turn counter, executing the runevents command, and calling such library routines as RunScripts and PrintStatusLine.</p>
</div>
<div class="paragraph">
<p><strong>Input:</strong> Keyboard input is received.</p>
</div>
<div class="paragraph">
<p><strong>Parsing:</strong> The input line is checked for validity, synonyms and other special words are checked, and the user Parse routine (if any) is called.</p>
</div>
<div class="paragraph">
<p><strong>Grammar matching:</strong></p>
</div>
<div class="paragraph">
<p>The engine attempts to match the input line with a valid verb and syntax in the grammar table. If no match is found, the engine loops back to <strong>Input</strong>.</p>
</div>
<div class="paragraph">
<p>Otherwise, a successful grammar match results in at least the verbroutine global being set, as well as potentially object and xobject.</p>
</div>
<div class="paragraph">
<p><strong>Before routines (as called by Perform in hugolib.h):</strong></p>
</div>
<div class="paragraph">
<p>If any objects were specified in the input line, their before properties are checked in the following order, for each object:</p>
</div>
<div class="paragraph">
<p>player.before</p>
</div>
<div class="paragraph">
<p>location.before</p>
</div>
<div class="paragraph">
<p>xobject.before (if applicable)</p>
</div>
<div class="paragraph">
<p>object.before (if applicable)</p>
</div>
<div class="paragraph">
<p>If any of these property routines returns true, the engine skips the verb routine. (The react_before property for relevant objects is checked at this time as well.)</p>
</div>
<div class="paragraph">
<p><strong>Verb routine (as called by Perform in hugolib.h):</strong></p>
</div>
<div class="paragraph">
<p>If no before property routine returns true, the verb routine is run.</p>
</div>
<div class="paragraph">
<p>If an action is successfully completed, the verb routine should return true. Returning false negates any remaining commands in the input line.</p>
</div>
<div class="paragraph">
<p>Perform does not run any after property routines for object or xobject; that is up to the verb routine. It does run both player.after and location.after if the verbroutine returns true. (The react_after property for relevant objects is checked at this time as well.)</p>
</div>
<div class="paragraph">
<p>(Control returns from the library Perform routine to the engine)</p>
</div>
<div class="paragraph">
<p>When finished, the engine loops back to <strong>Main</strong>, calling the Main routine only if the last verb matched was not an xverb.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Setting the global endflag at any point to a non-zero value will terminate the game loop and run the EndGame junction routine.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_8"><a class="anchor" href="#_what_should_i_be_able_to_do_now_8"></a>9.2. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>By this point, you&#8217;ve been introduced to the basic facilities through which the Hugo Engine communicates with a running Hugo game: the junction routines EndGame, FindObject, Parse, ParseError, Perform, and SpeakTo. Becoming familiar with their implementation and use (and even inner workings) is an important step toward mastering an understanding of the Hugo game loop, including determining how a player input line is parsed, what objects are available or in scope, and how a command is either dispatched to a verbroutine or directed to another character. You should be able to create your own verbroutines (and grammar) to handle actions not provided by default in the library. You should now understand how to create an order_response property for characters to respond to actions passed to them by SpeakTo.</p>
</div>
<div class="paragraph">
<p>It should be apparent how a game can implement custom versions of things like end-of-game behavior, parser messages, etc. without editing the library itself by using the compiler&#8217;s replace directive with library routines such as EndGame and ParseError. Most often, a programmer will copy the selected routine out of <strong>hugolib.h</strong> (or wherever it comes from) and paste it into the game&#8217;s source, changing (for instance):</p>
</div>
<div class="paragraph">
<p>routine EndGame &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="paragraph">
<p>replace EndGame &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>and customize the EndGame routine&#8217;s messages, behavior, or whatever the desired modifications may involve.</p>
</div>
<div class="paragraph">
<p>For instance, to change the default parser error message</p>
</div>
<div class="paragraph">
<p>You don&#8217;t need to use the word "&lt;unknown word&gt;".</p>
</div>
<div class="paragraph">
<p>to something along the lines of</p>
</div>
<div class="paragraph">
<p>[This game does not recognize "&lt;unknown word&gt;".]</p>
</div>
<div class="paragraph">
<p>first copy the ParseError routine from <strong>hugolib.h</strong> to the game&#8217;s source, and change, in the copied ParseError,</p>
</div>
<div class="paragraph">
<p>routine ParseError(errornumber, object)</p>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="paragraph">
<p>replace ParseError(errornumber, object)</p>
</div>
<div class="paragraph">
<p>and modify the case for the error message in question from</p>
</div>
<div class="paragraph">
<p>case 1</p>
</div>
<div class="paragraph">
<p>print CThe(player); \</p>
</div>
<div class="paragraph">
<p>MatchPlural(player, "doesn&#8217;t, "don&#8217;t"); \</p>
</div>
<div class="paragraph">
<p>need to use the word \""; \</p>
</div>
<div class="paragraph">
<p>parse$; "\"."</p>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="paragraph">
<p>case 1</p>
</div>
<div class="paragraph">
<p>print "[This game does not recognize \""; \</p>
</div>
<div class="paragraph">
<p>parse$; "\".]"</p>
</div>
<div class="paragraph">
<p>You should also by now have an understanding of how to override the game loop using before and after routines in order to provide for custom responses and/or behavior not directly provided by the library. Normally, for example, an object having the static attribute is automatically treated as untakeable by the library. But what if you created a heavy boulder and wanted to have the response</p>
</div>
<div class="paragraph">
<p>The boulder is far too heavy to lift!</p>
</div>
<div class="paragraph">
<p>in place of the library&#8217;s default &#8220;You can&#8217;t take that.&#8221; message? You would simply interrupt the DoGet routine before it even executes via a before property on the boulder object:</p>
</div>
<div class="paragraph">
<p>before</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoGet</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"The boulder is far too heavy to lift!"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_the_object_library"><a class="anchor" href="#_using_the_object_library"></a>10. USING THE OBJECT LIBRARY</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Hugo Object Library (<strong>objlib.h</strong>), included by default by <strong>hugolib.h</strong> as part of the standard Hugo Library, provides a number of useful classes for common elements of many games. These classes can be used as-is to create objects or as base classes for more complex and/or game-specific classes.</p>
</div>
<div class="sect2">
<h3 id="_rooms_and_directions"><a class="anchor" href="#_rooms_and_directions"></a>10.1. Rooms and Directions</h3>
<div class="paragraph">
<p>Most games will make use of rooms, directions, and possibly characters. A room in this context is an object which specifically functions as a location in the game world, and as such contains other objects as children in branches beneath it in the object tree. Despite being called &#8220;rooms&#8221;, these generic locations aren&#8217;t explicitly indoors or outdoors; most games won&#8217;t make a distinction except in the textual description (the long_desc) of the location.</p>
</div>
<div class="paragraph">
<p>A room is defined like this:</p>
</div>
<div class="paragraph">
<p>room living_room "living room"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>long_desc</p>
</div>
<div class="paragraph">
<p>"The living room is about fifteen feet</p>
</div>
<div class="paragraph">
<p>square, with a bay window on one wall</p>
</div>
<div class="paragraph">
<p>looking out over the garden. The kitchen</p>
</div>
<div class="paragraph">
<p>is to the south, or you can walk into the</p>
</div>
<div class="paragraph">
<p>back hallway to the east."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Since a room is not placed within another object in the object tree (using the in directive), it automatically has a parent of 0 or nothing. By inheriting from the room class, the living_room object acquires the characteristics defined in the object library, including being static and light<sup class="footnote">[<a id="_footnoteref_48" class="footnote" href="#_footnotedef_48" title="View footnote.">48</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>Additionally, as with other classes in the object library, the type property of an object can be checked to see which class it was derived from. In this case, living_room.type would equal room. (Of course, living_room or an object subsequently derived from living_room could set its type property to something other than room.)</p>
</div>
<div class="paragraph">
<p>Travel between rooms is managed by default using the eight cardinal compass directions (north, northeast, east, southeast, south, southwest, west, northwest) as well as up, down, in, and out. These are represented in object form as n_obj, ne_obj, e_obj, se_obj, s_obj, sw_obj, w_obj, nw_obj, u_obj, d_obj, in_obj, and out_obj (each derived from the direction class). Each of these objects is defined in the object library as a child of the compass parent object, and each defines an appropriate dir_to property reflecting the direction of travel it describes. For instance, n_obj.dir_to equals n_to, in_obj.dir_to equals in_to, etc. It is the dir_to property of a direction that is used to map out travel from one location to another.</p>
</div>
<div class="paragraph">
<p>The living_room object&#8217;s description claims that the kitchen is to the south and the back hallway is to the east, but neither connection is known to the game until those directional links are added to the object definition (and, of course, assuming that the kitchen and back_hallway objects also exist).</p>
</div>
<div class="paragraph">
<p>room living_room "living room"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>long_desc</p>
</div>
<div class="paragraph">
<p>"The living room is about fifteen feet</p>
</div>
<div class="paragraph">
<p>square, with a bay window on one wall</p>
</div>
<div class="paragraph">
<p>looking out over the garden. The kitchen</p>
</div>
<div class="paragraph">
<p>is to the south, or you can walk into the</p>
</div>
<div class="paragraph">
<p>back hallway to the east."</p>
</div>
<div class="paragraph">
<p>s_to kitchen</p>
</div>
<div class="paragraph">
<p>e_to back_hallway</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The player will now be able to go either south or east from the kitchen. Keep in mind, however, that it is possible to make travel from one location to another one-way. In order to allow the player to travel back to the living kitchen in the same direction, you would need to add</p>
</div>
<div class="paragraph">
<p>n_to living_room</p>
</div>
<div class="paragraph">
<p>to the kitchen object and</p>
</div>
<div class="paragraph">
<p>w_to living_room</p>
</div>
<div class="paragraph">
<p>to the back_hallway object.</p>
</div>
</div>
<div class="sect2">
<h3 id="_characters"><a class="anchor" href="#_characters"></a>10.2. Characters</h3>
<div class="paragraph">
<p>The basic character class takes care of defining the basic elements that the library expects character objects to have. These include obvious attributes such as living, as well as useful properties such as capacity and holding for carrying objects. Also importantly, the character class defines its pronouns property as:</p>
</div>
<div class="paragraph">
<p>pronouns "he", "him", "his", "himself"</p>
</div>
<div class="paragraph">
<p>The accompanying female_character class (which is identical to the character class but with the female attribute) defines:</p>
</div>
<div class="paragraph">
<p>pronouns "she", "her", "her", "herself"</p>
</div>
<div class="paragraph">
<p>The order of pronouns is <em>subject</em>, <em>object</em>, <em>possessive</em>, <em>reflexive</em>, so that the library can refer to the pronouns property to print appropriate messages such as:</p>
</div>
<div class="paragraph">
<p>print capital object.pronoun; " is in the room."</p>
</div>
<div class="paragraph">
<p>He is in the room.</p>
</div>
<div class="paragraph">
<p>print "Bob gave "; object.pronoun #2; " the box. "</p>
</div>
<div class="paragraph">
<p>Bob gave him the box.</p>
</div>
<div class="paragraph">
<p>print capital object.pronoun; " opened "; object.pronoun #3; " box. "</p>
</div>
<div class="paragraph">
<p>He opened his box.</p>
</div>
<div class="paragraph">
<p>print capital object.pronoun; " looked at "; object.pronoun #4; " in the mirror. "</p>
</div>
<div class="paragraph">
<p>He looked at himself in the mirror.</p>
</div>
<div class="paragraph">
<p>A player_character class is also provided that will usually be the basis for the player character (PC). A game&#8217;s PC can be defined easily as:</p>
</div>
<div class="paragraph">
<p>player_character you "you"</p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>The PC is by default named in the second person (as opposed to the first-person &#8220;I&#8221; or the third-person &#8220;he&#8221;, &#8220;she&#8221;, &#8220;it&#8221;, or &#8220;them&#8221;). To change to another form, it will be necessary to redefine the PC&#8217;s pronouns property accordingly, as well as to change the global variable player_person<sup class="footnote">[<a id="_footnoteref_49" class="footnote" href="#_footnotedef_49" title="View footnote.">49</a>]</sup> (which defaults to 2) to 1 or 3, as appropriate, and optionally to give a plural PC the plural attribute (in the rare case where that may be desired).</p>
</div>
</div>
<div class="sect2">
<h3 id="_character_responses"><a class="anchor" href="#_character_responses"></a>10.3. Character responses</h3>
<div class="paragraph">
<p>One thing that will likely be important for NPCs (non-player characters) is enabling them to respond to questions and otherwise interact with the player. This is traditionally accomplished by implementing NPC responses to the verbroutines DoAsk, DoTell, DoShow, and DoGive.</p>
</div>
<div class="paragraph">
<p>&gt;ASK GUSTAV ABOUT APPLE</p>
</div>
<div class="paragraph">
<p>"I must admit I rather prefer them to bananas," Gustav tells you.</p>
</div>
<div class="paragraph">
<p>&gt;GIVE BANANA TO GUSTAV</p>
</div>
<div class="paragraph">
<p>"No, thank you," Gustav says. "I would rather have an apple."</p>
</div>
<div class="paragraph">
<p>The grammar for asking an NPC about something looks something like this:</p>
</div>
<div class="paragraph">
<p>verb "ask"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>living about xobject DoAsk</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The object is the NPC being asked, the xobject is whatever is being asked about, and the verbroutine is DoAsk. The response is handled in the NPC&#8217;s after property routine:</p>
</div>
<div class="paragraph">
<p>after</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoAsk</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>select xobject</p>
</div>
<div class="paragraph">
<p>case apple</p>
</div>
<div class="paragraph">
<p>"\"I must admit I rather prefer them to bananas,\" Gustav tells you."</p>
</div>
<div class="paragraph">
<p>case else</p>
</div>
<div class="paragraph">
<p>return false ! important</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>Note that it&#8217;s necessary to return false if the routine fails to find an appropriate response.</p>
</div>
<div class="paragraph">
<p>DoTell responses are handled similarly to DoAsk, since the NPC is the object and whatever is being told about is the xobject:</p>
</div>
<div class="paragraph">
<p>verb "tell"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>living about xobject DoTell</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DoGive and DoShow, however, are handled differently, since the word ordering is different:</p>
</div>
<div class="paragraph">
<p>verb "give"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object to living DoGive</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>verb "show"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>object to living DoShow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For these, the after property routine will look something like:</p>
</div>
<div class="paragraph">
<p>after</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>object DoAsk</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>xobject DoGive</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>select object</p>
</div>
<div class="paragraph">
<p>case banana</p>
</div>
<div class="paragraph">
<p>"\"No thank you,\" Gustav says. \"I would rather have an apple.\""</p>
</div>
<div class="paragraph">
<p>case else</p>
</div>
<div class="paragraph">
<p>return false</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>xobject DoShow</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>select object</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>case else</p>
</div>
<div class="paragraph">
<p>return false</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
</div>
<div class="sect2">
<h3 id="_scenery_and_components"><a class="anchor" href="#_scenery_and_components"></a>10.4. Scenery and Components</h3>
<div class="paragraph">
<p>It has become more and more expected of interactive fiction that objects mentioned in the textual description of a location should be implemented in a manipulable fashion. With this goal in mind, something like the following would be less than desirable:</p>
</div>
<div class="paragraph">
<p>PRISON CELL</p>
</div>
<div class="paragraph">
<p>The entire place is probably just shy of fifty square feet. The bars on the doors and single small window ensure that you won&#8217;t be going anywhere anytime soon.</p>
</div>
<div class="paragraph">
<p>&gt;EXAMINE WINDOW</p>
</div>
<div class="paragraph">
<p>You don&#8217;t need to use the word "window".</p>
</div>
<div class="paragraph">
<p>Depending on the game (and, arguably, the player) that response may be somewhat jarring in light of the window just mentioned in the room description. It may be gotten around by adding an embellishment like this:</p>
</div>
<div class="paragraph">
<p>scenery prison_window "prison window"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>in prison_cell</p>
</div>
<div class="paragraph">
<p>article "a"</p>
</div>
<div class="paragraph">
<p>adjectives "single", "small", "prison", "cell"</p>
</div>
<div class="paragraph">
<p>noun "window"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The most important characteristic of a scenery object created using the scenery class is that it will not be listed by the library as part of the room&#8217;s contents (in this case, the contents of prison_cell). The scenery class is otherwise relatively unadorned: looking at a scenery object will produce a generic message about seeing nothing special, attempting to take a scenery object will generate a generic &#8220;You can&#8217;t take that&#8221;-type response, etc.<sup class="footnote">[<a id="_footnoteref_50" class="footnote" href="#_footnotedef_50" title="View footnote.">50</a>]</sup> The scenery object can be fleshed out with a long_desc property and before/after handling for desired verbroutines.</p>
</div>
<div class="paragraph">
<p>Components are similar to scenery objects in two important respects in that they&#8217;re not intended to be taken and they&#8217;re not specifically listed in any itemization of contents. Consider a case where a game might contain a machine (for fun, a nefarious machine) and a lever. The intention might be that the lever can be manipulated separately from the nefarious machine itself so that &#8220;&gt;PULL LEVER&#8221; elicits a different response than simply &#8220;&gt;PULL MACHINE&#8221;. At the same time, however, something like the following is probably undesirable:</p>
</div>
<div class="paragraph">
<p>A nefarious machine whirs and buzzes in the corner.</p>
</div>
<div class="paragraph">
<p>There is also a lever here.</p>
</div>
<div class="paragraph">
<p>What is needed is a way to implement the lever as a separate though inseparable part of the nefarious machine object. The component class provides for this.</p>
</div>
<div class="paragraph">
<p>component lever "lever"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>part_of nefarious_machine</p>
</div>
<div class="paragraph">
<p>article "a"</p>
</div>
<div class="paragraph">
<p>noun "lever"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The part_of property specifies the primary object (the nefarious machine) of which this object (the lever) is a component; it is not necessary to place the component object <em>in</em> the primary object; in fact, doing so will probably lead to all manner of extra complications especially if the primary object isn&#8217;t a container or platform, isn&#8217;t open, etc. A component object will automatically be available to the player whenever the primary object is.</p>
</div>
</div>
<div class="sect2">
<h3 id="_doors"><a class="anchor" href="#_doors"></a>10.5. Doors</h3>
<div class="paragraph">
<p>Doors are fairly common objects, and a given game&#8212;&#8203;particularly one with a significant number of indoor locations&#8212;&#8203;will likely make frequent use of them. The unfortunate thing is that they can be somewhat finicky and repetitive to code, ensuring that they respond to opening, closing, locking (if applicable), providing an appropriate open or closed description, and behaving appropriately from either side. The object library&#8217;s door class provides a simple implementation that will largely suffice for most basic doors.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how to put a simple door between the kitchen and living_room locations created above:</p>
</div>
<div class="paragraph">
<p>door kitchen_door "kitchen door"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>between kitchen, living_room</p>
</div>
<div class="paragraph">
<p>article "the"</p>
</div>
<div class="paragraph">
<p>adjective "kitchen"</p>
</div>
<div class="paragraph">
<p>noun "door"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The between property takes care of making the room available in both locations as well as determining where the player travels to when leaving either location. In order to incorporate the door into the kitchen and living_room locations, it&#8217;s only necessary to change the two room objects to specify:</p>
</div>
<div class="paragraph">
<p>n_to</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>return kitchen_door.door_to</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>for the kitchen object and</p>
</div>
<div class="paragraph">
<p>s_to</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>return kitchen_door.door_to</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>for the living_room object. Notice that the use of kitchen_door.door_to is the same for both; the door class&#8217;s door_to property returns the appropriate location from the between property depending on where the player is when the door_to property is checked. The door_to property will also automatically result in an attempt to open a closed door (by calling the DoOpen verbroutine), resulting in an additional turn by calling the Main routine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vehicles"><a class="anchor" href="#_vehicles"></a>10.6. Vehicles</h3>
<div class="paragraph">
<p>Less frequently used but somewhat more complex than doors are vehicles. Anything from a car to a UFO to a wild zebra may make an appearance in a game, and often it is necessary that the player be able to use that object&#8212;&#8203;whatever it may be&#8212;&#8203;as a means of moving around the game&#8217;s geography. The object library&#8217;s vehicle class provides a generic class that can be used to implement any of these (just for starters), allowing behavior like the following:</p>
</div>
<div class="paragraph">
<p>&gt;GET ON THE HORSE</p>
</div>
<div class="paragraph">
<p>You get on the wild mustang.</p>
</div>
<div class="paragraph">
<p>&gt;RIDE WEST</p>
</div>
<div class="paragraph">
<p>Dusty Trail</p>
</div>
<div class="paragraph">
<p>This trail leads southwest out of town toward the river valley and the old prospector&#8217;s camp.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before using vehicle objects it is necessary to set the compiler flag USE_VEHICLES.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a vehicle from the vehicle class like this:</p>
</div>
<div class="paragraph">
<p>vehicle mustang "wild mustang"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>article "a"</p>
</div>
<div class="paragraph">
<p>adjectives "wild", "untamed"</p>
</div>
<div class="paragraph">
<p>nouns "mustang", "horse"</p>
</div>
<div class="paragraph">
<p>vehicle_verb "ride"</p>
</div>
<div class="paragraph">
<p>preposition "on", "off"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The vehicle_verb property provides one or more synonyms for the verb used to &#8220;drive&#8221; this particular vehicle object. In the case of a horse, it is appropriately &#8220;ride&#8221;. The preposition property defaults in the vehicle class itself defaults to &#8220;in&#8221; and &#8220;out&#8221;, but in the case of a horse should be changed to the more suitable &#8220;on&#8221; and &#8220;off&#8221;.</p>
</div>
<div class="paragraph">
<p>It is also necessary to provide grammar to relate the words in the vehicle_verb list to the object library&#8217;s DoMoveInVehicle routine.Grammar he following is recommended:</p>
</div>
<div class="paragraph">
<p>verb "&lt;verb1&gt;"[, "&lt;verb2&gt;",&#8230;&#8203;]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoMoveinVehicle</p>
</li>
<li>
<p>object DoMoveinVehicle</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, for our horse &#8220;vehicle&#8221;, something like the following might suffice:</p>
</div>
<div class="paragraph">
<p>verb "ride</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoMoveinVehicle</p>
</li>
<li>
<p>object DoMoveinVehicle</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to easily maintain some control over whether a vehicle is currently capable of moving via the vehicle_move property. This property, which is true by default, can return false (after printing an appropriate failure message) if the vehicle is currently not capable of being driven (or ridden or sailed or whatever the appropriate action may be).</p>
</div>
<div class="paragraph">
<p>To prevent the player from riding the mustang until the horse has been fed, implement a vehicle_move property similar to this:</p>
</div>
<div class="paragraph">
<p>vehicle_move</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>if self is not fed ! assuming a 'fed' attribute</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"This horse isn&#8217;t going anywhere until you feed it."</p>
</div>
<div class="paragraph">
<p>return false</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>else</p>
</div>
<div class="paragraph">
<p>return true</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>And finally, it is also necessary to give the vehicle some idea about where it is able to move. Every location that a vehicle may travel to must contain the vehicle in a vehicle_path property. For instance, a location to which both the mustang and a wagon object may move would need:</p>
</div>
<div class="paragraph">
<p>vehicle_path mustang, wagon</p>
</div>
</div>
<div class="sect2">
<h3 id="_plural_and_identical_objects"><a class="anchor" href="#_plural_and_identical_objects"></a>10.7. Plural and Identical Objects</h3>
<div class="paragraph">
<p>Sometimes it is desirable to have a player be able to (or required to) refer to multiple objects as a group, or to be able to refer to only a certain number of such objects out of a larger group even if all the objects are identical. The object library&#8217;s plural_class and identical_class make these sorts of things possible.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before using plural or identical objects it is necessary to set the compiler flag USE_PLURAL_OBJECTS and call InitPluralObjects (usually in the Init routine).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The plural_class is used in situations where two or more similar objects may be grouped together and referred to as a unit. For instance:</p>
</div>
<div class="paragraph">
<p>There are a fudge sundae and a butterscotch sundae here.</p>
</div>
<div class="paragraph">
<p>&gt;GET BUTTERSCOTCH SUNDAE</p>
</div>
<div class="paragraph">
<p>Taken.</p>
</div>
<div class="paragraph">
<p>&gt;GET FUDGE SUNDAE</p>
</div>
<div class="paragraph">
<p>Taken.</p>
</div>
<div class="paragraph">
<p>All&#8217;s well and good. But it would also maybe be nice to be able to take both at the same time.</p>
</div>
<div class="paragraph">
<p>&gt;GET SUNDAES</p>
</div>
<div class="paragraph">
<p>fudge sundae: Taken.</p>
</div>
<div class="paragraph">
<p>butterscotch sundae: Taken.</p>
</div>
<div class="paragraph">
<p>That&#8217;s where the plural_class comes in.</p>
</div>
<div class="paragraph">
<p>plural_class sundaes "sundaes"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>plural_of fudge_sundae, butterscotch_sundae</p>
</div>
<div class="paragraph">
<p>noun "sundaes"</p>
</div>
<div class="paragraph">
<p>single_noun "sundae"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>object fudge_sundae "fudge sundae"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>article "a"</p>
</div>
<div class="paragraph">
<p>adjective "fudge"</p>
</div>
<div class="paragraph">
<p>noun "sundae"</p>
</div>
<div class="paragraph">
<p>plural_is sundaes</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>object butterscotch_sundae "butterscotch_sundae"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>article "a"</p>
</div>
<div class="paragraph">
<p>adjective "butterscotch"</p>
</div>
<div class="paragraph">
<p>noun "sundae"</p>
</div>
<div class="paragraph">
<p>plural_is sundaes</p>
</div>
<div class="paragraph">
<p>}<sup class="footnote">[<a id="_footnoteref_51" class="footnote" href="#_footnotedef_51" title="View footnote.">51</a>]</sup></p>
</div>
<div class="paragraph">
<p>The plural_of property on the plural class enumerates the objects which it encompasses; each object encompassed by the plural class then points back to the plural class in its plural_is property.</p>
</div>
<div class="paragraph">
<p>The plural_verbs property governs which verbs may be used on the plural object. The plural_class class itself provides a default plural_verbs which allows basic verbroutines like DoLook, DoDrop, DoGet, and DoPutIn to be used. Other actions will result in a response on the order of &#8220;You&#8217;ll have to do that one at a time&#8221;. To change the possible actions for a given plural object, provide a custom plural_verbs replacement that returns true only if the verbroutine global variable is a valid verbroutine for the object.</p>
</div>
<div class="paragraph">
<p>Now, consider the following:</p>
</div>
<div class="paragraph">
<p>There are five bananas here.</p>
</div>
<div class="paragraph">
<p>&gt;GET TWO BANANAS</p>
</div>
<div class="paragraph">
<p>banana: Taken.</p>
</div>
<div class="paragraph">
<p>banana: Taken.</p>
</div>
<div class="paragraph">
<p>&gt;INVENTORY</p>
</div>
<div class="paragraph">
<p>You are carrying two bananas.</p>
</div>
<div class="paragraph">
<p>&gt;LOOK</p>
</div>
<div class="paragraph">
<p>There are three bananas here.</p>
</div>
<div class="paragraph">
<p>Something like that can be done easily by creating an identical object from the identical_class in the object library. The identical_class is similar to the plural_class except for a couple details of implementation and behavior.</p>
</div>
<div class="paragraph">
<p>identical_class bananas "bananas"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>plural_of banana1, banana2, banana3,</p>
</div>
<div class="paragraph">
<p>banana4, banana5</p>
</div>
<div class="paragraph">
<p>noun "bananas"</p>
</div>
<div class="paragraph">
<p>single_noun "banana"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>object banana1 "banana"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>noun "banana"</p>
</div>
<div class="paragraph">
<p>identical_to bananas</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>banana1 banana2 "banana"<sup class="footnote">[<a id="_footnoteref_52" class="footnote" href="#_footnotedef_52" title="View footnote.">52</a>]</sup></p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>banana1 banana3 "banana"</p>
</div>
<div class="paragraph">
<p>\{}</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>The identical object bananas will allow a player to use all the facilities of the identical_class in order to manipulate one or more otherwise indistinguishable banana objects.<sup class="footnote">[<a id="_footnoteref_53" class="footnote" href="#_footnotedef_53" title="View footnote.">53</a>]</sup></p>
</div>
</div>
<div class="sect2">
<h3 id="_attachables"><a class="anchor" href="#_attachables"></a>10.8. Attachables</h3>
<div class="paragraph">
<p>Ropes and other similar objects&#8212;&#8203;anything, really, which ties onto something else or, even worse, ties <em>between</em> two or more objects&#8212;&#8203;are notoriously difficult to code. Safe advice on how to code a rope used to be: code a block of wood instead. The object library provides an attachable class which has successfully been used for everything from ropes to blankets to three-ended chains and darts.<sup class="footnote">[<a id="_footnoteref_54" class="footnote" href="#_footnotedef_54" title="View footnote.">54</a>]</sup></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before using attachable objects it is necessary to set the compiler flag USE_ATTACHABLES.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The attachable class&#8217;s attachable_to property contains a list of all items to which the object may be attached. The attached_to property contains a list of all the objects to which the attachable object currently <em>is</em> attached. When defined, it must be given an appropriate number of elements. For instance, something that is attachable to only one object would have</p>
</div>
<div class="paragraph">
<p>attached_to 0</p>
</div>
<div class="paragraph">
<p>while, for instance, a rope that can be tied between two other objects must have:</p>
</div>
<div class="paragraph">
<p>attached_to 0, 0</p>
</div>
<div class="paragraph">
<p>The 0 value (the nothing object) is just an empty placeholder for the attached_to property. If the attachable&#8217;s initial state is to be attached to a given object, that object can be used instead. For example, a harness that is already attached to a wagon, but which can also be attached to six horses (objects) at the same time, might be initialized as follows:</p>
</div>
<div class="paragraph">
<p>attached_to wagon, 0, 0, 0, 0, 0, 0</p>
</div>
<div class="paragraph">
<p>with room for seven elements.</p>
</div>
<div class="paragraph">
<p>The attach_take and attach_drop properties are less frequently used. If attach_take is true, an attempt to take (via calling the DoTake verbroutine) the attachable is made before attaching (or detaching) it. If attach_drop is true, the object is automatically dropped after it is attached.</p>
</div>
<div class="paragraph">
<p>The attach_verbs and detach_verbs properties contain lists of all valid verbs to attach or detach the object. The DoAttachObject and DoDetachObject verbroutines can be used by all basic attachables, with new grammar specified for the object (corresponding exactly to the verb lists in attach_verbs and detach_verbs) as in:</p>
</div>
<div class="paragraph">
<p>verb "&lt;verb1&gt;"[, "&lt;verb2&gt;",&#8230;&#8203;]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoVague</p>
</li>
<li>
<p>object DoAttachObject</p>
</li>
<li>
<p>object "to" xobject DoAttachObject</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>For instance:</p>
</div>
<div class="paragraph">
<p>verb "tie", "fasten"</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoVague</p>
</li>
<li>
<p>object DoAttachObject</p>
</li>
<li>
<p>object "to" xobject DoAttachObject</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DoAttachObject expects a second object (the xobject) to be given as the target for the object to be attached to; the routine itself contains appropriate error-handling if only one object is supplied.</p>
</div>
<div class="paragraph">
<p>To attach and detach an attachable from an object, use the AttachObject and DetachObject routines:</p>
</div>
<div class="paragraph">
<p>AttachObject(attachable_object, to_object)</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>DetachObject(attachable_object, from_object)</p>
</div>
<div class="paragraph">
<p>Either routine returns true on success or false on failure.</p>
</div>
<div class="paragraph">
<p>To check if a particular object is kept immovable by an attachable, call ObjectisAttached(this_object); it returns the object number of the attachable keeping this_object from moving, or false if there is no such impediment and this_object is free to move. Also, any routine that moves the player or player&#8217;s parent&#8212;&#8203;such as MovePlayer or DoMoveinVehicle&#8212;&#8203;should call MoveAllAttachables to reconcile the location of attached objects (since they are not necessarily connected via the object tree).</p>
</div>
<div class="paragraph">
<p>Objects with the mobile attribute set may be dragged. Non-attachables may have an attach_immobile property, which governs whether they may be pulled, dragged, etc. by returning false when freely moveable or true if something is keeping it from moving. In the second case, attach_immobile is also responsible for printing any explanatory message.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_should_i_be_able_to_do_now_9"><a class="anchor" href="#_what_should_i_be_able_to_do_now_9"></a>10.9. <em>What Should I Be Able To Do Now?</em></h3>
<div class="paragraph">
<p>By now you should feel comfortable experimenting with the classes in the object library. You should be able to look at the various implementations of scenery, components, characters, doors, vehicles, identical/plural objects, and attachables in existing code (such as in <strong>sample.hug</strong>) and not only understand what the various properties of the objects are for, but also how to modify them to achieve a desired effect.</p>
</div>
<div class="paragraph">
<p>You should, for instance, be able to implement the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Two rooms, such as a garden and a shed;</p>
</li>
<li>
<p>A door leading into the shed;</p>
</li>
<li>
<p>Various static scenery objects in each location;</p>
</li>
<li>
<p>A dozen identical roses;</p>
</li>
<li>
<p>A rideable bicycle vehicle kept from going anywhere by a locked attachable bicycle lock; and even</p>
</li>
<li>
<p>A gardener character who is capable of answering questions about the things in the shed and the garden.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_features"><a class="anchor" href="#_advanced_features"></a>11. ADVANCED FEATURES</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_display_object"><a class="anchor" href="#_the_display_object"></a>11.1. The Display Object</h3>
<div class="paragraph">
<p>The display object is a special object with which the Hugo Engine interacts to allow the program to be knowledgeable about as well as set certain characteristics of the display. The engine provides access to the following read-only properties (although the names themselves are defined in <strong>hugolib.h</strong>):</p>
</div>
<div class="paragraph">
<p>screenwidth - width of the display, in characters</p>
</div>
<div class="paragraph">
<p>screenheight - height of the display, in characters</p>
</div>
<div class="paragraph">
<p>linelength - width of the current text window</p>
</div>
<div class="paragraph">
<p>windowlines - height of the current text window</p>
</div>
<div class="paragraph">
<p>cursor_column - horizontal and vertical position of</p>
</div>
<div class="paragraph">
<p>cursor_row - the cursor in the current text window</p>
</div>
<div class="paragraph">
<p>hasgraphics - returns true if graphic display is available</p>
</div>
<div class="paragraph">
<p>hasvideo - returns true if video playback is available</p>
</div>
<div class="paragraph">
<p>pointer_x - horizontal mouse position (in characters)</p>
</div>
<div class="paragraph">
<p>pointer_y - vertical mouse position (in characters)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this usage, <code>display</code> refers to the virtual screen usable by the Hugo Engine. Depending on the mode of the engine, this may refer to the full-screen (as for terminal-based ports) or a subsection thereof (i.e., for the engine running in a window).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additionally, the following display object properties are also writable by a program:</p>
</div>
<div class="paragraph">
<p>title_caption - sets the window title for the game (where supported)</p>
</div>
<div class="paragraph">
<p>needs_repaint - set to true when the GUI display changes (such as when window size is changed); may then be reset to false by the program</p>
</div>
<div class="paragraph">
<p>The Hugo Library also defines the normal read/writable:</p>
</div>
<div class="paragraph">
<p>statusline_height - of the last-printed status line</p>
</div>
<div class="paragraph">
<p>In order for the engine to properly identify the display object, it selects the object (if any) with the textual name <code>(display)</code>, i.e., an object that is defined as</p>
</div>
<div class="paragraph">
<p>object display</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>with no explicit textual name. This is how the Hugo Library defines the display object, so that the various display object properties are readable as display.screenheight, display.cursor_column, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_windows"><a class="anchor" href="#_windows"></a>11.2. Windows</h3>
<div class="paragraph">
<p>It is possible to create an enclosing window within the full-screen display for text output. Cursor position, line-wrapping, etc. are trimmed to the boundaries of the current window. Cursor positioning and window boundaries are always calculated in fixed-width character dimensions. Various syntaxes for the window statement are:</p>
</div>
<div class="paragraph">
<p>window 0 Restores full-screen output</p>
</div>
<div class="paragraph">
<p>window n Creates a window of n lines, bordering</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;} on the top edge and sides of the full-screen</p>
</div>
<div class="paragraph">
<p>window l, t, r, b Creates a window with the left-top</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;} corner (l, t) and the right-bottom corner (r, b), where these coordinates are character coordinates on the full-screen</p>
</div>
<div class="paragraph">
<p>window Redraws the last-defined window</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>Each usage except <code>window 0</code> is followed by a block of code during which, normally, text is output to the window. The window (i.e., its boundaries) exists for the duration of the <code>{&#8230;&#8203;}</code> block. After it finishes, the top of the main text window is redefined as being immediately below the lowest-drawn window. To clear the record of any window and restore the main text window to the full-screen, use <code>window 0</code>.</p>
</div>
<div class="paragraph">
<p>A windowing library file exists called <strong>window.h</strong> which defines a window_class and the associated properties so a window object can be created via:</p>
</div>
<div class="paragraph">
<p>window_class &lt;window name&gt; "title"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>win_position &lt;screen column&gt;, &lt;screen row&gt;</p>
</div>
<div class="paragraph">
<p>win_size &lt;columns&gt;, &lt;rows&gt;</p>
</div>
<div class="paragraph">
<p>win_textcolor &lt;text color&gt;</p>
</div>
<div class="paragraph">
<p>win_backcolor &lt;background color&gt;</p>
</div>
<div class="paragraph">
<p>win_titlecolor &lt;title text&gt;</p>
</div>
<div class="paragraph">
<p>win_titleback &lt;title background&gt;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The window_class also incorporates the property routines win_init, win_clear, and win_end.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It may be important to keep in mind that measures such as display.screenwidth may change during execution, particularly in a graphical user interface windowing environment which allows resizing of the Hugo program window. For this reason, it is wise to resample display.&lt;property&gt; whenever a window is to be drawn instead of basing the coordinates on, for example, a set of boundaries calculated during program initialization.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_reading_and_writing_files"><a class="anchor" href="#_reading_and_writing_files"></a>11.3. Reading And Writing Files</h3>
<div class="paragraph">
<p>There may be times when it will be useful to store data in a file for later recovery. The most basic way of doing this involves</p>
</div>
<div class="paragraph">
<p>x = save</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>x = restore</p>
</div>
<div class="paragraph">
<p>where save and restore return a true value if successful, or a false value if for some reason they fail. The user is promped for a filename, and, in either case, the entire set of game data&#8212;&#8203;including object locations, variable values, arrays, attributes, etc.--is saved or restored, as appropriate.</p>
</div>
<div class="paragraph">
<p>Other times, it may be desirable to save only certain values. For example, a particular game may allow a player to create certain player characteristics or other &#8220;remembered data&#8221; that can be restored in the same game or in different games. To accomplish this, use the writefile and readfile operations.</p>
</div>
<div class="paragraph">
<p>The structure</p>
</div>
<div class="paragraph">
<p>writefile &lt;filename&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>will, at the start of the writefile block, open &lt;filename&gt; for writing and position &lt;filename&gt; to the start of the (empty) file. (If the file exists, it will be cleared/erased.) At the conclusion of the block, the file will be closed again.</p>
</div>
<div class="paragraph">
<p>Within a writefile block, write individual values using</p>
</div>
<div class="paragraph">
<p>writeval &lt;value1&gt;[, &lt;value2&gt;, &#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>where one or more values can be specified.</p>
</div>
<div class="paragraph">
<p>To read the file, use the structure</p>
</div>
<div class="paragraph">
<p>readfile &lt;filename&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>which will contain the assignment</p>
</div>
<div class="paragraph">
<p>x = readval</p>
</div>
<div class="paragraph">
<p>for each value to be read, where x can be any storage type such as a variable, property, etc.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>local count, test</p>
</div>
<div class="paragraph">
<p>count = 10</p>
</div>
<div class="paragraph">
<p>writefile "testfile"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>writeval count, "telephone", 10</p>
</div>
<div class="paragraph">
<p>test = FILE_CHECK</p>
</div>
<div class="paragraph">
<p>writeval test</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>if test ~= FILE_CHECK ! an error has occurred</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "An error has occurred."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>will write the variable count, the dictionary entry <code>telephone</code>, and the value 10 to <code>testfile</code>. Then,</p>
</div>
<div class="paragraph">
<p>local a, b, c, test</p>
</div>
<div class="paragraph">
<p>readfile "testfile"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>a = readval</p>
</div>
<div class="paragraph">
<p>b = readval</p>
</div>
<div class="paragraph">
<p>c = readval</p>
</div>
<div class="paragraph">
<p>test = readval</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>if test ~= FILE_CHECK ! an error has occurred</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>print "Error reading file."</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>If the readfile block executes successfully, a will be equal to the former value count, b will be <code>telephone</code>, and c will be 10.</p>
</div>
<div class="paragraph">
<p>The constant FILE_CHECK, defined in <strong>hugolib.h</strong>, is useful because writefile and readfile provide no explicit error return to indicate failure. FILE_CHECK is a unique two-byte sequence that can be used to test for success. In the writefile block, if the block is exited prematurely due to an error, test will never be set to FILE_CHECK. The if statement following the block tests for this. In the readfile block, test will only be set to FILE_CHECK if the sequence of readval functions finds the expected number of values in <code>testfile</code>. If there are too many or too few values in <code>testfile</code>, or if an error forces an early exit from the readfile block, test will equal a value other than FILE_CHECK.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mouse_input"><a class="anchor" href="#_mouse_input"></a>11.4. Mouse Input</h3>
<div class="paragraph">
<p>If the player clicks somewhere on the screen with the mouse pointer (or taps on the screen on a handheld device, or whatever the comparable action is for the platform in question), a Hugo program may read that action. Specifically, a pause statement, which normally stores the ASCII value of a keypress in word[0], will instead store the value MOUSE_CLICK (defined in <strong>hugolib.h</strong> to be 1) if the mouse is clicked while the engine is waiting for that keypress.</p>
</div>
<div class="paragraph">
<p>A mouse click (or equivalent action) has no effect during player input&#8212;&#8203;i.e., when the program is waiting for a typed command&#8212;&#8203;unless the individual port provides some behavior such as bringing up a menu, entering a double-clicked word into the input line, etc. The running Hugo program cannot itself monitor mouse input during typed input.</p>
</div>
<div class="paragraph">
<p>As mentioned above, the display object provides the read-only properties pointer_x and pointer_y, which give the horizontal and vertical position of the mouse (in characters) respectively.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a>12. RESOURCES</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_creating_and_using_resources"><a class="anchor" href="#_creating_and_using_resources"></a>12.1. Creating And Using Resources</h3>
<div class="paragraph">
<p>The engine allows a Hugo program to access external media data (called resources) compiled into a specially formatted file called a resourcefile. Resourcefiles contain sounds, music, images, and video files used by the program. A resourcefile is created using:</p>
</div>
<div class="paragraph">
<p>resource "&lt;resourcefile&gt;"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"&lt;resource1&gt;"</p>
</div>
<div class="paragraph">
<p>"&lt;resource2&gt;"</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The &lt;resourcefile&gt; name must be 8 or fewer alphanumeric characters which will automatically be converted to all-uppercase. (The reason for this is to maximize portability across different platforms and filenaming systems&#8212;&#8203;unfortunately not everyone adheres to the same conventions, so this restriction is intended to reduce filenaming to the lowest common denominator.)</p>
</div>
<div class="paragraph">
<p>Currently Hugo supports as resources: JPEG graphic files, RIFF/WAV audio samples, MOD/S3M/XM music modules, MIDI and MP3 songs, and MPEG and AVI movies.<sup class="footnote">[<a id="_footnoteref_55" class="footnote" href="#_footnotedef_55" title="View footnote.">55</a>]</sup></p>
</div>
<div class="paragraph">
<p>For example, here is an imaginary example resourcefile compiled on a Windows platform:</p>
</div>
<div class="paragraph">
<p>resource "GAMERES1"</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>"c:\hugo\graphics\logo.jpg"</p>
</div>
<div class="paragraph">
<p>"h:\data\scenic panorama.jpg"</p>
</div>
<div class="paragraph">
<p>"h:\data\background.jpg"</p>
</div>
<div class="paragraph">
<p>"c:\music\intro_theme.s3m"</p>
</div>
<div class="paragraph">
<p>"c:\music\theme2.xm"</p>
</div>
<div class="paragraph">
<p>"c:\sounds\sample1.wav"</p>
</div>
<div class="paragraph">
<p>"c:\sounds\sample2.wav"</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>It doesn&#8217;t matter that the nomenclature within a resource definition is non-portable. In the above <code>GAMERES1</code>, for example, the filenaming is specific to Windows, since that&#8217;s where the original files will be found. The resources, however, are accessed only by their filenames as entries in the resourcefile index. Therefore, after <code>GAMERES1</code> is created, the three pictures are referred to as <code>logo</code>, <code>scenic panorama</code> and <code>background</code> within the resourcefile <code>GAMERES1</code>. (Note that any drive/path or extension specification is removed and not included in the index. As a result, two resources with the same name but different paths/extensions cannot be written into the same resourcefile.)</p>
</div>
<div class="paragraph">
<p>Because of the relative non-portability of resourcefiles (plus the additional time it may take on slower machines to index and consolidate potentially hundreds of kilobytes of data), it is recommended that resources be compiled from separate source files than the rest of a Hugo game.</p>
</div>
<div class="paragraph">
<p>The library extension <strong>resource.h</strong> provides useful routines for managing resources in a Hugo program. It also defines the following potential values for the system_status global, which may be tested after a resource operation. If system_status is non-zero (where zero signifies normal status), it will contain one of the following values<sup class="footnote">[<a id="_footnoteref_56" class="footnote" href="#_footnotedef_56" title="View footnote.">56</a>]</sup>:</p>
</div>
<div class="paragraph">
<p>-1 STAT_UNAVAILABLE</p>
</div>
<div class="paragraph">
<p>101 STAT_NOFILE</p>
</div>
<div class="paragraph">
<p>102 STAT_NORESOURCE</p>
</div>
<div class="paragraph">
<p>103 STAT_LOADERROR</p>
</div>
</div>
<div class="sect2">
<h3 id="_pictures"><a class="anchor" href="#_pictures"></a>12.2. Pictures</h3>
<div class="paragraph">
<p>A picture is displayed as a resource in a resourcefile using:</p>
</div>
<div class="paragraph">
<p>picture "&lt;resourcefile&gt;", "&lt;picture&gt;"</p>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="paragraph">
<p>picture "gameres1", "logo"</p>
</div>
<div class="paragraph">
<p>(It is also possible to enter the path of a picture directly, such as</p>
</div>
<div class="paragraph">
<p>picture "c:\hugo\graphics\logo.jpg"</p>
</div>
<div class="paragraph">
<p>but since this path/filename is obviously operating-system-specific, it should be used for testing only. If the named picture is not found in the given resourcefile, the engine will similarly try to load the picture as an independent file from the current search path(s).)</p>
</div>
<div class="paragraph">
<p>The picture will be displayed in the currently defined text window. If the picture is smaller than the current window, it will be centered. If larger, it will be shrunk to fit. If the particular version of the Hugo Engine being used is not graphics-enabled, picture will have no effect. If the picture is not found or a recoverable error occurs during loading, normal engine execution continues uninterrupted.</p>
</div>
<div class="paragraph">
<p><strong>resource.h</strong> provides a couple of useful routines for managing graphics:</p>
</div>
<div class="paragraph">
<p>LoadPicture("resourcefile", "picture")</p>
</div>
<div class="paragraph">
<p>LoadPicture("picture")</p>
</div>
<div class="paragraph">
<p>PictureinText("file", "pic", width, height, preserve)</p>
</div>
<div class="paragraph">
<p>PictureinText("picture", width, height, preserve)</p>
</div>
<div class="paragraph">
<p>LoadPicture is essentially a simple wrapper for the picture statement, providing the additional service of checking display.hasgraphics to ensure that graphics display is available. PictureinText is slightly more complex. It allows a picture to be displayed in the normal flow of text in the main window. The &lt;width&gt; and &lt;height&gt; arguments give the fixed-width character dimensions of the display area. (Because displays differ in their character dimensions, it is recommended to calculate these based on display.screenwidth and display.screenheight instead of passing absolute values.) The &lt;preserve&gt; parameter, if given, specifies the number of lines (i.e., one or more) at the top of the screen that are protected from scrolling off.</p>
</div>
<div class="paragraph">
<p>(Either LoadPicture or PictureinText can be called with only a picture, i.e., with no resourcefile named. In this case, <strong>resource.h</strong> will attempt to find the resource in the last used resourcefile, stored in the last_resource_file global. Wherever possible, however, it is recommended to always specify the resourcefile name.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_sound_and_music"><a class="anchor" href="#_sound_and_music"></a>12.3. Sound And Music</h3>
<div class="paragraph">
<p>Sounds and music are played as follows:</p>
</div>
<div class="paragraph">
<p>sound [repeat] &lt;resourcefile&gt;, &lt;resource&gt;[, &lt;vol&gt;]</p>
</div>
<div class="paragraph">
<p>music [repeat] &lt;resourcefile&gt;, &lt;resource&gt;[, &lt;vol&gt;]</p>
</div>
<div class="paragraph">
<p>The repeat keyword is optional; if supplied, it forces the engine to repeatedly play the sound/music resource until further notice (i.e., until it is stopped or a new sound/music resource is played). The &lt;vol&gt; argument is optional. If given, it gives a volume percentage (0-100) for playback. Currently playing sound or music can be stopped using:</p>
</div>
<div class="paragraph">
<p>sound 0</p>
</div>
<div class="paragraph">
<p>music 0</p>
</div>
<div class="paragraph">
<p><strong>resource.h</strong> provides a pair of wrapper functions to manage playing of audio resources:</p>
</div>
<div class="paragraph">
<p>PlaySound(resourcefile, sample, loop, force)</p>
</div>
<div class="paragraph">
<p>PlayMusic(resourcefile, song, loop, force)</p>
</div>
<div class="paragraph">
<p>In either case, if &lt;loop&gt; is true, it has the same effect as using the repeat token after sound or music. If &lt;force&gt; is true, the sample or song is restarted even if that same sample or song is already playing (otherwise the PlaySound or PlayMusic call will have essentially no effect). To stop a sample or song from playing via the library interface, use:</p>
</div>
<div class="paragraph">
<p>PlaySound(SOUND_STOP)</p>
</div>
<div class="paragraph">
<p>PlayMusic(MUSIC_STOP)</p>
</div>
<div class="paragraph">
<p>(where SOUND_STOP and MUSIC_STOP are constants defined in <strong>resource.h</strong>).</p>
</div>
</div>
<div class="sect2">
<h3 id="_video"><a class="anchor" href="#_video"></a>12.4. Video</h3>
<div class="paragraph">
<p>Video is displayed similarly to static graphic images (that is, it is displayed in the currently window) and controlled similarly to music and sound. The syntax for playing video looks like:</p>
</div>
<div class="paragraph">
<p>video [repeat] &lt;resfile&gt;, &lt;res&gt;[, &lt;vol&gt;, &lt;bkground&gt;]</p>
</div>
<div class="paragraph">
<p>The video resource res is played from resourcefile resfile, at the volume vol. If the optional repeat keyword is used, the video plays in a loop, starting over at the beginning when it hits the end. Normally the engine waits for the video to finish playing. If the bkground parameter is given and is non-false, the video plays in the background and the program continues to run, the player may type input, etc. In combination with the repeat token, this is useful for creating background/scenic animations.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary_of_keywords_and_commands"><a class="anchor" href="#_summary_of_keywords_and_commands"></a>Appendix A: SUMMARY OF KEYWORDS AND COMMANDS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Logical AND.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = &lt;value1&gt; and &lt;value2&gt;</p>
</div>
<div class="paragraph">
<p><strong>Result:</strong> x will be true if &lt;value1&gt; and &lt;value2&gt; are both non-zero, false if one or both is zero.</p>
</div>
<div class="paragraph">
<p>anything</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Object specifier in grammar syntax line, indicating that any nameable object in the object tree is valid.</p>
</div>
<div class="paragraph">
<p>array</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> When used as a data type modifier, specifies that the following value is to be treated as an array address.</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong> &lt;var1&gt; = array &lt;var2&gt;[&lt;n&gt;]</p>
</div>
<div class="paragraph">
<p>The variable &lt;var2&gt; will be treated as an array address.</p>
</div>
<div class="paragraph">
<p>break</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Terminates the immediate enclosing loop.</p>
</div>
<div class="paragraph">
<p><strong>Example:</strong> while &lt;expression1&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>while &lt;expression2&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>if &lt;expression3&gt;</p>
</div>
<div class="paragraph">
<p>break</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The break statement, if encountered, will terminate the innermost loop.</p>
</div>
<div class="paragraph">
<p>call</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Calls a routine indirectly, i.e., when the routine address has been stored in a variable, object property, etc.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> call &lt;value&gt;[(&lt;arg1&gt;, &lt;arg2&gt;,&#8230;&#8203;)]</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>x = call &lt;value&gt;(&#8230;&#8203;)</p>
</div>
<div class="paragraph">
<p>where &lt;value&gt; is a valid data type holding the routine address.</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> When used as a function, returns the value returned by the specified routine.</p>
</div>
<div class="paragraph">
<p>capital</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Print statement modifier, indicating that the next word should be printed with the first letter capitalized.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> print capital &lt;address&gt;</p>
</div>
<div class="paragraph">
<p>where &lt;address&gt; is any dictionary word, such as, for example, an object.name property.</p>
</div>
<div class="paragraph">
<p>case</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Specifies a conditional case in a select structure.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> select &lt;val&gt;</p>
</div>
<div class="paragraph">
<p>case &lt;case1&gt;[, &lt;case2&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>case &lt;case3&gt;[, &lt;case4&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>where &lt;val&gt; is value such as a variable, routine return value, object property, array element, etc., and each &lt;case&gt; is a single value for comparison (not an expression).</p>
</div>
<div class="paragraph">
<p>child</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = child(&lt;parent&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> The object number of the immediate child object of &lt;parent&gt;, or 0 if &lt;parent&gt; has no children.</p>
</div>
<div class="paragraph">
<p>children</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = children(&lt;parent&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> The number of child objects possessed by &lt;parent&gt;.</p>
</div>
<div class="paragraph">
<p>cls</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Clears the current text window repositions the output coordinates at the bottom left of the text window.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> cls</p>
</div>
<div class="paragraph">
<p>color (colour)</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Sets the display colors for text output.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> color &lt;foreground&gt;[, &lt;background&gt;]</p>
</div>
<div class="paragraph">
<p>where &lt;background&gt; is optional</p>
</div>
<div class="paragraph">
<p><strong>Parameters:</strong> Standard color values for &lt;foreground&gt; and &lt;background&gt; with constants defined in <strong>hugolib.h</strong> (see page 64) are:</p>
</div>
<div class="paragraph">
<p>0 Black BLACK</p>
</div>
<div class="paragraph">
<p>1 Blue BLUE</p>
</div>
<div class="paragraph">
<p>2 Green GREEN</p>
</div>
<div class="paragraph">
<p>3 Cyan CYAN</p>
</div>
<div class="paragraph">
<p>4 Red RED</p>
</div>
<div class="paragraph">
<p>5 Magenta MAGENTA</p>
</div>
<div class="paragraph">
<p>6 Brown BROWN</p>
</div>
<div class="paragraph">
<p>7 White WHITE</p>
</div>
<div class="paragraph">
<p>8 Dark gray DARK_GRAY</p>
</div>
<div class="paragraph">
<p>9 Light blue LIGHT_BLUE</p>
</div>
<div class="paragraph">
<p>10 Light green LIGHT_GREEN</p>
</div>
<div class="paragraph">
<p>11 Light cyan LIGHT_CYAN</p>
</div>
<div class="paragraph">
<p>12 Light red LIGHT_RED</p>
</div>
<div class="paragraph">
<p>13 Light magenta LIGHT_MAGENTA</p>
</div>
<div class="paragraph">
<p>14 Light yellow LIGHT_YELLOW</p>
</div>
<div class="paragraph">
<p>15 Bright white BRIGHT_WHITE</p>
</div>
<div class="paragraph">
<p>dict</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Dynamically creates a new dictionary entry at runtime.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = dict(&lt;array&gt;, &lt;maxlen&gt;)</p>
</div>
<div class="paragraph">
<p>x = dict(parse$, &lt;maxlen&gt;)</p>
</div>
<div class="paragraph">
<p>where &lt;array&gt; or parse$ holds the string to be written into the dictionary, and &lt;maxlen&gt; represents the maximum number of characters to be written. Returns the new dictionary address.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Space should be reserved for any dictionary entries to be created at runtime using the $MAXDICTEXTEND setting during compilation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>do</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Marks the starting point of a do-while loop.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> do</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>while &lt;expr&gt;</p>
</div>
<div class="paragraph">
<p>The loop will continue to run as long as &lt;expr&gt; holds true.</p>
</div>
<div class="paragraph">
<p>elder</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = elder(&lt;object&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> The object number of the object preceding &lt;object&gt; on the same branch in the object tree. The reverse of sibling.</p>
</div>
<div class="paragraph">
<p>eldest</p>
</div>
<div class="paragraph">
<p>Same as child.</p>
</div>
<div class="paragraph">
<p>else</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> In an if-elseif-else conditional block, indicates the default operation if no previous condition has been met.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> if &lt;condition&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>else</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>elseif</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> In an if-elseif-else conditional block, indicates a condition that will be checked only if no preceding condition has been met.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> if &lt;condition1&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>elseif &lt;condition2&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>elseif &lt;condition3&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>false</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> A predefined constant value: 0.</p>
</div>
<div class="paragraph">
<p>for</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Loop construction.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> for (&lt;initial&gt;; &lt;test&gt;; &lt;mod&gt;)</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>for &lt;var&gt; in &lt;object&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>For the first form, where &lt;initial&gt; is the initial assignment expression (e.g. a = 1), &lt;test&gt; is the test expression (e.g. a &lt; 10), and &lt;mod&gt; is the modifying expression (e.g. a = a + 1). The loop will execute as long as &lt;test&gt; holds true.</p>
</div>
<div class="paragraph">
<p>The second form loops through all the children of &lt;object&gt; (if any), setting &lt;var&gt; to each child object in sequence.</p>
</div>
<div class="paragraph">
<p>held</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Object specifier in grammar syntax line, indicating that any single object possessed by the player object is valid.</p>
</div>
<div class="paragraph">
<p>hex</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Print statement modifier signifying that the following value is not a dictionary address, but should be printed as a hexadecimal number.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> print hex &lt;var&gt;</p>
</div>
<div class="paragraph">
<p>where, for example, &lt;var&gt; is equal to 26, will print &#8220;1A&#8221;.</p>
</div>
<div class="paragraph">
<p>if</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> A conditional expression.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> if &lt;condition&gt;</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>where &lt;condition&gt; is an expression or value, will run the following statement block only if &lt;condition&gt; is true.</p>
</div>
<div class="paragraph">
<p>in</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> When used in an object definition, places the object in the object tree as a possession of the specified parent. When used in an expression, returns true if the object is in the specified parent.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> in &lt;parent&gt;</p>
</div>
<div class="paragraph">
<p>or, for example:</p>
</div>
<div class="paragraph">
<p>if &lt;object&gt; [not] in &lt;parent&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>input</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Receive input from keyboard, storing the dictionary addresses of the individual words in the word array. Unrecognized words are given a value of 0.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> input</p>
</div>
<div class="paragraph">
<p>is</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Attribute assignment/testing.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> &lt;object&gt; is [not] &lt;attribute&gt;</p>
</div>
<div class="paragraph">
<p><strong>Usage:</strong> When used as an assignment on its own, will set (or clear, if not is used) the specified attribute for the given object. May also be used in an expression.</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> When used in an expression, returns true if &lt;object&gt; has the specified attribute set (or cleared, if not is used). Otherwise, it returns false.</p>
</div>
<div class="paragraph">
<p>jump</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Jumps to a specified label.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> jump &lt;label&gt;</p>
</div>
<div class="paragraph">
<p>where a unique &lt;label&gt; exists on a separate line somewhere in the program, in the form:</p>
</div>
<div class="paragraph">
<p>:&lt;label&gt;</p>
</div>
<div class="paragraph">
<p>local</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Defines one or more variables local to the current routine.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> local &lt;var1&gt;[, &lt;var2&gt;, &lt;var3&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>locate</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Sets the cursor position within the current text window.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> locate(&lt;row&gt;, &lt;column&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The maximum horizontal/vertical cursor position is constrained by the boundaries of the current text window. The cursor position is calculated in fixed-width character coordinates.</p>
</div>
<div class="paragraph">
<p>move</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Moves an object with all its possessions to a new parent.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> move &lt;object&gt; to &lt;new parent&gt;</p>
</div>
<div class="paragraph">
<p>multi</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Object specifier in grammar syntax line, indicating that multiple available objects are valid.</p>
</div>
<div class="paragraph">
<p>multiheld</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Object specifier in grammar syntax line, indicating that multiple objects possessed by the player object are valid.</p>
</div>
<div class="paragraph">
<p>multinotheld</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Object specifier in grammar syntax line, indicating that multiple objects explicitly not held by the player object are valid.</p>
</div>
<div class="paragraph">
<p>music</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Load and play a music resource (if audio output is available).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> music [repeat] "file", "song"[, vol]</p>
</div>
<div class="paragraph">
<p>music 0</p>
</div>
<div class="paragraph">
<p>where &lt;file&gt; is a compiled Hugo resourcefile, and &lt;song&gt; is a music module in MOD, S3M, or XM format. The optional &lt;vol&gt; argument, if given, ranges from 0 to 100 and gives a percentage of volume for playback. If the repeat token is used, the song continues to loop until either a new song is played, or the current song is stopped (using <code>music 0</code>).</p>
</div>
<div class="paragraph">
<p>nearby</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Used in an object definition to place the object in the specified position in the object tree.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> nearby &lt;object&gt;</p>
</div>
<div class="paragraph">
<p>Gives the current object the same parent as &lt;object&gt;.</p>
</div>
<div class="paragraph">
<p>nearby</p>
</div>
<div class="paragraph">
<p>Gives the current object the same parent as the last-defined object.</p>
</div>
<div class="paragraph">
<p>newline</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Print statement modifier, indicating that a line feed and carriage return should be issued if the current output position is not already at the start of a blank line.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> print newline</p>
</div>
<div class="paragraph">
<p>not</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Logical not.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = not &lt;value&gt;</p>
</div>
<div class="paragraph">
<p>&lt;object&gt; is not &lt;attribute&gt;</p>
</div>
<div class="paragraph">
<p><strong>Result:</strong> In the first example, x will be true if &lt;value&gt; is false, or false if &lt;value&gt; is true.</p>
</div>
<div class="paragraph">
<p>In the second, the specified attribute will be cleared for &lt;object&gt; when used alone as an assignment. As part of an expression, it will return true only if &lt;object&gt; does not have &lt;attribute&gt; set.</p>
</div>
<div class="paragraph">
<p>notheld</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Object specifier in grammar syntax line, indicating that a single object explicitly not held by the player object is valid.</p>
</div>
<div class="paragraph">
<p>number</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> When used in a grammar syntax line, indicates that a single positive integer number is valid.</p>
</div>
<div class="paragraph">
<p>When used as a print statement modifier, indicates that the following value is not a dictionary address, but should be printed as a positive integer number.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> (for usage as a print statement modifier)</p>
</div>
<div class="paragraph">
<p>print number &lt;val&gt;</p>
</div>
<div class="paragraph">
<p>where, for example, &lt;val&gt; is equal to 100, will print &#8220;100&#8221; instead of the word beginning at the address 100 in the dictionary table.</p>
</div>
<div class="paragraph">
<p>object</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Global variable holding the object number of the direct object, if any, specified in the input line.</p>
</div>
<div class="paragraph">
<p>When used in a grammar syntax line, indicates that a single available object is valid.</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Logical OR.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = &lt;value1&gt; or &lt;value2&gt;</p>
</div>
<div class="paragraph">
<p><strong>Result:</strong> x will be true if either &lt;value1&gt; or &lt;value2&gt; is non-false, or false if both are false.</p>
</div>
<div class="paragraph">
<p>parent</p>
</div>
<div class="paragraph">
<p>(Usage 1)</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = parent(&lt;object&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> The object number of &lt;object&gt;'s parent object.</p>
</div>
<div class="paragraph">
<p>(Usage 2)</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> When used in a grammar syntax line, indicates that the domain for validating the availability of the specified direct object should be set to the parent object specified in the input line.</p>
</div>
<div class="paragraph">
<p>parse$</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Read-only engine variable that contains either the offending portion of an invalid input line or any section of the input line enclosed in quotes.</p>
</div>
<div class="paragraph">
<p>pause</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Pauses until a key is pressed. The value of the key is stored in word[0].</p>
</div>
<div class="paragraph">
<p>picture</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Load and display an image resource in the currently defined window (if graphics are available).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> picture "&lt;resourcefile&gt;", "&lt;picture&gt;"</p>
</div>
<div class="paragraph">
<p>picture "&lt;picturefile&gt;"</p>
</div>
<div class="paragraph">
<p>where, while &lt;resourcefile&gt; is optional, it is very highly recommended (otherwise, &lt;picturefile&gt; will likely not be named in a cross-platform portable format).</p>
</div>
<div class="paragraph">
<p>playback</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Plays back recorded commands from a file in place of keyboard input (by prompting the user).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = playback</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>print</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Print text output.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> print &lt;output&gt;</p>
</div>
<div class="paragraph">
<p>where &lt;output&gt; can consist of both test strings enclosed in quotation marks (&#8220;&#8230;&#8203;&#8221;), and values representing dictionary addresses, such as object names. Separate components of &lt;output&gt; are separated by a semicolon (<code>;</code>). Each component may also be preceded by a modifier such as capital, hex, or number.</p>
</div>
<div class="paragraph">
<p>printchar</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Prints a character or series of characters at the current cursor position. No newline is printed.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> printchar &lt;val1&gt;[, &lt;val2&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>quit</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Terminates the game loop.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> quit</p>
</div>
<div class="paragraph">
<p>random</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Engine function which generates a random number.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = random(&lt;val&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> Where &lt;val&gt; is a positive integer number, will return a random number between 1 and &lt;val&gt;, inclusively.</p>
</div>
<div class="paragraph">
<p>readfile</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> A structure that allows values to be read from a file written using writefile.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> readfile &lt;filename&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The file is opened and positioned to the start at the beginning of the readfile block, and closed at the end.</p>
</div>
<div class="paragraph">
<p>readval</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Reads a value in a readfile block.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = readval</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> The value read, or 0 in the case of an error. Use the FILE_CHECK constant defined in <strong>hugolib.h</strong> to determine if a readfile block has been executed successfully.</p>
</div>
<div class="paragraph">
<p>recordoff</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Ends recording commands to a file.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = recordoff</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>recordon</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Begins recording commands to a file (by prompting the user).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = recordon</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>remove</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Removes an object from the object tree.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> remove &lt;object&gt;</p>
</div>
<div class="paragraph">
<p>(The same as: move &lt;object&gt; to 0)</p>
</div>
<div class="paragraph">
<p>restart</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Reloads the initial game data from the .HEX file and calls the Init routine.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = restart</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> The restart statement does not technically restart the engine; the game loop continues uninterrupted after Init is called, only with the game data restored to its initial state.</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>restore</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Restores a saved game&#8217;s state data from a previously saved file (by prompting the user).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = restore</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>return</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Returns from a called routine.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> return [&lt;expression&gt;]</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> Returns &lt;expression&gt; if provided, otherwise returns false.</p>
</div>
<div class="paragraph">
<p>run</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Runs an object property routine if one exists.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> run &lt;object&gt;.&lt;property&gt;</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> None; any value returned by the property routine is discarded.</p>
</div>
<div class="paragraph">
<p>runevents</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Calls all events which are either global or currently within the event scope of the player object.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> runevents</p>
</div>
<div class="paragraph">
<p>save</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Saves the current game state to a file (by prompting the user).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = save</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>scriptoff</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Turns transcription off.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = scriptoff</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>scripton</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Turns transcription (i.e., recording output to a file or to a printer) on.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = scripton</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>select</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Specifies the value for comparison in a select-case conditional structure.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> select &lt;val&gt;</p>
</div>
<div class="paragraph">
<p>case &lt;case1&gt;[, &lt;case2&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>case &lt;case3&gt;[, &lt;case4&gt;,&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>where &lt;val&gt; is value such as a variable, routine return value, object property, array element, etc., and each &lt;case&gt; is a single value for comparison (not an expression).</p>
</div>
<div class="paragraph">
<p>serial$</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Read-only engine variable that contains the serial number as written by the compiler.</p>
</div>
<div class="paragraph">
<p>sibling</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = sibling(&lt;object&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> The number of the object next to &lt;object&gt; on the same branch of the object tree.</p>
</div>
<div class="paragraph">
<p>sound</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Load and play an audio sample resource (if waveform audio output is available).</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> sound [repeat] "file", "sample"[, vol]</p>
</div>
<div class="paragraph">
<p>sound 0</p>
</div>
<div class="paragraph">
<p>where &lt;file&gt; is a compiled Hugo resourcefile, and &lt;sample&gt; is a waveform sample in RIFF/WAV format. The optional &lt;vol&gt; argument, if given, ranges from 0 to 100 and gives a percentage of volume for playback. If the repeat token is used, the sample continues to loop until either a new sample is played, or the current sample is stopped (using <code>sound 0</code>).</p>
</div>
<div class="paragraph">
<p>string</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> When used in a grammar syntax line, indicates that a string array enclosed in quotation marks is valid.</p>
</div>
<div class="paragraph">
<p>When used as a function, stores a dictionary entry in a string array.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = string(&lt;array&gt;, &lt;dict&gt;, &lt;maxlen&gt;)</p>
</div>
<div class="paragraph">
<p>x = string(&lt;array&gt;, parse$, &lt;maxlen&gt;)</p>
</div>
<div class="paragraph">
<p>where &lt;array&gt; is an array address, stores the either the dictionary entry given by &lt;dict&gt; or the contents of parse$ as a series of characters, to a maximum of &lt;maxlen&gt; characters. Returns the length of the string stored in &lt;array&gt;.</p>
</div>
<div class="paragraph">
<p>system</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Built-in function to call low-level system functions.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> system(&lt;function&gt;)</p>
</div>
<div class="paragraph">
<p><strong><span class="underline">FUNC. LABEL DESCRIPTION</span></strong></p>
</div>
<div class="paragraph">
<p>11 READ_KEY Read keypress</p>
</div>
<div class="paragraph">
<p>21 NORMALIZE_RANDOM Make random values predictable</p>
</div>
<div class="paragraph">
<p>22 INIT_RANDOM Restore <code>random</code> random values</p>
</div>
<div class="paragraph">
<p>31 PAUSE_SECOND Pause for one second</p>
</div>
<div class="paragraph">
<p>32 PAUSE_100TH_SECOND Pause for 1/100th of a second</p>
</div>
<div class="paragraph">
<p>41 GAME_RESET Returns true after restore or undo</p>
</div>
<div class="paragraph">
<p>51 SYSTEM_TIME Stores system time in parse$</p>
</div>
<div class="paragraph">
<p>61 MINIMAL_INTERFACE Returns true for minimal ports</p>
</div>
<div class="paragraph">
<p><em>(Labels are defined as a constants in</em> <strong>system.h</strong><em>.)</em></p>
</div>
<div class="paragraph">
<p>If &lt;function&gt; is unavailable, the engine may set system_status to -1 (STAT_UNAVAILABLE).</p>
</div>
<div class="paragraph">
<p>text</p>
</div>
<div class="paragraph">
<p>text to &lt;val&gt; Sends text to the array table, beginning at address &lt;val&gt;.</p>
</div>
<div class="paragraph">
<p>text to 0 Restores normal printing.</p>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> In a print statement, prints blank spaces in the current background color to the specified position.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> print to &lt;val&gt;</p>
</div>
<div class="paragraph">
<p>where &lt;val&gt; is a positive integer less than or equal to the maximum column position</p>
</div>
<div class="paragraph">
<p>true</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Predefined constant: 1.</p>
</div>
<div class="paragraph">
<p>undo</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Attempts to recover the state of the game data before the last player command.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = undo</p>
</div>
<div class="paragraph">
<p><strong>Value:</strong> True if successful, false if not.</p>
</div>
<div class="paragraph">
<p>verb</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Begins definition of a regular verb. Upon returning true from the verb routine, Main is called.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> verb "&lt;word1&gt;"[, "&lt;word2&gt;",&#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>while</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Component of while or do-while loop construct.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> while &lt;expr&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>do</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>while &lt;expr&gt;</p>
</div>
<div class="paragraph">
<p>where the loop will run as long as &lt;expr&gt; holds true.</p>
</div>
<div class="paragraph">
<p>window</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Switches output to the status window.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> window a[, b, c, d]</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>window</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;}</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>window 0</p>
</div>
<div class="paragraph">
<p>If only a single value &lt;a&gt; is given, a window of &lt;a&gt; lines from the top of the screen is created. If more values are given, a window from top-left (a, b) to bottom-right (c, d) is created. If no values are given, the last-defined window is recreated. The new boundaries apply for the length of the following <code>{&#8230;&#8203;}</code> code block.</p>
</div>
<div class="paragraph">
<p><code>window 0</code> restores full-screen display. There is no following code block.</p>
</div>
<div class="paragraph">
<p>writefile</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> A structure that writes values to a file that may be read using readfile.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> writefile &lt;filename&gt;</p>
</div>
<div class="paragraph">
<p>\{</p>
</div>
<div class="paragraph">
<p>&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>The file is opened and positioned to the start at the beginning of the writefile block, and closed at the end.</p>
</div>
<div class="paragraph">
<p>writeval</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Writes one or more values in a writefile block.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> writefile value1[, value2, &#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>xobject</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Global variable holding the object number of the indirect object, if any, specified in the input line.</p>
</div>
<div class="paragraph">
<p>When used in a grammar syntax line, indicates that a single available object is valid.</p>
</div>
<div class="paragraph">
<p>xverb</p>
</div>
<div class="paragraph">
<p><strong>Description:</strong> Begins definition of non-action verb. Upon returning from the verb routine, Main is not called.</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> xverb "&lt;word1&gt;"[, "&lt;word2&gt;", &#8230;&#8203;]</p>
</div>
<div class="paragraph">
<p>younger</p>
</div>
<div class="paragraph">
<p>Same as sibling.</p>
</div>
<div class="paragraph">
<p>youngest</p>
</div>
<div class="paragraph">
<p><strong>Syntax:</strong> x = youngest(&lt;parent&gt;)</p>
</div>
<div class="paragraph">
<p><strong>Return value:</strong> The number of the object most recently added to parent &lt;parent&gt;.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_hugo_library"><a class="anchor" href="#_the_hugo_library"></a>Appendix B: THE HUGO LIBRARY</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_attributes_2"><a class="anchor" href="#_attributes_2"></a>B.1. ATTRIBUTES</h3>
<div class="paragraph">
<p>clothing for objects that can be worn</p>
</div>
<div class="paragraph">
<p>container if an object can hold other objects</p>
</div>
<div class="paragraph">
<p>enterable if an object is enterable</p>
</div>
<div class="paragraph">
<p>female if a character is female</p>
</div>
<div class="paragraph">
<p>hidden if an object is not to be listed</p>
</div>
<div class="paragraph">
<p>known if an object is known to the player</p>
</div>
<div class="paragraph">
<p>light if an object is or provides light</p>
</div>
<div class="paragraph">
<p>living if an object is a character</p>
</div>
<div class="paragraph">
<p>lockable if an object can be locked</p>
</div>
<div class="paragraph">
<p>locked if an object is locked</p>
</div>
<div class="paragraph">
<p>mobile if an object can be rolled, etc.</p>
</div>
<div class="paragraph">
<p>moved if an object has been moved</p>
</div>
<div class="paragraph">
<p>open if an object is open</p>
</div>
<div class="paragraph">
<p>openable if an object can be opened</p>
</div>
<div class="paragraph">
<p>platform if other objects can be placed on it</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>container and platform are generally mutually exclusive)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>plural for plural objects (i.e., some hats)</p>
</div>
<div class="paragraph">
<p>quiet if container or platform is quiet (i.e., the initial listing of contents is suppressed)</p>
</div>
<div class="paragraph">
<p>readable if an object can be read</p>
</div>
<div class="paragraph">
<p>special for miscellaneous use</p>
</div>
<div class="paragraph">
<p>static if an object cannot be taken</p>
</div>
<div class="paragraph">
<p>switchable if an object can be turned on or off</p>
</div>
<div class="paragraph">
<p>switchedon if an object is on</p>
</div>
<div class="paragraph">
<p>transparent if an object is not opaque</p>
</div>
<div class="paragraph">
<p>unfriendly if a character is unfriendly</p>
</div>
<div class="paragraph">
<p>visited if a room has been visited</p>
</div>
<div class="paragraph">
<p>worn if an object is being worn</p>
</div>
<div class="paragraph">
<p><em>For system use:</em></p>
</div>
<div class="paragraph">
<p>already_listed if object has been pre-listed (i.e., before, for example, a WhatsIn listing)</p>
</div>
<div class="paragraph">
<p>workflag for system use</p>
</div>
</div>
<div class="sect2">
<h3 id="_globals"><a class="anchor" href="#_globals"></a>B.2. GLOBALS</h3>
<div class="paragraph">
<p><em>The first 12 globals are pre-defined by the compiler:</em></p>
</div>
<div class="paragraph">
<p>object direct object of a verb action</p>
</div>
<div class="paragraph">
<p>xobject indirect object</p>
</div>
<div class="paragraph">
<p>self self-referential object</p>
</div>
<div class="paragraph">
<p>words total number of words</p>
</div>
<div class="paragraph">
<p>player the player object</p>
</div>
<div class="paragraph">
<p>actor player, or another char. (for scripts)</p>
</div>
<div class="paragraph">
<p>location location of the player object</p>
</div>
<div class="paragraph">
<p>verbroutine the verb routine</p>
</div>
<div class="paragraph">
<p>endflag if not false (0), run EndGame</p>
</div>
<div class="paragraph">
<p>prompt for the player input line</p>
</div>
<div class="paragraph">
<p>objects the total number of objects</p>
</div>
<div class="paragraph">
<p>system_status after certain operations</p>
</div>
<div class="paragraph">
<p><em>Game setup global variables:</em></p>
</div>
<div class="paragraph">
<p>MAX_SCORE total possible score</p>
</div>
<div class="paragraph">
<p>MAX_RANK up to x levels of player ranking</p>
</div>
<div class="paragraph">
<p>player_person first (1), second (2), or third (3)</p>
</div>
<div class="paragraph">
<p><em>Formatting/output global variables:</em></p>
</div>
<div class="paragraph">
<p>FORMAT specifies text-printing format</p>
</div>
<div class="paragraph">
<p>DEFAULT_FONT initially 0; could be set to, e.g., PROP_ON</p>
</div>
<div class="paragraph">
<p>STATUSTYPE 0=none, 1=score/turns, 2=time</p>
</div>
<div class="paragraph">
<p>TEXTCOLOR normal text color</p>
</div>
<div class="paragraph">
<p>BGCOLOR normal background color</p>
</div>
<div class="paragraph">
<p>SL_TEXTCOLOR statusline text color</p>
</div>
<div class="paragraph">
<p>SL_BGCOLOR statusline background color</p>
</div>
<div class="paragraph">
<p>INDENT_SIZE for paragraph indenting</p>
</div>
<div class="paragraph">
<p>AFTER_PERIOD string of spaces following a full-stop</p>
</div>
<div class="paragraph">
<p><em>Runtime global variables:</em></p>
</div>
<div class="paragraph">
<p>counter elapsed turns (or time, as desired)</p>
</div>
<div class="paragraph">
<p>event_flag set when something happens (see DoWait)</p>
</div>
<div class="paragraph">
<p>general for general use</p>
</div>
<div class="paragraph">
<p>light_source light source in location</p>
</div>
<div class="paragraph">
<p>number_scripts number of active character scripts</p>
</div>
<div class="paragraph">
<p>obstacle if something is stopping the player</p>
</div>
<div class="paragraph">
<p>score accumulated score</p>
</div>
<div class="paragraph">
<p>speaking if the player is talking to a character</p>
</div>
<div class="paragraph">
<p>verbosity for room descriptions</p>
</div>
<div class="paragraph">
<p>it_obj to reference objects via pronouns</p>
</div>
<div class="paragraph">
<p>her_obj</p>
</div>
<div class="paragraph">
<p>him_obj</p>
</div>
<div class="paragraph">
<p>them_obj</p>
</div>
<div class="paragraph">
<p><em>The following are generally for system use, but may be accessed if necessary:</em></p>
</div>
<div class="paragraph">
<p>customerror_flag true once CustomError is called</p>
</div>
<div class="paragraph">
<p>last_object set by Perform to value of object</p>
</div>
<div class="paragraph">
<p>list_nest used by ListObjects</p>
</div>
<div class="paragraph">
<p>need_newline true when newline should be printed</p>
</div>
<div class="paragraph">
<p>old_location whenever location changes</p>
</div>
<div class="paragraph">
<p>override_indent true if no indent should be printed</p>
</div>
</div>
<div class="sect2">
<h3 id="_arrays"><a class="anchor" href="#_arrays"></a>B.3. ARRAYS</h3>
<div class="paragraph">
<p><code>_temp_array[256]</code> used by string manipulation functions</p>
</div>
<div class="paragraph">
<p>menuitem[11] required by the Menu function</p>
</div>
<div class="paragraph">
<p>oldword[MAX_WORDS] for &#8220;again&#8221; command</p>
</div>
<div class="paragraph">
<p>parse_rank[] for library parser state</p>
</div>
<div class="paragraph">
<p>ranking[] in tandem with scoring</p>
</div>
<div class="paragraph">
<p>replace_pronoun[] for it_obj, him_obj, etc.</p>
</div>
<div class="paragraph">
<p>scriptdata[] for object scripts</p>
</div>
<div class="paragraph">
<p>setscript[] the actual scripts</p>
</div>
</div>
<div class="sect2">
<h3 id="_constants_2"><a class="anchor" href="#_constants_2"></a>B.4. CONSTANTS</h3>
<div class="paragraph">
<p>BANNER should be printed in every game header</p>
</div>
<div class="paragraph">
<p>MAX_SCRIPTS that may be active at one time</p>
</div>
<div class="paragraph">
<p>MAX_WORDS in a parsed input line</p>
</div>
<div class="paragraph">
<p><em>Color constants:</em></p>
</div>
<div class="paragraph">
<p>BLACK DARK_GRAY</p>
</div>
<div class="paragraph">
<p>BLUE LIGHT_BLUE</p>
</div>
<div class="paragraph">
<p>GREEN LIGHT_GREEN</p>
</div>
<div class="paragraph">
<p>CYAN LIGHT_CYAN</p>
</div>
<div class="paragraph">
<p>RED LIGHT_RED</p>
</div>
<div class="paragraph">
<p>MAGENTA LIGHT_MAGENTA</p>
</div>
<div class="paragraph">
<p>BROWN YELLOW</p>
</div>
<div class="paragraph">
<p>WHITE BRIGHT_WHITE</p>
</div>
<div class="paragraph">
<p>DEF_FOREGROUND DEF_BACKGROUND</p>
</div>
<div class="paragraph">
<p>DEF_SL_FOREGROUND DEF_SL_BACKGROUND</p>
</div>
<div class="paragraph">
<p>MATCH_FOREGROUND</p>
</div>
<div class="paragraph">
<p><em>Printing format mask constants (for setting the FORMAT global):</em></p>
</div>
<div class="paragraph">
<p>LIST_F print itemized lists, not sentences</p>
</div>
<div class="paragraph">
<p>NORECURSE_F do not recurse object contents</p>
</div>
<div class="paragraph">
<p>NOINDENT_F do not indent listings</p>
</div>
<div class="paragraph">
<p>DESCFORM_F alternate room description formatting</p>
</div>
<div class="paragraph">
<p>GROUPPLURALS_F list plurals together where possible</p>
</div>
<div class="paragraph">
<p><em>Font style mask constants (for use with the Font routine):</em></p>
</div>
<div class="paragraph">
<p>BOLD_ON BOLD_OFF boldface</p>
</div>
<div class="paragraph">
<p>ITALIC_ON ITALIC_OFF italics</p>
</div>
<div class="paragraph">
<p>UNDERLINE_ON UNDERLINE_OFF underline</p>
</div>
<div class="paragraph">
<p>PROP_ON PROP_OFF proportional printing</p>
</div>
<div class="paragraph">
<p><em>Additional constants:</em></p>
</div>
<div class="paragraph">
<p>UP_ARROW LEFT_ARROW for reading keystrokes</p>
</div>
<div class="paragraph">
<p>DOWN_ARROW ENTER_KEY</p>
</div>
<div class="paragraph">
<p>RIGHT_ARROW ESCAPE_KEY</p>
</div>
<div class="paragraph">
<p>MOUSE_CLICK</p>
</div>
<div class="paragraph">
<p>AND_WORD (&#8220;and&#8221;) IN_WORD (&#8220;in&#8221;)</p>
</div>
<div class="paragraph">
<p>ARE_WORD (&#8220;are&#8221;) IS_WORD (&#8220;is&#8221;)</p>
</div>
<div class="paragraph">
<p>HERE_WORD (&#8220;here&#8221;) ON_WORD (&#8220;on&#8221;)</p>
</div>
<div class="paragraph">
<p>FILE_CHECK for verifying writefile and</p>
</div>
<div class="paragraph">
<p>readfile operations</p>
</div>
<div class="paragraph">
<p>MENU_TEXTCOLOR normal menu text color</p>
</div>
<div class="paragraph">
<p>MENU_BGCOLOR normal menu background color</p>
</div>
<div class="paragraph">
<p>MENU_SELECTCOLOR menu highlight color</p>
</div>
<div class="paragraph">
<p>MENU_SELECTBGCOLOR menu highlight background color)</p>
</div>
</div>
<div class="sect2">
<h3 id="_properties_2"><a class="anchor" href="#_properties_2"></a>B.5. PROPERTIES</h3>
<div class="paragraph">
<p><em>The first 6 properties are pre-defined by the compiler:</em></p>
</div>
<div class="paragraph">
<p>name basic object name</p>
</div>
<div class="paragraph">
<p>before pre-verb routines</p>
</div>
<div class="paragraph">
<p>after post-verb routines</p>
</div>
<div class="paragraph">
<p>noun (nouns) noun(s) for referring to object</p>
</div>
<div class="paragraph">
<p>adjective (adjectives) adjective(s) describing object</p>
</div>
<div class="paragraph">
<p>article &#8220;a&#8221;, &#8220;an&#8221;, &#8220;the&#8221;, &#8220;some&#8221;, etc.</p>
</div>
<div class="paragraph">
<p>preposition (prep) &#8220;in&#8221;, &#8220;inside&#8221;, &#8220;outside of&#8221;, etc.<sup class="footnote">[<a id="_footnoteref_57" class="footnote" href="#_footnotedef_57" title="View footnote.">57</a>]</sup></p>
</div>
<div class="paragraph">
<p>capacity contains a value representing the capacity of a container or platform</p>
</div>
<div class="paragraph">
<p>exclude_from_all returns true if the object should be excluded from actions such as &#8220;&gt;GET ALL&#8221;</p>
</div>
<div class="paragraph">
<p>found_in in case of multiple virtual (not &#8220;physical&#8221;) parents, found_in may hold one or more object numbers; in this case, an <code>in &lt;object&gt;</code> specifier should probably not be included in the object definition, since found_in values are unrelated to <code>&lt;object&gt; in &lt;parent&gt;</code> relationships</p>
</div>
<div class="paragraph">
<p>holding contains a value representing the current encumbrance of a container or platform</p>
</div>
<div class="paragraph">
<p>in_scope contains a list of actors or objects to which the object is accessible beyond the use of the object tree or the found_in property; generally contains either the player object (or, less commonly, another character) and is set using PutInScope or cleared using RemoveFromScope</p>
</div>
<div class="paragraph">
<p>initial_desc routine; same as above, but if object has not been moved and an initial_desc exists, it is called in place of short_desc</p>
</div>
<div class="paragraph">
<p>list_contents a routine that overrides the normal contents listing for a room or object; normal listing is only carried out if it returns false</p>
</div>
<div class="paragraph">
<p>long_desc routine; detailed description of an object</p>
</div>
<div class="paragraph">
<p>misc miscellaneous use</p>
</div>
<div class="paragraph">
<p>parse_rank when there is ambiguity between similarly named objects, the parser will choose the one with a higher parse_rank over one with a lower (or non-existent) value; used when FindObject(&lt;object&gt;, 0) is called</p>
</div>
<div class="paragraph">
<p>pronoun &#8220;he&#8221;, &#8220;him&#8221;, &#8220;his&#8221; or equivalent, so that an object is properly referred to</p>
</div>
<div class="paragraph">
<p>reach for enterable objects such as chairs, vehicles, etc., if the accessibility of objects outside the object in question is limited, reach contains a list of the objects which may be accessed</p>
</div>
<div class="paragraph">
<p>react_before to allow reaction by an object that is not</p>
</div>
<div class="paragraph">
<p>react_after directly involved in the action</p>
</div>
<div class="paragraph">
<p>short_desc routine; basic &#8220;X is here&#8221; description</p>
</div>
<div class="paragraph">
<p>size for holding/inventory purposes, contains a value representing the size of an individual object</p>
</div>
<div class="paragraph">
<p>type to identify the type of object, used primarily by class definitions in <strong>objlib.h</strong></p>
</div>
<div class="paragraph">
<p><em>For room objects only:</em></p>
</div>
<div class="paragraph">
<p>n_to If a player can move to another</p>
</div>
<div class="paragraph">
<p>ne_to location to the north, then n_to</p>
</div>
<div class="paragraph">
<p>e_to holds the new room object; if the</p>
</div>
<div class="paragraph">
<p>se_to new object is to the south, s_to</p>
</div>
<div class="paragraph">
<p>s_to holds the new object, etc.</p>
</div>
<div class="paragraph">
<p>sw_to</p>
</div>
<div class="paragraph">
<p>w_to</p>
</div>
<div class="paragraph">
<p>nw_to</p>
</div>
<div class="paragraph">
<p>u_to</p>
</div>
<div class="paragraph">
<p>d_to</p>
</div>
<div class="paragraph">
<p>in_to</p>
</div>
<div class="paragraph">
<p>out_to</p>
</div>
<div class="paragraph">
<p>cant_go routine; message instead of the default &#8220;You can&#8217;t go that way.&#8221;</p>
</div>
<div class="paragraph">
<p><em>For non-room objects only:</em></p>
</div>
<div class="paragraph">
<p>contains_desc a routine that prints the introduction to a list of child objects, instead of the default &#8220;Inside &lt;object&gt; are &#8230;&#8203;&#8221; or &#8220;&lt;Character&gt; has &#8230;&#8203;&#8221;; contains_desc should always conclude with a semicolon (<code>;</code>) instead of a new line</p>
</div>
<div class="paragraph">
<p>desc_detail a routine that prints a parenthetical detail following an object listing, such as: "` (which is open)<code>"; the leading space is expected, as are the parentheses, and the print statement should conclude with a semicolon (</code>;`)</p>
</div>
<div class="paragraph">
<p>door_to for handling ‚Äú&gt;ENTER &lt;object&gt;‚Äú, holds the object number of the object to which an object enters (where the latter behaves as a door or portal)</p>
</div>
<div class="paragraph">
<p>ignore_response for characters, a routine that runs if the character ignores a player&#8217;s question, request, etc., instead of the default &#8220;X ignores you.&#8221;</p>
</div>
<div class="paragraph">
<p>inv_desc a routine that prints a special description when the object is listed as part of the player&#8217;s inventory; inv_desc should conclude with a semicolon (<code>;</code>)</p>
</div>
<div class="paragraph">
<p>key_object if lockable, contains the object number of the key</p>
</div>
<div class="paragraph">
<p>order_response also for characters, a routine that processes an imperative command addressed to the character by the player; it should return false if no response is provided</p>
</div>
<div class="paragraph">
<p>when_open routines; special short descriptions for</p>
</div>
<div class="paragraph">
<p>when_closed openable objects, where if one exists it is called in place of short_desc (when the object is open or not open, as appropriate) if an initial_desc does not exist, or if the object has been moved</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is recommended for property routines that print a description&#8212;&#8203;such as short_desc, initial_desc, etc.--that the routine not simply return true without printing anything as a means of &#8220;hiding&#8221; the object; such a method may throw text formatting into disarray. The proper means of omitting an object from a list is to set the hidden attribute.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For the display object only:</p>
</div>
<div class="paragraph">
<p><em>Read-only:</em></p>
</div>
<div class="paragraph">
<p>cursor_column horizontal and vertical position of</p>
</div>
<div class="paragraph">
<p>cursor_row the cursor in the current text window</p>
</div>
<div class="paragraph">
<p>hasgraphics true if graphics display is available</p>
</div>
<div class="paragraph">
<p>hasvideo true if video playback is available</p>
</div>
<div class="paragraph">
<p>linelength width of the current text window</p>
</div>
<div class="paragraph">
<p>pointer_x fixed-width column of last mouse click</p>
</div>
<div class="paragraph">
<p>pointer_y fixed-width row of last mouse click</p>
</div>
<div class="paragraph">
<p>screenwidth width of the display, in characters</p>
</div>
<div class="paragraph">
<p>screenheight height of the display, in characters</p>
</div>
<div class="paragraph">
<p>windowlines height of the current text window</p>
</div>
<div class="paragraph">
<p><em>Read/writable:</em></p>
</div>
<div class="paragraph">
<p>needs_repaint true if the operating system has requested a repaint (for ports which support it)</p>
</div>
<div class="paragraph">
<p>statusline_height the number of lines used to print the statusline</p>
</div>
<div class="paragraph">
<p>title_caption dictionary entry giving the full proper</p>
</div>
<div class="paragraph">
<p>name of the program (optional)</p>
</div>
<div class="paragraph">
<p>While screenwidth through title_caption are technically defined by <strong>hugolib.h</strong> as constants, they are used as property numbers to reference data on the display object.</p>
</div>
</div>
<div class="sect2">
<h3 id="_verb_routines"><a class="anchor" href="#_verb_routines"></a>B.6. VERB ROUTINES</h3>
<div class="paragraph">
<p>The library file <strong>verblib.h</strong> (included by <strong>hugolib.h</strong>) contains a fairly extensive set of basic actions, each of which takes the form Do&lt;verb&gt;, so that the action for taking an object is DoGet, the action for basic player movement is DoGo, etc. Each is called by the engine when a grammar syntax line specifying the particular verb routine is matched. The globals object and xobject are set up by the engine, and the routine is called with no parameters.</p>
</div>
<div class="paragraph">
<p>Here is a list of the provided verb routines for action verbs:</p>
</div>
<div class="paragraph">
<p>DoAsk, DoAskQuestion, DoClose, DoDrink, DoDrop, DoEat, DoEmpty, DoEnter, DoExit, DoGet, DoGive, DoGo, DoHello, DoHit, DoInventory, DoListen, DoLock, DoLook, DoLookAround, DoLookIn, DoLookThrough, DoLookUnder, DoMove, DoOpen, DoPutIn, DoPutOnGround, DoShow, DoSit, DoSwitchOff, DoSwitchOn, DoTakeOff, DoTalk, DoTell, DoUnlock, DoVague, DoWait, DoWaitforChar, DoWaitUntil, DoWear</p>
</div>
<div class="paragraph">
<p>Here are the non-action verb routines:</p>
</div>
<div class="paragraph">
<p>DoBrief, DoRecordOnOff, DoRestart, DoRestore, DoSave, DoScriptOnOff, DoScore, DoSuperbrief, DoUndo, DoVerbose, DoQuit</p>
</div>
<div class="paragraph">
<p>Output messages for these verbroutines are handled by the routine VMessage in <strong>verblib.h</strong>.</p>
</div>
<div class="paragraph">
<p>A set of verb stub routines is also available in <strong>verbstub.h</strong>, including the actions:</p>
</div>
<div class="paragraph">
<p>DoBurn, DoClimb, DoClimbOut, DoCut, DoDig, DoFollow, DoHelp, DoHelpChar, DoJump, DoKiss, DoNo, DoPull, DoPush, DoSearch, DoSleep, DoSmell, DoSorry, DoSwim, DoThrowAt, DoTie, DoTouch, DoUntie, DoUse, DoWake, DoWakeCharacter, DoWave, DoWaveHands, DoYell, DoYes</p>
</div>
<div class="paragraph">
<p>The default response for each of these stub routines is a more colorful variation of &#8220;Try something else.&#8221; Any more meaningful response must be incorporated into before property routines. To use these verbs, set the VERBSTUBS flag before compiling <strong>hugolib.h</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_utility_routines_etc"><a class="anchor" href="#_utility_routines_etc"></a>B.7. UTILITY ROUTINES, ETC.</h3>
<div class="paragraph">
<p>First, the junction routines:</p>
</div>
<div class="paragraph">
<p>EndGame called by the engine via:<br>
EndGame(end_type)</p>
</div>
<div class="paragraph">
<p>If end_type = 1, the game is won; if 2, the game is lost. (Since endflag may be any value, a value of, for example, 0 will still call EndGame, but with no additional effects via the default PrintEndGame routine.) The global endflag is cleared upon calling. Returning false from EndGame terminates the Hugo Engine.</p>
</div>
<div class="paragraph">
<p>Also calls: PrintEndGame and PrintScore</p>
</div>
<div class="paragraph">
<p>FindObject called by the engine via:<br>
FindObject(object, location)</p>
</div>
<div class="paragraph">
<p>Returns true (1) if the specified object is available in the specified location, or false (0) if it is not. Returns 2 if the object is visible but not physically accessible.</p>
</div>
<div class="paragraph">
<p>The location argument is 0 during object disambiguation performed by the engine.</p>
</div>
<div class="paragraph">
<p>Also calls: ObjectisKnown, ExcludeFromAll</p>
</div>
<div class="paragraph">
<p>Parse called by the engine via:<br>
Parse()</p>
</div>
<div class="paragraph">
<p>Performs all library-side parsing of the player input. Returning true forces the engine to reparse the modified input line.</p>
</div>
<div class="paragraph">
<p>Also calls: PreParse, AssignPronoun and SetObjWord</p>
</div>
<div class="paragraph">
<p>ParseError called by the engine via:<br>
ParseError(errornumber, object)</p>
</div>
<div class="paragraph">
<p>Prints the parsing message/error given by errornumber, where an additional object value may also be provided. Returning false signals the engine to print the engine&#8217;s default error message. Return 2 to force the existing line to be reparsed as is.</p>
</div>
<div class="paragraph">
<p>May also call: CustomError</p>
</div>
<div class="paragraph">
<p>Perform called by the engine via:</p>
</div>
<div class="paragraph">
<p>Perform(verbroutine, object, xobject, queue, isxverb)</p>
</div>
<div class="paragraph">
<p>Runs the requested verbroutine, setting up the object and xobject globals if necessary. The queue argument is true if more than one call to Perform is being made for multiple objects, and the isxverb argument is true for verbroutine calls associated with xverb grammar.</p>
</div>
<div class="paragraph">
<p>SpeakTo called by the engine via:<br>
SpeakTo(character)</p>
</div>
<div class="paragraph">
<p>Handles character responses to directed actions. Globals object, xobject, and verbroutine are set up as in a normal verb routine call.</p>
</div>
<div class="paragraph">
<p>Also calls: AssignPronoun</p>
</div>
<div class="paragraph">
<p>And the routines for grammatically-correct printing:</p>
</div>
<div class="paragraph">
<p>Art calling form:<br>
Art(object)</p>
</div>
<div class="paragraph">
<p>Prints the indefinite article form of the object name, e.g. &#8220;an apple&#8221;</p>
</div>
<div class="paragraph">
<p>The calling form:<br>
The(object)</p>
</div>
<div class="paragraph">
<p>Prints the definite article form of the object name, e.g. &#8220;the apple&#8221;</p>
</div>
<div class="paragraph">
<p>CArt calling form:<br>
CArt(object)</p>
</div>
<div class="paragraph">
<p>Prints the capitalized indefinite article form of the object name, e.g. &#8220;An apple&#8221;</p>
</div>
<div class="paragraph">
<p>CThe calling form:<br>
CThe(object)</p>
</div>
<div class="paragraph">
<p>Prints the capitalized definite article form of the object name, e.g. &#8220;The apple&#8221;</p>
</div>
<div class="paragraph">
<p>IsorAre calling form:<br>
IsorAre(object[, formal])<br>
where the parameter formal is optional</p>
</div>
<div class="paragraph">
<p>Depending on whether or not the specified object is plural or singular, prints <code>'re</code> or <code>'s</code>, respectively (or <code> are</code> or <code> is</code> if a non-false formal parameter is passed).</p>
</div>
<div class="paragraph">
<p>MatchPlural calling form:<br>
MatchPlural(object, w1, w2)</p>
</div>
<div class="paragraph">
<p>Prints the dictionary entry given by w1 if the supplied object is not plural, or w2 if it is.</p>
</div>
<div class="paragraph">
<p>MatchSubject calling form:<br>
MatchSubject(object)</p>
</div>
<div class="paragraph">
<p>Matches a verb to the given subject object. If the object is plural, nothing is printed; if the object is singular, an &#8220;s&#8221; is printed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>None of the above printing routines prints a carriage return, and all return 0 (the empty string). Therefore, either of the following uses are valid:</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>CThe(apple)</p>
</div>
<div class="paragraph">
<p>print " is here."</p>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="paragraph">
<p>print CThe(apple); " is here."</p>
</div>
<div class="paragraph">
<p>Other library routines:</p>
</div>
<div class="paragraph">
<p>Acquire calling form:<br>
Acquire(parent, object)</p>
</div>
<div class="paragraph">
<p>Checks to see if parent.capacity is greater than or equal to parent.holding plus object.size. If so, it moves the object to the specified parent, and returns true. If the object cannot be moved, Acquire returns false.</p>
</div>
<div class="paragraph">
<p>Also calls: CalculateHolding</p>
</div>
<div class="paragraph">
<p>AnyVerb calling form:<br>
AnyVerb(value)</p>
</div>
<div class="paragraph">
<p>Returns value if the current verbroutine is not an xverb; otherwise it returns false.</p>
</div>
<div class="paragraph">
<p>AssignPronoun calling form:<br>
AssignPronoun(object)</p>
</div>
<div class="paragraph">
<p>Sets the appropriate global it_obj, them_obj, him_obj, or her_obj to the specified object.</p>
</div>
<div class="paragraph">
<p>CalculateHolding calling form:<br>
CalculateHolding(object)</p>
</div>
<div class="paragraph">
<p>Properly recalculates object.holding based on the sizes of all child objects.</p>
</div>
<div class="paragraph">
<p>CenterTitle calling form:<br>
CenterTitle(text[, lines])</p>
</div>
<div class="paragraph">
<p>Clears the screen and centers the text given by the specified dictionary entry in the top window. The default height of the title (i.e., one line) can be overridden with a second argument giving the number of lines.</p>
</div>
<div class="paragraph">
<p>CheckReach calling form:<br>
CheckReach(object)</p>
</div>
<div class="paragraph">
<p>Checks to see if the specified object is within reach of the player object. Returns true if accessible; returns false and prints an appropriate message if not accessible.</p>
</div>
<div class="paragraph">
<p>Contains calling form:<br>
Contains(parent, object)</p>
</div>
<div class="paragraph">
<p>Returns object if the specified object is present as a possession of the specified parent, even as a grandchild<sup class="footnote">[<a id="_footnoteref_58" class="footnote" href="#_footnotedef_58" title="View footnote.">58</a>]</sup>, otherwise returns false.</p>
</div>
<div class="paragraph">
<p>CustomError calling form:<br>
CustomError(errornumber, object)</p>
</div>
<div class="paragraph">
<p>Replace if custom error messages are desired. Is called by ParseError whenever errornumber is greater than or equal to 100, specifying a user-provided and user-called parser error. Should return false if no user message is found.</p>
</div>
<div class="paragraph">
<p>DarkWarning calling form:<br>
DarkWarning</p>
</div>
<div class="paragraph">
<p>Is called by MovePlayer whenever the player object is moved into a location without a light source. The default library routine simply prints a message; for a more sinister response or action, such as the demise of the player, replace the default with a new DarkWarning routine.</p>
</div>
<div class="paragraph">
<p>DeleteWord calling form:<br>
DeleteWord(wordnumber[, number])</p>
</div>
<div class="paragraph">
<p>Deletes number words&#8212;&#8203;or only one word if no second argument is given&#8212;&#8203;starting with word[wordnumber]. Returns the number of words deleted.</p>
</div>
<div class="paragraph">
<p>DescribePlace calling form:<br>
DescribePlace(location[, long])</p>
</div>
<div class="paragraph">
<p>Prints the location name and, when appropriate, a location description (i.e., its long_desc). Including a non-false long parameter will always force a location description.</p>
</div>
<div class="paragraph">
<p>ExcludeFromAll calling form:<br>
ExcludeFromAll(object)</p>
</div>
<div class="paragraph">
<p>Returns true if, based on the current circumstances (verbroutine, etc.), the supplied object should be excluded from actions using &#8220;all&#8221;--such as multi, multiheld, and multinotheld grammar tokens.</p>
</div>
<div class="paragraph">
<p>FindLight calling form:<br>
FindLight(location)</p>
</div>
<div class="paragraph">
<p>Checks to see if a light source is available in location; if so, it sets the global light_source to the object number of the source and returns that value.</p>
</div>
<div class="paragraph">
<p>Also calls: ObjectIsLight</p>
</div>
<div class="paragraph">
<p>Font calling form:<br>
Font(bitmask)</p>
</div>
<div class="paragraph">
<p>Sets the current font attributes as specified by bitmask, where bitmask is one or more font-style constants (see library constants, above) combined with <code>|</code> or <code>+</code>.</p>
</div>
<div class="paragraph">
<p>GetInput calling form:<br>
GetInput([prompt string])</p>
</div>
<div class="paragraph">
<p>Receives input from the keyboard, storing individual words in the word array; unknown words&#8212;&#8203;i.e., those that are not in the dictionary&#8212;&#8203;are assigned the empty string, 0 or <code>""</code>. If an argument is passed, it is assumed to be a dictionary address for the prompt string. If no argument is passed, no prompt is printed.</p>
</div>
<div class="paragraph">
<p>HoursMinutes calling form:<br>
HoursMinutes(counter[, military])</p>
</div>
<div class="paragraph">
<p>Prints the time in hh:mm format given that counter represents the time in minutes from 12:00 a.m. If the optional military value is given as a true value, the time is printed in 24-hour format.</p>
</div>
<div class="paragraph">
<p>Indent calling form:<br>
Indent</p>
</div>
<div class="paragraph">
<p>If the NOINDENT_F bit is not set in the FORMAT mask, Indent prints INDENT_SIZE spaces without printing a newline.</p>
</div>
<div class="paragraph">
<p>InList calling form:<br>
InList(object, property, value)</p>
</div>
<div class="paragraph">
<p>If the value is in the list of values held in object.property, returns the element number of the (first) property element equal to value; otherwise returns 0.</p>
</div>
<div class="paragraph">
<p>InsertWord calling form:<br>
InsertWord(wordnumber[, number])</p>
</div>
<div class="paragraph">
<p>Makes space for either the number of words given by the number argument&#8212;&#8203;or one word if no second argument is given&#8212;&#8203;if possible, at word[wordnumber], shifting upward all words from that point to the end of the input line. Returns the number of words inserted.</p>
</div>
<div class="paragraph">
<p>IsPossibleXobject calling form:<br>
IsPossibleXobject(object)</p>
</div>
<div class="paragraph">
<p>Returns true if the object is potentially the xobject in the current command. Does not, however, guarantee that the object <em>is</em> an xobject, but is instead a quick and inexpensive utility routine for parsing.</p>
</div>
<div class="paragraph">
<p>ListObjects calling form:<br>
ListObjects(object)</p>
</div>
<div class="paragraph">
<p>Lists all the possessions of the specified object in the appropriate form (according to the global FORMAT). Possessions of possessions are listed recursively if FORMAT does not contain the NORECURSE_F bit. Format masks are combined, as in:</p>
</div>
<div class="paragraph">
<p>FORMAT = LIST_F | NORECURSE_F | &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Also calls: WhatsIn</p>
</div>
<div class="paragraph">
<p>Menu calling form:<br>
Menu(number, [width[, selection]])</p>
</div>
<div class="paragraph">
<p>Prints a menu, given that the possible number of choices (up to 10) are contained in the menuitem array, with menuitem[0] is the title of the menu. A width (in characters) argument and a starting selection number are optional. Returns the number of the item selected, or 0 if none is chosen.</p>
</div>
<div class="paragraph">
<p>Also calls: CenterTitle</p>
</div>
<div class="paragraph">
<p>Message calling form:<br>
Message(&amp;routine, num, a, b)</p>
</div>
<div class="paragraph">
<p>Used by most routines in <strong>hugolib.h</strong> for text output, so that the bulk of the library text is centralized in one location. Message number num for the specified routine is printed; a and b are optional parameters that may represent objects, dictionary entries, or any other value.</p>
</div>
<div class="paragraph">
<p>(Similar routines are provided in VMessage in <strong>verblib.h</strong> and OMessage in <strong>objlib.h</strong>.)</p>
</div>
<div class="paragraph">
<p>MovePlayer calling form:<br>
MovePlayer(loc[, silent[, none]])<br>
MovePlayer(dir[, silent[, none]])</p>
</div>
<div class="paragraph">
<p>Moves the player to the new location, properly setting all relevant variables and attributes. If silent is passed as a true value, no room description is printed following the move.</p>
</div>
<div class="paragraph">
<p>A direction object (i.e., n_obj, d_obj) may be specified instead of a location; in that case, MovePlayer moves in that direction from present location.</p>
</div>
<div class="paragraph">
<p>If none is true, before and after routines are not run.</p>
</div>
<div class="paragraph">
<p>MovePlayer can be checked in a location&#8217;s before or after property as <code>location MovePlayer</code> to catch a player&#8217;s exit from or entrance to a location. In a before property, <code>object MovePlayer</code> can be used to check the target location.</p>
</div>
<div class="paragraph">
<p>Returns the object number of the new location.</p>
</div>
<div class="paragraph">
<p>MovePlayer does not check to see if a move is valid; that must be done before calling the routine.</p>
</div>
<div class="paragraph">
<p>May also call: DarkWarning</p>
</div>
<div class="paragraph">
<p>NumberWord calling form:<br>
NumberWord(number[, true])</p>
</div>
<div class="paragraph">
<p>Prints a number in non-numerical word format, where &lt;number&gt; is between -32768 to 32767. Always returns 0 (the empty string). If a second true argument is supplied, the word is capitalized.</p>
</div>
<div class="paragraph">
<p>ObjectIs calling form:<br>
ObjectIs(object)</p>
</div>
<div class="paragraph">
<p>Lists certain attributes, such as providing light or being worn, of the given object in parenthetical form.</p>
</div>
<div class="paragraph">
<p>ObjectisKnown calling form:<br>
ObjectisKnown(object)</p>
</div>
<div class="paragraph">
<p>Returns true if the object is known to the player.</p>
</div>
<div class="paragraph">
<p>ObjectisLight calling form:<br>
ObjectisLight(object)</p>
</div>
<div class="paragraph">
<p>Returns true if the object or one of its visible possessions is providing light. If so, it also sets the global light_source the object number of the source.</p>
</div>
<div class="paragraph">
<p>ObjWord calling form:<br>
ObjWord(word, object)</p>
</div>
<div class="paragraph">
<p>Returns either adjective or noun (i.e., the property number) if the given is either an adjective or noun of the specified object.</p>
</div>
<div class="paragraph">
<p>PreParse calling form: PreParse</p>
</div>
<div class="paragraph">
<p>Provided so that, if needed, this routine may be replaced instead of the more extensive library Parse routine. The default PreParse routine defined in the library is empty.</p>
</div>
<div class="paragraph">
<p>PrintEndGame calling form:<br>
PrintEndGame(end_type)</p>
</div>
<div class="paragraph">
<p>Depending on whether end_type is 1 or 2, prints, respectively:</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>*** YOU'VE WON THE GAME! ***</p>
</div>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="exampleblock gametranscript">
<div class="content">
<div class="paragraph">
<p>*** YOU ARE DEAD. ***</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If end_type is some other value, nothing is printed.</p>
</div>
<div class="paragraph">
<p>PrintScore calling form:<br>
PrintScore(end_of_game)</p>
</div>
<div class="paragraph">
<p>Prints the score in the appropriate form, depending on whether or not end_of_game is true.</p>
</div>
<div class="paragraph">
<p>PrintStatusLine calling form:<br>
PrintStatusLine</p>
</div>
<div class="paragraph">
<p>Prints the statusline in the appropriate format, according to the global STATUSTYPE.</p>
</div>
<div class="paragraph">
<p>PropertyList calling form:<br>
PropertyList(object, property)</p>
</div>
<div class="paragraph">
<p>Lists the objects held in object.property (if any), returning the number of objects listed.</p>
</div>
<div class="paragraph">
<p>PutInScope calling form:<br>
PutInScope(object, actor)</p>
</div>
<div class="paragraph">
<p>Makes the given object accessible to the specified actor, regardless of their respective locations, and providing that the in_scope property of the object has at least one empty slot&#8212;&#8203;i.e., one that equals 0. Returns true if successful.</p>
</div>
<div class="paragraph">
<p>RemoveFromScope calling form:<br>
RemoveFromScope(object, actor)</p>
</div>
<div class="paragraph">
<p>Removes the given object from the scope of the specified actor. Returns true if successful, or false if the object was never in scope of the actor to begin with.</p>
</div>
<div class="paragraph">
<p>SetObjWord calling form:<br>
SetObjWord(position, object)</p>
</div>
<div class="paragraph">
<p>Inserts the specified object in the word array in the format:</p>
</div>
<div class="paragraph">
<p><code>adjective1 adjective2 &#8230;&#8203; noun</code></p>
</div>
<div class="paragraph">
<p>ShortDescribe calling form:<br>
ShortDescribe(object)</p>
</div>
<div class="paragraph">
<p>Prints the short description (short_desc) of the given object, first checking to see if it should run initial_desc, when_open, or when_closed, as appropriate. Then, if no short_desc property exists, it prints a default &#8220;X is here.&#8221;</p>
</div>
<div class="paragraph">
<p>Also calls: WhatsIn</p>
</div>
<div class="paragraph">
<p>SpecialDesc calling form:<br>
SpecialDesc(object)</p>
</div>
<div class="paragraph">
<p>Checks each child object of the specified object, running any appropriate initial_desc or inv_desc property routines (depending on the calling situation). Sets the global variable list_count to the number of remaining (i.e., non-listed) objects.</p>
</div>
<div class="paragraph">
<p>VerbWord calling form:<br>
VerbWord</p>
</div>
<div class="paragraph">
<p>Returns the dictionary word used as the verb in a typed command.</p>
</div>
<div class="paragraph">
<p>WhatsIn calling form:<br>
WhatsIn(parent)</p>
</div>
<div class="paragraph">
<p>Lists the possessions of the specified parent, according the form given by the global FORMAT. Returns the number of objects listed.</p>
</div>
<div class="paragraph">
<p>Also calls: SpecialDesc, ListObjects</p>
</div>
<div class="paragraph">
<p>YesorNo calling form:<br>
YesorNo</p>
</div>
<div class="paragraph">
<p>Checks to see if the just-received input is &#8220;yes&#8221;, &#8220;y&#8221;, &#8220;no&#8221;, or &#8220;n&#8221;. If none of the above, it prompts for a yes or no answer. Once a valid answer is received, it returns true (if yes) or false (if no).</p>
</div>
</div>
<div class="sect2">
<h3 id="_auxiliary_math_routines"><a class="anchor" href="#_auxiliary_math_routines"></a>B.8. AUXILIARY MATH ROUTINES:</h3>
<div class="paragraph">
<p>abs calling form:<br>
abs(a)</p>
</div>
<div class="paragraph">
<p>Returns an absolute value given a supplied value.</p>
</div>
<div class="paragraph">
<p>higher calling form:<br>
higher(a, b)</p>
</div>
<div class="paragraph">
<p>Returns the higher number of two supplied values.</p>
</div>
<div class="paragraph">
<p>lower calling form:<br>
lower(a, b)</p>
</div>
<div class="paragraph">
<p>Returns the lower number of two supplied values.</p>
</div>
<div class="paragraph">
<p>mod calling form:<br>
mod(a, b)</p>
</div>
<div class="paragraph">
<p>Returns the remainder of one number divided by a second number.</p>
</div>
<div class="paragraph">
<p>pow calling form:<br>
pow(a, b)</p>
</div>
<div class="paragraph">
<p>Returns one number to the power of another number. (The return value is undefined if the result is outside the boundary of -32768 to 32767.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_string_array_routines"><a class="anchor" href="#_string_array_routines"></a>B.9. STRING ARRAY ROUTINES:</h3>
<div class="paragraph">
<p>StringCompare calling form:<br>
StringCompare(array1, array2)</p>
</div>
<div class="paragraph">
<p>Returns 1 if array1 is lexically greater than array2, -1 if array1 is lexically less than array2, and 0 if the strings are identical.</p>
</div>
<div class="paragraph">
<p>StringCopy calling form:<br>
StringCopy(new, old[, len])</p>
</div>
<div class="paragraph">
<p>Copies the contents of the array at the address given by old to the array at new, to a maximum of len characters if len is given, or the length of old if it isn&#8217;t.</p>
</div>
<div class="paragraph">
<p>StringDictCompare calling form:<br>
StringDictCompare(array, dictentry)</p>
</div>
<div class="paragraph">
<p>Performs a StringCompare-like comparison of a string array given by array and the dictionary entry dictentry, returning 1, -1, or 0 if array is lexically greater than, less than, or equal to dictentry, respectively.</p>
</div>
<div class="paragraph">
<p>StringEqual calling form:<br>
StringEqual(array1, array2)</p>
</div>
<div class="paragraph">
<p>Returns true only if array1 and array2 are identical.</p>
</div>
<div class="paragraph">
<p>StringLength calling form:<br>
StringLength(array)</p>
</div>
<div class="paragraph">
<p>Returns the length of the string stored as array.</p>
</div>
<div class="paragraph">
<p>StringPrint calling form:<br>
StringPrint(array[, start, end])</p>
</div>
<div class="paragraph">
<p>Prints the string stored as array, beginning with start and ending with end if given.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fusedaemon_routines"><a class="anchor" href="#_fusedaemon_routines"></a>B.10. FUSE/DAEMON ROUTINES:</h3>
<div class="paragraph">
<p>Activate calling form:<br>
Activate(object[, setting])</p>
</div>
<div class="paragraph">
<p>Activates the specified fuse or daemon object. The setting value is only specified for fuses, where it represents the initial value of the timer property.</p>
</div>
<div class="paragraph">
<p>Deactivate calling form:<br>
Deactivate(object)</p>
</div>
<div class="paragraph">
<p>Deactivates the specified fuse or daemon object.</p>
</div>
</div>
<div class="sect2">
<h3 id="_character_script_routines"><a class="anchor" href="#_character_script_routines"></a>B.11. CHARACTER SCRIPT ROUTINES:</h3>
<div class="paragraph">
<p>CancelScript calling form:<br>
CancelScript(character)</p>
</div>
<div class="paragraph">
<p>Immediately cancels the character script associated with the object character. Returns true if successful, i.e., if a script for character is found.</p>
</div>
<div class="paragraph">
<p>PauseScript calling form:<br>
PauseScript(character)</p>
</div>
<div class="paragraph">
<p>Temporarily pauses the character script associated with the given character. Returns true if successful.</p>
</div>
<div class="paragraph">
<p>ResumeScript calling form:<br>
ResumeScript(character)</p>
</div>
<div class="paragraph">
<p>Resumes execution of a paused script for the given character. Returns true if successful.</p>
</div>
<div class="paragraph">
<p>SkipScript calling form:<br>
SkipScript(character)</p>
</div>
<div class="paragraph">
<p>Skips execution of the script for a given character during the next call to RunScripts only.</p>
</div>
<div class="paragraph">
<p>Script calling form:<br>
Script(character, steps)</p>
</div>
<div class="paragraph">
<p>Initializes space for the requested number of steps in the setscript array, sets up the data for the script in the scriptdata array, and returns the location of the script in setscript. Returns -1 if MAX_SCRIPTS is exceeded.</p>
</div>
<div class="paragraph">
<p>RunScripts calling form:<br>
RunScripts</p>
</div>
<div class="paragraph">
<p>Runs all active scripts, calling them in the form:</p>
</div>
<div class="paragraph">
<p>CharRoutine(character, object)</p>
</div>
</div>
<div class="sect2">
<h3 id="_character_action_routines"><a class="anchor" href="#_character_action_routines"></a>B.12. CHARACTER ACTION ROUTINES:</h3>
<div class="paragraph">
<p>As a starting point, the library also provides a limited number of routines for character scripts to use. They are:</p>
</div>
<div class="paragraph">
<p>&amp;CharWait, 0</p>
</div>
<div class="paragraph">
<p>&amp;CharMove, direction_object (requires <strong>objlib.h</strong>)</p>
</div>
<div class="paragraph">
<p>&amp;CharGet, object</p>
</div>
<div class="paragraph">
<p>&amp;CharDrop, object</p>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="paragraph">
<p>&amp;LoopScript, 0</p>
</div>
</div>
<div class="sect2">
<h3 id="_conditional_compilation"><a class="anchor" href="#_conditional_compilation"></a>B.13. CONDITIONAL COMPILATION:</h3>
<div class="paragraph">
<p>A number of compiler flags may be set to exclude certain portions of <strong>hugolib.h</strong> from compilation if these functions or objects are not required.</p>
</div>
<div class="paragraph">
<p><strong>FLAG EXCLUDES</strong></p>
</div>
<div class="paragraph">
<p>NO_AUX_MATH Auxiliary math routines</p>
</div>
<div class="paragraph">
<p>NO_FUSES Fuses and daemons</p>
</div>
<div class="paragraph">
<p>NO_MENUS Use of the Menu function</p>
</div>
<div class="paragraph">
<p>NO_OBJLIB The contents of <strong>objlib.h</strong></p>
</div>
<div class="paragraph">
<p>NO_RECORDING Command recording functions</p>
</div>
<div class="paragraph">
<p>NO_SCRIPTS Character scripting routines</p>
</div>
<div class="paragraph">
<p>NO_STRING_ARRAYS String array functions</p>
</div>
<div class="paragraph">
<p>NO_VERBS All action verbs</p>
</div>
<div class="paragraph">
<p>NO_XVERBS All non-action verbs</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_limit_settings_2"><a class="anchor" href="#_limit_settings_2"></a>Appendix C: LIMIT SETTINGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default settings for the complete set of limits may be obtained by invoking the compiler via:</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc $list</pre>
</div>
</div>
<div class="paragraph">
<p>The following limits are static and non-modifiable, since they reflect the internal configuration of the Hugo Engine:</p>
</div>
<div class="paragraph">
<p>MAXATTRIBUTES The maximum number of definable attributes, not counting aliases</p>
</div>
<div class="paragraph">
<p>MAXGLOBALS The maximum number of definable global variables</p>
</div>
<div class="paragraph">
<p>MAXLOCALS The maximum number of local variables allowed in a routine, including arguments passed to the routine</p>
</div>
<div class="paragraph">
<p>The following are the modifiable settings, which may be set using:</p>
</div>
<div class="paragraph">
<p>$&lt;setting&gt;=&lt;new limit&gt;</p>
</div>
<div class="paragraph">
<p>either in the compiler&#8217;s invocation line or in the source code.</p>
</div>
<div class="paragraph">
<p>MAXALIASES The maximum number of aliases that may be defined for attributes and/or properties</p>
</div>
<div class="paragraph">
<p>MAXARRAYS The maximum number of arrays that may be defined (not the total array space, which is automatically reserved)</p>
</div>
<div class="paragraph">
<p>MAXCONSTANTS The maximum number of constants that may be defined</p>
</div>
<div class="paragraph">
<p>MAXDICT The maximum number of entries that the compiler can enter into the dictionary table</p>
</div>
<div class="paragraph">
<p>MAXDICTEXTEND The total number of bytes (not the total number of entries) available for dynamic dictionary extension during runtime</p>
</div>
<div class="paragraph">
<p>MAXEVENTS The maximum number of global or object-linked events</p>
</div>
<div class="paragraph">
<p>MAXFLAGS The maximum number of compiler flags that may be set at one time to control conditional compilation</p>
</div>
<div class="paragraph">
<p>MAXLABELS The maximum number of labels that may be defined during compilation</p>
</div>
<div class="paragraph">
<p>MAXOBJECTS The maximum number of objects and/or classes that may be created</p>
</div>
<div class="paragraph">
<p>MAXPROPERTIES The maximum number of properties that may be defined</p>
</div>
<div class="paragraph">
<p>MAXROUTINES The maximum number of standalone routines (not property routines) that may be defined</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hugofix_and_the_hugo_debugger"><a class="anchor" href="#_hugofix_and_the_hugo_debugger"></a>Appendix D: HUGOFIX AND THE HUGO DEBUGGER</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_hugofix_debugging_library"><a class="anchor" href="#_the_hugofix_debugging_library"></a>D.1. The HugoFix Debugging Library</h3>
<div class="paragraph">
<p>The HugoFix Debugging Library is a suite of routines that can be used via typed commands in a running Hugo game without the use of any special debugger program. To use HugoFix, set the compiler flag DEBUG before including <strong>hugolib.h</strong> or any other standard Hugo library files<sup class="footnote">[<a id="_footnoteref_59" class="footnote" href="#_footnotedef_59" title="View footnote.">59</a>]</sup>. Then, from the player input line, type:</p>
</div>
<div class="paragraph">
<p>&gt;$?</p>
</div>
<div class="paragraph">
<p>to get a list of all HugoFix debugging commands.</p>
</div>
<div class="paragraph">
<p><strong>$?</strong> <strong>‚Äì Display help menu</strong></p>
</div>
<div class="paragraph">
<p><em>Monitoring:</em></p>
</div>
<div class="paragraph">
<p><strong>$fd ‚Äì Fuse/daemon monitor on/off</strong></p>
</div>
<div class="paragraph">
<p>Fuse/daemon monitoring prints verbose information about all starting or stopping fuses or daemons, as well as the value of the tick property for any running fuses.</p>
</div>
<div class="paragraph">
<p><strong>$fi ‚Äì FindObject monitoring on/off</strong></p>
</div>
<div class="paragraph">
<p>FindObject monitoring traces calls to the library&#8217;s FindObject routine and their results. This can be extremely useful for debugging things like scope and disambiguation problems.</p>
</div>
<div class="paragraph">
<p><strong>$on ‚Äì Toggle object numbers</strong></p>
</div>
<div class="paragraph">
<p>Toggling object numbers on causes an object&#8217;s numerical value to be displayed after the object name whenever the library functions The, CThe, Art, and CArt are called. Can be turned used in conjunction with any other HugoFix function that outputs object names.</p>
</div>
<div class="paragraph">
<p><strong>$pm ‚Äì Parser monitoring on/off</strong></p>
</div>
<div class="paragraph">
<p>Parser monitoring provides information during calls to Parse, ParseError, and Perform (or SpeakTo, as applicable) to trace the breakdown, parsing, and execution of a given player input line.</p>
</div>
<div class="paragraph">
<p><strong>$sc ‚Äì Script monitor on/off</strong></p>
</div>
<div class="paragraph">
<p>Script monitoring prints verbose information about all starting, stopping, or otherwise running scripts each turn.</p>
</div>
<div class="paragraph">
<p><em>Object manipulation:</em></p>
</div>
<div class="paragraph">
<p><strong>$at &lt;obj.&gt; is [not] &lt;attr. #&gt; ‚Äì Set or clear object attribute</strong></p>
</div>
<div class="paragraph">
<p>The object will have attribute number &lt;attr. #&gt; set or cleared. (It&#8217;s useful to have generated debugging information by passing the ‚Äìi switch to the compiler in order to get attribute numbers and other useful information.)</p>
</div>
<div class="paragraph">
<p><strong>$mo &lt;obj.&gt; to &lt;obj.&gt; ‚Äì Move object to new parent</strong></p>
</div>
<div class="paragraph">
<p>Essentially the same as the Hugo statement: move &lt;object&gt; to &lt;parent&gt;. The object will become the youngest child of the parent object.</p>
</div>
<div class="paragraph">
<p><strong>$mp &lt;obj.&gt; ‚Äì Move player object to new parent</strong></p>
</div>
<div class="paragraph">
<p>Essentially the same as the Hugo Library function call: MovePlayer(&lt;obj.&gt;). The function may fail (and print an appropriate error message) if the specified parent object is not a valid location (i.e., room or room-equivalent object).</p>
</div>
<div class="paragraph">
<p><em>Object testing:</em></p>
</div>
<div class="paragraph">
<p><strong>$fo [obj.] ‚Äì Find object (or player, if no object given)</strong></p>
</div>
<div class="paragraph">
<p>Prints the name of the parent object of a given object (or the player object).</p>
</div>
<div class="paragraph">
<p><strong>$na &lt;obj. #&gt; ‚Äì Print name of object number</strong></p>
</div>
<div class="paragraph">
<p>Prints the name of the object specified by object number.</p>
</div>
<div class="paragraph">
<p><strong>$nu &lt;obj.&gt; ‚Äì Print number of named object</strong></p>
</div>
<div class="paragraph">
<p>Prints the object number of a given object.</p>
</div>
<div class="paragraph">
<p><em>Parser testing:</em></p>
</div>
<div class="paragraph">
<p><strong>$ca ‚Äì Check articles for all objects</strong></p>
</div>
<div class="paragraph">
<p>Useful for preventing forgotten articles in order to avoid something like &#8220;You get apple&#8221; when it should be &#8220;You get the apple&#8221;, etc.</p>
</div>
<div class="paragraph">
<p><strong>$pc [$all] [obj.] ‚Äì Check parser conflicts (for object)</strong></p>
</div>
<div class="paragraph">
<p>Attempts to determine what objects might be confused with &lt;obj&gt; by the parser. May take quite a while if $all is specified for a large number of objects.</p>
</div>
<div class="paragraph">
<p><strong>$pr ‚Äì parse_rank monitoring</strong></p>
</div>
<div class="paragraph">
<p>Monitors how various objects' parse_rank property values are evaluated during parsing. Particularly useful with $fi and $pm.</p>
</div>
<div class="paragraph">
<p><em>Other utilities:</em></p>
</div>
<div class="paragraph">
<p><strong>$ac &lt;obj.&gt; [timer] ‚Äì Activate fuse (with timer) or daemon</strong></p>
</div>
<div class="paragraph">
<p>Generally &lt;obj.&gt; is an object number, since fuses and daemons are normally not otherwise referred to.</p>
</div>
<div class="paragraph">
<p><strong>$de &lt;obj.&gt; ‚Äì Deactivate fuse or daemon</strong></p>
</div>
<div class="paragraph">
<p>Generally &lt;obj.&gt; is an object number, since fuses and daemons are normally not otherwise referred to.</p>
</div>
<div class="paragraph">
<p><strong>$di [obj.] ‚Äì Audit directions (for room object)</strong></p>
</div>
<div class="paragraph">
<p>Attempts to print out all the possible exits from a given location, or from the present location if none is given.</p>
</div>
<div class="paragraph">
<p><strong>$kn [&lt;obj. #&gt;] ‚Äì Make all object(s) known</strong></p>
</div>
<div class="paragraph">
<p>Sets the known attribute for for an object (or for all objects in the game if no single object is specified.</p>
</div>
<div class="paragraph">
<p><strong>$nr ‚Äì Normalize random numbers</strong></p>
</div>
<div class="paragraph">
<p>Sets random number generation to predictable values which can be replicated on subsequent playthroughs. Handy for testing things that may be affected by use of the built-in random function.</p>
</div>
<div class="paragraph">
<p><strong>$ot [obj. | $loc] ‚Äì Print object tree (beginning with object)</strong></p>
</div>
<div class="paragraph">
<p>Prints all the children (beneath a particular object, if given) in tree format.</p>
</div>
<div class="paragraph">
<p><strong>$rr ‚Äì Restore <code>random</code> random numbers</strong></p>
</div>
<div class="paragraph">
<p>Resets random number generation to produce unpredictable values.</p>
</div>
<div class="paragraph">
<p><strong>$uk [&lt;obj. #&gt;] ‚Äì Make object unknown</strong></p>
</div>
<div class="paragraph">
<p>Again for testing involving the known attribute. (See $kn, above)</p>
</div>
<div class="paragraph">
<p><strong>$wo &lt;number&gt; ‚Äì Print dictionary word entry &lt;number&gt;</strong></p>
</div>
<div class="paragraph">
<p>Where &lt;number&gt; is a value representing a dictionary table address.</p>
</div>
<div class="paragraph">
<p><strong>$wn &lt;word&gt; ‚Äì Value/dictionary address of (lowercase) word</strong></p>
</div>
<div class="paragraph">
<p>Where &lt;word&gt; is a dictionary entry.</p>
</div>
<div class="paragraph">
<p><strong>$au ‚Äì Run HugoFixAudit</strong></p>
</div>
<div class="paragraph">
<p>Runs a number of tests to ensure the validity of certain data, including necessary related properties on individual objects and proper usage of object library classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_hugo_debugger"><a class="anchor" href="#_the_hugo_debugger"></a>D.2. The Hugo Debugger</h3>
<div class="paragraph">
<p>The Hugo Debugger is a valuable part of the Hugo design system. It allows a programmer to monitor all aspects of program execution, including watching expressions, modifying values, moving objects, etc.--all things expected of a modern source-level debugger.<sup class="footnote">[<a id="_footnoteref_60" class="footnote" href="#_footnotedef_60" title="View footnote.">60</a>]</sup></p>
</div>
<div class="paragraph">
<p>In order to be used with the debugger, a Hugo program must be compiled using the -d switch in order to create an .HDX debuggable file with additional data such as names for objects, variables, properties, etc.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">

</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Unix or MS-DOS convention for running the debugger is:</p>
</div>
<div class="paragraph">
<p><strong>hd &lt;filename&gt;</strong></p>
</div>
<div class="paragraph">
<p>from the command line. In Windows, one may just double-click the debugger&#8217;s icon to launch it. In either case, the debugger will begin on the debugging screen. Switch back-and-forth from the actual game screen by pressing Tab. At this point, it is probably best to select &#8220;Shortcut Keys&#8221; from the Help menu, since the actual keystrokes for running the debugger may vary from system to system. (It is possible to operate the debugger entirely through menus, but this soon becomes tedious for operations like stepping line-by-line.)</p>
</div>
<div class="paragraph">
<p>The file <strong>hdhelp.hlp</strong> should be in the same directory as the debugger program&#8212;&#8203;this is the online help file for the debugger, containing information on such things as:</p>
</div>
<div class="paragraph">
<p><strong>Printing</strong></p>
</div>
<div class="paragraph">
<p><strong>Windows and Views, including:</strong></p>
</div>
<div class="paragraph">
<p><em>Code Window</em> Showing the current program exactly as executed, in (almost) source-level format</p>
</div>
<div class="paragraph">
<p><em>Watch Window</em> Allowing any variable expression to be watched/evaluated at any time during execution</p>
</div>
<div class="paragraph">
<p><em>Calls</em> Giving the sequence of nested routine calls at any given point</p>
</div>
<div class="paragraph">
<p><em>Breakpoints</em> Listing all active breakpoints</p>
</div>
<div class="paragraph">
<p><em>Local Variables</em> Listing all local variables, as values, objects, dictionary entries, etc.</p>
</div>
<div class="paragraph">
<p><em>Property/Attribute Aliases</em></p>
</div>
<div class="paragraph">
<p><em>Auxiliary Window</em></p>
</div>
<div class="paragraph">
<p><em>Output</em></p>
</div>
<div class="paragraph">
<p><strong>Running a program, including:</strong></p>
</div>
<div class="paragraph">
<p><em>Finish Routine</em> While stepping, continues execution without stepping to the end of the current routine</p>
</div>
<div class="paragraph">
<p><em>Stepping Through Code</em> Allows line-by-line execution</p>
</div>
<div class="paragraph">
<p><em>Skipping Over Code</em> Allows the next statement to be passed over without executing</p>
</div>
<div class="paragraph">
<p><em>Stepping Backward</em> Allows retracing of code execution, possibly after values are changed, etc.</p>
</div>
<div class="paragraph">
<p><strong>Searching Code</strong> Searches the record of executed code for any given string</p>
</div>
<div class="paragraph">
<p><strong>Watch Expressions</strong> Allows watching multiple variable values or expressions, and to set a breakpoint should a desired value/expression evaluate non-false</p>
</div>
<div class="paragraph">
<p><strong>Setting or Modifying Values</strong> Any variable, property, array value, or object attribute can be set or reset to a valid value at any point during execution</p>
</div>
<div class="paragraph">
<p><strong>Breakpoints</strong> A code address, routine, or property routine can be given&#8212;&#8203;control is then passed to the debugger on encountering a breakpoint</p>
</div>
<div class="paragraph">
<p><strong>Object Tree</strong> At any point, the entire object tree (or just a branch of it) may be displayed</p>
</div>
<div class="paragraph">
<p><strong>Moving Objects</strong> It is possible to dynamically move objects around the object tree, independent of the program itself</p>
</div>
<div class="paragraph">
<p><strong>Runtime Warnings</strong> Optional runtime warnings instruct the debugger to alert the user to common causes of problem code which, while syntactically valid and therefore acceptable to the compiler, is in context probably not what was intended.</p>
</div>
<div class="paragraph">
<p><strong>Setup</strong> Allowing changes (where applicable) in color scheme, printer, etc.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_precompiled_headers"><a class="anchor" href="#_precompiled_headers"></a>Appendix E: PRECOMPILED HEADERS</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This section on precompiled headers, while still accurate, becomes less and less vital as computer (and therefore compilation) speeds increase. As of this writing, on a relatively fast computer, a game that takes 6 seconds to compile will compile in 4 using a precompiled version of the library. A game that takes 2 seconds to compile normally will compile in 1. (In other words, the savings are somewhat negligible.)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is possible to precompile files that would normally be included using the #include directive into a precompiled header file that may be linked using #link, as in:</p>
</div>
<div class="paragraph">
<p>#link "&lt;filename.hlb&gt;"</p>
</div>
<div class="paragraph">
<p>instead of:</p>
</div>
<div class="paragraph">
<p>#include "&lt;filename.h&gt;"</p>
</div>
<div class="paragraph">
<p>The advantage of doing this is primarily one of faster compilation speed; files that are used over and over again without alteration (such as the Hugo Library) may be precompiled so that they are not recompiled every time.</p>
</div>
<div class="paragraph">
<p>The #link directive must come <em>after</em> any grammar, but <em>before</em> any new definitions of attributes, properties, globals, objects, synonyms, etc. Grammar is illegal in a precompiled header.</p>
</div>
<div class="paragraph">
<p>To create a precompiled header, use the -h directive when invoking the Hugo Compiler. The file <strong>hugolib.hug</strong> serves as a good example: it is a small wrapper which compiles the standard Hugo Library. Compile it via</p>
</div>
<div class="literalblock cmd">
<div class="content">
<pre>hc -h hugolib.hug</pre>
</div>
</div>
<div class="paragraph">
<p>in order to generate <strong>hugolib.hlb</strong>. Next, change the use of</p>
</div>
<div class="paragraph">
<p>#include "hugolib.h"</p>
</div>
<div class="paragraph">
<p>in a Hugo program to</p>
</div>
<div class="paragraph">
<p>#link "hugolib.hlb"</p>
</div>
<div class="paragraph">
<p>Change the definition for the main routine from</p>
</div>
<div class="paragraph">
<p>routine main</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>to</p>
</div>
<div class="paragraph">
<p>replace main</p>
</div>
<div class="paragraph">
<p>\{&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>since <strong>hugolib.hug</strong> contains a temporary main routine. The program will now compile (marginally faster) by linking the precompiled library instead of including each uncompiled library file.</p>
</div>
<div class="paragraph">
<p>Note that any conditional compilation flags set in the Hugo program will have no effect on the compiled code in <strong>hugolib.hlb</strong>, since the routines included in or excluded from <strong>hugolib.hlb</strong> are determined by the flags set in <strong>hugolib.hug</strong>. It is recommended that a Hugo user using precompiled headers compile a version of <strong>hugolib.hug</strong> that includes <strong>hugofix.h</strong> and/or <strong>verbstub.h</strong> as desired.</p>
</div>
<div class="paragraph">
<p>It is generally not possible to include multiple precompiled headers compiled in separate passes via subsequent #links in the same source file. Because of the absolute references assigned to data such as dictionary addresses, attribute numbers, etc., such an attempt will produce an &#8220;incompatible precompiled headers&#8221; error.</p>
</div>
<div class="paragraph">
<p>However, for games that are composed of separate sections that can be combined into distinct files, it may make sense to precompile one <strong>.hug</strong> file containing all the common elements that will be used by the separate sections&#8212;&#8203;such as the player object, etc.--and which #includes or #links the library in it. Then, this new <strong>.hlb</strong> file can be #linked in each of the separate sections during development and testing. Of course, each of the separate sections will have to be #included in a single master file for building the full release version.</p>
</div>
<div class="paragraph">
<p>Finally, it is advisable that precompiled headers be used only in building .HEX files during the design/testing stage in order to facilitate faster development. The reason is that the linker does not selectively include routine calls: the entire <strong>.hlb</strong> file is loaded during the link phase. As a result, Hugo files produced using precompiled headers&#8212;&#8203;especially if existing routines in the <strong>.hlb</strong> file are replaced in the source&#8212;&#8203;tend to be larger and therefore less economical in their memory usage. For this reason, it is recommended that #include be used for building release versions instead of #linking the corresponding precompiled header.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hugo_versions"><a class="anchor" href="#_hugo_versions"></a>Appendix F: HUGO VERSIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As of this writing, the latest version of Hugo is 3.1. Most if not all of the actively developed ports are available in v3.1 distributions.</p>
</div>
<div class="paragraph">
<p>The general rule of thumb is that sequential releases of the Hugo Engine are backward compatible, so that the Hugo Engine in v3.1 is able to run games compiled with v3.0, v2.5, and earlier versions. Earlier versions of the engine, however, are unable to run games compiled with later versions of the compiler. For example, a game compiled with v3.1 cannot be run by the v3.0 engine. (The exceptions to this are v2.5.01 through v2.5.04, which are able to run v3.0-compiled games as a result of the transititional development period for Hugo v3.0. Post-v2.5.04, the official baseline for Hugo releases became v3.0.)</p>
</div>
<div class="paragraph">
<p>Version 3.1 is syntactically fully compatible with v3.0, the Hugo version which introduced features such as video playback, context menus, and mouse input. 3.1&#8217;s most notable changes are internal, relating to data storage and code organization, and as such will have little effect on the user. Note however that v2.5 versions of the engine are unable to run v3.1 games.</p>
</div>
<div class="paragraph">
<p>Here is a quick breakdown of Hugo versions:</p>
</div>
<div class="paragraph">
<p><strong>VERSION SUMMARY</strong></p>
</div>
<div class="paragraph">
<p>2.5.0x Basic Hugo Engine implementation; v3.0-specific language features such as the video and addcontext keywords unsupported by the v2.5 compiler. Baseline runtime implementation for almost all ports.</p>
</div>
<div class="paragraph">
<p>3.0 Introduction of additional multimedia and user interface functionality. Additional multimedia including sound, music, and video playback fully supported on Windows, Macintosh, and BeOS.</p>
</div>
<div class="paragraph">
<p>3.1 Syntactically identical to v3.0; internal format changes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>Appendix G: ADDITIONAL RESOURCES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Please note that while these links were up-to-date as of this writing, the ephemeral nature of the Internet may result in changes, relocations, old sites closing and new sites appearing.)</p>
</div>
<div class="paragraph">
<p>The Interactive Fiction Archive is the world&#8217;s number-one repository of publicly available information and tools relating to interactive fiction work and play. It can be found at <em>*http://www.ifarchive.org*</em>, with a mirror at <em>*http://mirror.ifarchive.org*</em>.</p>
</div>
<div class="paragraph">
<p>Two newsgroups serve as the hubs of the interactive fiction community: <em>*rec.arts.int-fiction*</em>, where the focus is on writing games, and <em>*rec.games.int-fiction*</em>, which talks about playing them.</p>
</div>
<div class="paragraph">
<p>The Developers Laboratory at the <em>Future Boy!</em> Forum (<em>*http://www.generalcoffee.com/futureboy*</em>) provides a place for Hugo programming discussion.</p>
</div>
<div class="paragraph">
<p>The Hugonomicon by Cena Mayo at <em>*http://hugonomicon.sf.net*</em> provides additional resources for Hugo use and development.</p>
</div>
<div class="paragraph">
<p>Gilles Duschesne has made available an excellent introduction to Hugo programming in the form of a tutorial available from <em>*http://www.ifarchive.org/if-archive/programming/hugo/examples/ ScavHuntFull.zip*</em>.</p>
</div>
<div class="paragraph">
<p>A host of general IF-related materials are available at Brass Lantern (<em>*http://www.brasslantern.org*</em>) and PARSIFAL (<em>*http://www.firthworks.com/roger/parsifal/index.html*</em>).</p>
</div>
<div class="paragraph">
<p>Graham Nelson&#8217;s Inform (<em>*http://www.inform-fiction.org*</em>) and TADS, the Text Adventure Design System by Mike Roberts (<em>*http://www.tads.org*</em>), are two other interactive-fiction programming languages.</p>
</div>
</div>
</div>
<h1 id="_book_2_technical_system_specification" class="sect0"><a class="anchor" href="#_book_2_technical_system_specification"></a>BOOK 2: TECHNICAL SYSTEM SPECIFICATION</h1>
<div class="openblock partintro text-center partsubtitle">
<div class="content">
OR<br>
UNDER THE HOOD OF HUGO AND THE .HEX FILE FORMAT
</div>
</div>
<div class="sect1">
<h2 id="_introduction_3"><a class="anchor" href="#_introduction_3"></a>13. INTRODUCTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most Hugo programmers will likely never need to bother with the detailed information in this technical guide, but anyone porting Hugo to a new platform, writing an interface or tool for the language, or just interested in taking a closer look at how the Hugo Compiler generates a compiled program (and how the Hugo Engine interprets it) might find a technical specification useful, even if only to verify the occasional behavior or detail.
What this look under the hood attempts to do is to outline the configuration of data and code storage used by Hugo, as well as giving an extensive overview of how the various aspects of the language are compiled and interpreted.</p>
</div>
<div class="paragraph">
<p>This technical specification of the language internals is not a complete programming guide; familiarity with the language and a handy copy of the <em>Hugo Programming Manual</em> will be helpful, as will access to the Hugo source code (written in ANSI C and available at the time of this writing at <em><a href="ftp://ftp.ifarchive.org/if-archive/programming/hugo/source" class="bare">ftp://ftp.ifarchive.org/if-archive/programming/hugo/source</a></em>).</p>
</div>
<div class="paragraph">
<p>The standard Hugo source distribution is <strong>hugov31_source.tar.gz</strong>.
Operating-system-specific sources (i.e., implementations of non-portable functions) are typically <strong>hugov31_OSname_source.zip</strong>.</p>
</div>
<div class="paragraph">
<p>Please note that while this document does address differences between the current version of Hugo and previous versions, it is by no means complete in that respect.
For example, a current-version implementation of the Hugo Engine that conforms to this specification is not guaranteed to run programs compiled with all previous versions of Hugo.
For further elaboration on such differences, please see the Hugo source itself.</p>
</div>
<div class="sect2">
<h3 id="_how_hugo_works"><a class="anchor" href="#_how_hugo_works"></a>13.1. How Hugo Works</h3>
<div class="paragraph">
<p>The Hugo system is composed of two parts: the compiler and the engine (the interpreter).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The debugger is actually a modified build of the engine, with an additional command layer to facilitate debugging examination and manipulation of the runtime state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The compiler is responsible for reading source files and writing executable code; it does this by first tokenizing a given line of code&#8201;&#8212;&#8201;breaking it down into a series of byte values representing its contents&#8201;&#8212;&#8201;and then determining how the line(s) should be written (i.e., identified, optimized, and encoded) in order to fit properly into the current construct.
The compiler is also responsible for organizing and writing tables representing object data, property data, the dictionary, etc.</p>
</div>
<div class="paragraph">
<p>The engine in turn reads the file produced by the compiler (called a .HEX file, after the default extension), and follows the compiled instructions to execute low-level functions such as object movement, property assignment, text output, and expression evaluation.
These low-level operations are, for the most part, transparent to the programmer.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_organization_of_the_hex_file"><a class="anchor" href="#_organization_of_the_hex_file"></a>14. ORGANIZATION OF THE .HEX FILE</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_memory_map"><a class="anchor" href="#_memory_map"></a>14.1. Memory Map</h3>
<div class="paragraph">
<p>If all the separate segments of a .HEX file were stacked contiguously on top of each other, the resulting pile would look something like this:</p>
</div>
<table class="tableblock frame-all grid-all stripes-even fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">DATA STORAGE:</th>
<th class="tableblock halign-right valign-top">MAXIMUM SIZE:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Link data for .HLB files)</p></td>
<td class="tableblock halign-right valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text bank</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">16384K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dictionary</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special words</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array space</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event table</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property table</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object table</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grammar and Executable code</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1024K</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Header</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">(Bottom: <code>$000000</code>)<br>
<br>
MAXIMUM SIZE: 17792K bytes<sup class="footnote">[<a id="_footnoteref_61" class="footnote" href="#_footnotedef_61" title="View footnote.">61</a>]</sup></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each new segment begins on a boundary divisible by 16; an end-of-segment is padded with zeroes until the next boundary.
For each segment, data is general stored in sequential chunks, following two or more bytes giving information about the size of the table.</p>
</div>
<div class="paragraph">
<p><strong>Dictionary table:</strong> the first two bytes give the total number of entries.
The third byte is always 0, so that dictionary entry 0 is an empty string (<code>""</code>).
Following the dictionary table, a number of bytes may optionally be written for runtime dictionary expansion (where <code>$MAXDICTEXTEND</code> is specified at compile-time).</p>
</div>
<div class="paragraph">
<p><strong>Special words:</strong> the first two bytes give the total number of special words.</p>
</div>
<div class="paragraph">
<p><strong>Array space:</strong> the first 480 bytes give the global variable defaults (2 bytes each).
For each array entry, the first two bytes give the array length.</p>
</div>
<div class="paragraph">
<p><strong>Event table:</strong> the first two bytes give the total number of events.</p>
</div>
<div class="paragraph">
<p><strong>Property table:</strong> the first two bytes give the total number (<em>n</em>) of properties.
The following <em>n</em>*2 bytes give the property defaults.</p>
</div>
<div class="paragraph">
<p><strong>Object table:</strong> the first two bytes give the total number of objects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_header"><a class="anchor" href="#_the_header"></a>14.2. The Header</h3>
<div class="paragraph">
<p>The header is reserved a total of 64 bytes at the start of the compiled .HEX file, immediately preceding the grammar table.
It contains the bulk of information regarding table offsets, junction routine addresses, etc.: essentially, it is a map to where to find things in the file.</p>
</div>
<div class="paragraph">
<p>Compile with the -u switch to display a map of memory usage in the .HEX file that reflects the offsets and addresses encoded in the header.</p>
</div>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">Byte</th>
<th class="tableblock halign-right valign-top">Length</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>$00</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Hugo Compiler used<sup class="footnote">[<a id="_footnoteref_62" class="footnote" href="#_footnotedef_62" title="View footnote.">62</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>01</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID string (compiler-generated)<sup class="footnote">[<a id="_footnoteref_63" class="footnote" href="#_footnotedef_63" title="View footnote.">63</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>03</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serial number</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0B</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of start of executable code</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0D</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object table offset<sup class="footnote">[<a id="_footnoteref_64" class="footnote" href="#_footnotedef_64" title="View footnote.">64</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0F</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property table offset</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>11</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Event table offset</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>13</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array space offset</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>15</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dictionary offset</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>17</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Special words table offset</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>19</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Init</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1B</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Main</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1D</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Parse</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1F</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ParseError</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>21</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FindObject</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>23</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EndGame</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>25</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SpeakTo</code> routine indexed address</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>27</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Perform</code> routine indexed address<sup class="footnote">[<a id="_footnoteref_65" class="footnote" href="#_footnotedef_65" title="View footnote.">65</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>29</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text bank offset</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In .HDX (debuggable) Hugo executables only:</p>
</div>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-right valign-top">Byte</th>
<th class="tableblock halign-right valign-top">Length</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3A</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debuggable flag, set to 1</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3B</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute start of debugging information</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3E</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debug workspace (in array table)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>A note on data storage:</strong> whenever 16-bit words (i.e., two bytes representing a single value) are written or read, it is in low-byte/high-byte order, with the first byte being the remainder of <em>x</em>/256 (or the modulus <em>x</em>%256), and the second byte being the integer value <em>x</em>/256.<sup class="footnote">[<a id="_footnoteref_66" class="footnote" href="#_footnotedef_66" title="View footnote.">66</a>]</sup></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tokens_and_data_types"><a class="anchor" href="#_tokens_and_data_types"></a>15. TOKENS AND DATA TYPES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first two places to start inspecting how the Hugo compiler writes a <strong>.HEX</strong> file are: (1) what byte values are written to represent each individual token (i.e. keywords, built-in functions, etc.), and (2) how different data types and values are formatted.</p>
</div>
<div class="sect2">
<h3 id="_tokens"><a class="anchor" href="#_tokens"></a>15.1. Tokens</h3>
<table class="tableblock frame-all grid-all stripes-even stretch">
<colgroup>
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 4%;">
<col style="width: 16%;">
<col style="width: 4%;">
<col style="width: 16%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>00</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(not used)</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>01</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>02</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>)</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>03</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>04</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>05</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>06</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>07</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>08</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>09</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>;</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>}</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>]</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>10</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>11</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>12</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>13</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;=</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>14</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~=</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>15</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>17</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>18</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>19</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>,</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>else</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>elseif</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>while</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>do</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>1F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>case</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>20</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>for</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>21</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>return</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>22</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>break</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>23</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>and</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>or</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>25</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jump</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>26</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>run</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>27</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>is</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>28</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>not</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>29</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>local</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verb</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xverb</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>held</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multi</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>30</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multiheld</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>31</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>newline</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>32</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>anything</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>33</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>print</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>34</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>35</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>capital</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>36</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>text</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>37</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>graphics</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>38</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>color</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>39</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remove</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>move</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>to</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parent</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sibling</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>child</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>3F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>youngest</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>40</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eldest</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>41</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>younger</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>42</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>elder</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>43</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prop#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>44</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attr#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>45</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var#</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>46</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dictentry#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>47</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textdata#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>48</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>routine#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>49</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>object#</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eol#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>system</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>notheld</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>4F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multinotheld</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>50</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>window</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>51</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>random</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>52</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>word</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>53</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>locate</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>54</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parse$</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>55</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>children</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>56</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>in</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>57</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pause</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>58</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runevents</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>59</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arraydata#</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>5A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>call</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>5B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stringdata#</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>5C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>save</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>5D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restore</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>5E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quit</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>5F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>60</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>serial$</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>61</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cls</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>62</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scripton</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>63</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scriptoff</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>64</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restart</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>65</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hex</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>66</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>object</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>67</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xobject</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>68</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>69</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>array</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>6A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>printchar</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>6B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undo</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>6C</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dict</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>6D</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>recordon</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>6E</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>recordoff</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>6F</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>writefile</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>70</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readfile</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>71</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>writeval</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>72</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>readval</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>73</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>playback</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>75</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>colour</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>76</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>picture</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>77</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sound</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>78</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>music</code></p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>79</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repeat</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>7A</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addcontext<sup class="footnote">[<a id="_footnoteref_67" class="footnote" href="#_footnotedef_67" title="View footnote.">67</a>]</sup></code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>7B</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>video<sup class="footnote">[<a id="_footnoteref_68" class="footnote" href="#_footnotedef_68" title="View footnote.">68</a>]</sup></code></p></td>
<td class="tableblock halign-right valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-right valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some of these, particularly the early tokens, are as simple as punctuation marks that are recognized by the engine as delimiting expressions, arguments, etc.
Non-punctuation stand-alone tokens (<code>to</code>, <code>in</code>, <code>is</code>) are used for similar purposes, to give form to a particular construction.
Others, such as <code>save</code>, <code>undo</code>, <code>recordon</code>, and others are engine functions that, when read, trigger a specific action.</p>
</div>
<div class="paragraph">
<p>Note also tokens ending with <code>#</code>: these primarily represent data types that are not directly enterable as part of a program&#8201;&#8212;&#8201;the <code>#</code> character is separated and read as a discrete word in a parsed line of Hugo source.
For example, the occurrence of a variable name in the source will be compiled into <code>var#</code> (token $45) followed by two bytes giving the number of the variable being referenced. (See the following section on Data Types for more details.)</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_types_2"><a class="anchor" href="#_data_types_2"></a>15.2. Data Types</h3>
<div class="paragraph">
<p>Internally, all data is stored as 16-bit integers (that may be treated as unsigned as appropriate).
The valid range is -32768 to 32767.</p>
</div>
<div class="paragraph">
<p>Following are the formats for the various data types used by Hugo; to see them in practice, it is recommended to consult the Hugo C source code and the functions <code>CodeLine()</code> in <strong>hccode.c</strong>&#8201;&#8212;&#8201;for writing them in the compiler&#8201;&#8212;&#8201;and <code>GetValue()</code> and <code>GetVal()</code> in <strong>heexpr.c</strong>&#8201;&#8212;&#8201;for reading them via the engine.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
ATTRIBUTE: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;attr#&gt; &lt;1 byte&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The single byte represents the number of the attribute, which may range from $00 to $7F (0 to 127).</p>
</div>
<div class="paragraph">
<p>Attribute $10, for example, would be written as:</p>
</div>
<div class="paragraph">
<p><code>$44 10</code></p>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
DICTIONARY&#160;ENTRY: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;dictentry#&gt; &lt;2 bytes&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The 2 bytes (one 16-bit word) represent the address of the word in the dictionary table.
The empty string (<code>""</code>) is $00.</p>
</div>
<div class="paragraph">
<p>If the word &#8220;apple&#8221; was stored at the address $21A0, it would be written as:</p>
</div>
<div class="paragraph">
<p><code>$46 A0 21</code></p>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
OBJECT: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;object#&gt; &lt;2 bytes&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The two bytes (one 16-bit word) give the object number.</p>
</div>
<div class="paragraph">
<p>Objects $0002 and $01B0 would be written as, respectively:</p>
</div>
<div class="paragraph">
<p><code>$4A 02 00</code></p>
</div>
<div class="paragraph">
<p><code>$4A B0 01</code></p>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
PROPERTY: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;prop#&gt; &lt;1 byte&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The single byte gives the number of the property being referenced.</p>
</div>
<div class="paragraph">
<p>Property $21 would be written as:</p>
</div>
<div class="paragraph">
<p><code>$43 21</code></p>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
ROUTINE: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;routine#&gt; &lt;2 bytes&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>The two bytes (one 16-bit word) give the indexed address of the routine.
All blocks of executable code begin on an address divisible by 16<sup class="footnote">[<a id="_footnoteref_69" class="footnote" href="#_footnotedef_69" title="View footnote.">69</a>]</sup>; this allows 1024K of memory to be addressable via the range 0 to 65536. (Code is padded with empty ($00) values to the next address divisible by the address scale.)</p>
</div>
<div class="paragraph">
<p>For example, a routine beginning at $004004 would be divided by 16 and encoded as the indexed address $0401, in the form:</p>
</div>
<div class="paragraph">
<p><code>$48 01 04</code></p>
</div>
<div class="paragraph">
<p>This goes for routines, events, property routines, and even conditional code blocks following <code>if</code>, <code>while</code>, etc.</p>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
VALUE: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(i.e., <strong>INTEGER CONSTANT</strong>)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;value#&gt; &lt;2 bytes&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>A value may range from -32768 to 32767; negative numbers follow signed-value 16-bit convention by being <em>x</em> + 65536 where <em>x</em> is a negative number.</p>
</div>
<div class="paragraph">
<p>For example, the values 10 ($0A), 16384 ($4000), and -2 would be written as:</p>
</div>
<div class="paragraph">
<p><code>$4B 0A 00</code></p>
</div>
<div class="paragraph">
<p><code>$4B 00 40</code></p>
</div>
<div class="paragraph">
<p><code>$4B FE FF</code> ($FFFE = 65534 = -2 + 65536)</p>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
VARIABLE: 
</td>
<td class="hdlist2">
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>&lt;var#&gt; &lt;1 byte&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>A program may have up to 240 global variables (numbered 0 to 239), and 16 local variables for the current routine (numbered 240 to 255).
Since 240 + 16 = 256, the number of the variable being specified will fit into a single byte.</p>
</div>
<div class="paragraph">
<p>In the compiler, the first global variable (i.e. variable 0) is predefined as &#8220;object&#8221;.
It would be written as a sequence of two bytes:</p>
</div>
<div class="paragraph">
<p><code>$45 00</code></p>
</div>
<div class="paragraph">
<p>A routine&#8217;s second argument or local would be numbered 241 (since 240 ($F0) is the first local variable), and would be written as:</p>
</div>
<div class="paragraph">
<p><code>$45 F1</code></p>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_engine_parsing"><a class="anchor" href="#_engine_parsing"></a>16. ENGINE PARSING</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The engine is responsible for all the low-level parsing of an input line (i.e., player command).
Upon receiving an input, the engine parses the line into separate words, storing them in the word array.
The word array&#8201;&#8212;&#8201;i.e., that which is referenced in a Hugo program via <code>word[<em>n</em>]</code>&#8201;&#8212;&#8201;is an internal structure coded using the <code>word</code> token instead of <code>array#</code>.
A static, read-only parser string called <code>parse$</code> is used for storage of important data, such as a parser-error-causing word/phrase that cannot otherwise be communicated as an existing dictionary entry.</p>
</div>
<div class="paragraph">
<p>The first parsing pass also does the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Allows integer numbers for -32768 to 32767.</p>
</li>
<li>
<p>Time given in &#8220;<em>hh</em>:<em>mm</em>&#8221; (hours:minutes) format is converted to an integer number representing the total minutes since midnight, i.e., through the formula: <em>hh</em> * 60 + <em>mm</em>.
The original &#8220;<em>hh</em>:<em>mm</em>&#8221; is stored in <code>parse$</code>.</p>
</li>
<li>
<p>Up to one word (or set of words) in quotation marks is allowed; if found, it is stored in <code>parse$</code>.</p>
</li>
<li>
<p>Special words are processed, i.e., removals and user-defined punctuation are removed, compounds are combined, and synonyms are replaced.<sup class="footnote">[<a id="_footnoteref_70" class="footnote" href="#_footnotedef_70" title="View footnote.">70</a>]</sup></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If a user-defined <code>Parse</code> routine exists (i.e., if bytes $1D-1E in the header are not $0000), it is called next.
If the routine returns true, the engine parsing routine is called a second time to reconcile any changes to the word set.</p>
</div>
<div class="paragraph">
<p>If at any point the parser is unable to continue, either because an unknown word&#8201;&#8212;&#8201;one not found in the dictionary table&#8201;&#8212;&#8201;is found, or because there is a problem later, in grammar matching (described below), a parser error is generated, and parsing is stopped. (The unknown or otherwise problem-causing word is stored in <code>parse$</code>.)</p>
</div>
<div class="paragraph">
<p>The engine has a set of standard parser errors that may be overridden by a user-provided <code>ParseError</code> (i.e., if bytes $1F-20 in the header are not $0000).
If there is no <code>ParseError</code> routine, or if <code>ParseError</code> returns false, the default parser error message is printed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grammar"><a class="anchor" href="#_grammar"></a>17. GRAMMAR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The grammar table starts immediately following the header (at $40, or 64 bytes into the <strong>.HEX</strong> file).
It is used for matching against the player&#8217;s input line to determine the verbroutine to be called, and if applicable, the object(s) and xobject (i.e, the indirect object).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the input line begins with an object instead of a verb&#8201;&#8212;&#8201;i.e., if it is directed toward a character, as in &#8220;Bob, get the object&#8221;, then grammar is matched against the phrase immediately following the initial object.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The grammar table is comprised of a series of verb or xverb (i.e., non-action verb) blocks, each beginning with either <code>verb</code> ($2C) or <code>xverb</code> ($2D).
A $FF value instead of either <code>verb</code> or <code>xverb</code> indicates the end of the grammar table.
A grammar table that looks like</p>
</div>
<div class="literalblock">
<div class="content">
<pre>000040: FF</pre>
</div>
</div>
<div class="paragraph">
<p>has no entries.</p>
</div>
<div class="paragraph">
<p>Following the verb type indicator is a single byte giving the number of words (i.e., synonyms) for this particular verb.
Following that are the dictionary addresses of the individual words.</p>
</div>
<div class="paragraph">
<p>Think of the simple grammar definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">verb "get", "take"
    * object DoGet</code></pre>
</div>
</div>
<div class="paragraph">
<p>If this were the first verb defined, the start of the grammar table would look like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>000040: 2C 02 x2 x1 y2 y1</pre>
</div>
</div>
<div class="paragraph">
<p>where $<em>x1x2</em> is the dictionary address of &#8220;get&#8221;, and $<em>y1y2</em> is the dictionary address of &#8220;take&#8221;.</p>
</div>
<div class="paragraph">
<p>With v2.5 was introduced a separate&#8201;&#8212;&#8201;although rarely used&#8201;&#8212;&#8201;variation to the verb header.
A verb or xverb definition can contain something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">verb get_object</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>get_object</code> is an object or some other value.
In this case, the verb word is <code>get_object.noun</code> instead of an explicitly defined word.
The grammar table in this case would look like</p>
</div>
<div class="literalblock">
<div class="content">
<pre>000040: 2C 01 FF FF 4A x2 x1</pre>
</div>
</div>
<div class="paragraph">
<p>where $FFFF is the signal that instead of a dictionary word address, the engine must read the following discrete value, where $4A is the <code>object#</code> token, and $<em>x1x2</em> is the object number of <code>get_object</code>.
This extension is provided so that grammar may be dynamically coded and changed at runtime.</p>
</div>
<div class="paragraph">
<p>Following the verb header giving the number of verb words and the dictionary address of each is one or more grammar lines, each beginning with a <code>*</code> signifying the matched verb word.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For an elaboration of valid grammar syntax specification, please see the Hugo Manual.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Grammar lines are encoded immediately following the verb header, so that in the first example given above,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">verb "get", "take"
    * object DoGet</code></pre>
</div>
</div>
<div class="paragraph">
<p>becomes:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>000040: 2C 02 x2 x1 y2 y1
000046: 08 66 48 r2 r1
00004B: FF</pre>
</div>
</div>
<div class="paragraph">
<p>where $<em>r1r2</em> is the indexed routine address of <code>DoGet</code>.</p>
</div>
<div class="paragraph">
<p>The $FF byte marks the end of the current verb definition.
Immediately following this is either another <code>verb</code> or <code>xverb</code> token, or a second $FF to indicate the end of the verb table.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executable_code"><a class="anchor" href="#_executable_code"></a>18. EXECUTABLE CODE</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_a_simple_program"><a class="anchor" href="#_a_simple_program"></a>18.1. A Simple Program</h3>
<div class="paragraph">
<p>The following is a simple Hugo program:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">routine main
{
    print "Hello, Sailor!"
    pause
    return
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will print &#8220;Hello, Sailor!&#8221;, wait for a keypress, and exit.
When compiled, the grammar table and executable code look like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>000040: FF 00 00 00 33 6B 0E 00 5C 79 80 80 83 40 34 67
000050: 75 7D 80 83 86 35 4C 57 21 4C 0D 21 4C 00 00 00</pre>
</div>
</div>
<div class="paragraph">
<p>Here is what those 32 bytes represent:</p>
</div>
<div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000040: FF</pre>
</div>
</div>
<div class="paragraph">
<p>The grammar table is empty; no grammar has been defined.
The first entry in the grammar table is $FF, signifying end-of-table.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000041: 00 00 00</pre>
</div>
</div>
<div class="paragraph">
<p>Padding to the next address boundary.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000044: 33</pre>
</div>
</div>
<div class="paragraph">
<p>A <code>print</code> token.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000045: 5B 0E 00 5C 79 80 80 83 40 34 67 75 7D 80 83 86 35
                 H  e  l  l  o  ,     S  a  i  l  o  r  !</pre>
</div>
</div>
<div class="paragraph">
<p>A <code>stringdata#</code> ($5B) token of 14 characters ($000E), followed by the encoded string &#8220;Hello, Sailor!&#8221; (Since this is a <code>print</code> statement, the text is written directly into the code instead of in the text bank.)</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000056: 4C</pre>
</div>
</div>
<div class="paragraph">
<p>An <code>eol#</code> token, to signal end-of-line for the current <code>print</code> statement.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000057: 57</pre>
</div>
</div>
<div class="paragraph">
<p>A <code>pause</code> token.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000058: 21 4C</pre>
</div>
</div>
<div class="paragraph">
<p>A <code>return</code> token, followed by <code>eol#</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If there is a value being returned, that expression comes between $21 and $4C.
Since in this case the expression is blank&#8201;&#8212;&#8201;since there is no value being explicitly returned&#8201;&#8212;&#8201;the $4C comes immediately.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>00005A: 0D 21 4C</pre>
</div>
</div>
<div class="paragraph">
<p>The closing brace symbol $0D marks the end of the routine.
All routines are automatically followed by a default $21 and $4C&#8201;&#8212;&#8201;the equivalent of <code>return false</code>.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_expressions"><a class="anchor" href="#_expressions"></a>18.2. Expressions</h3>
<div class="paragraph">
<p>Expressions are encoded as the tokenized representation of the expression.
Consider the following code excerpts, assuming that global initializations have included:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">global glob
array arr[10]</code></pre>
</div>
</div>
<div class="paragraph">
<p>and, within the current routine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">local loc</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Assume also that <code>glob</code> and <code>loc</code> are the first global variable and first local variable defined.)</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">loc = 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is coded using the pattern</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;var#&gt; &lt;1 byte&gt; = &lt;value#&gt; &lt;2 bytes&gt; &lt;eol#&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>so that the resulting code looks like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>45 F0 05 4B 0A 00 4C
loc   =  10</pre>
</div>
</div>
<div class="paragraph">
<p>The variable number $F0 specifies the first local variable (i.e., local variable 0, where the variable number of local variable <em>n</em> is 240+<em>n</em>).</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">glob = 5 * (2 + 1)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, this is coded as a variable assignment:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;var#&gt; &lt;1 byte&gt; = &lt;expression&gt; &lt;eol#&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>45 0C 05 4B 05 00 08 01 4B 02 00 07 4B 01 00 02 4C
glob  =  5        *  (  2        +  1        )</pre>
</div>
</div>
<div class="paragraph">
<p>Since the compiler always defines a number of global variables itself, the first-defined global is never 0.
If there are 12 pre-defined globals, the first user-defined global has variable number $0C.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">arr[loc] = word[2]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The pattern for this array element assignment is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;arraydata#&gt; [ &lt;expr&gt; ] = &lt;word&gt; [ &lt;expr&gt; ] &lt;eol#&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>59 F0 00 0E 45 F0 0F 05 52 0E 4B 02 00 0F 4C
arr      [ loc    ]  = word [ 2        ]</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that <code>word[<em>n</em>]</code> is not handled the same as <code>array[<em>n</em>]</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">array[1] = random(obj.prop #2)</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Assuming that <code>obj</code> and <code>prop</code> are the first-defined object and property, respectively.)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;arraydata#&gt; [ &lt;expr&gt; ] = random ( &lt;expr&gt; ) &lt;eol#&gt;</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>59 F0 00 0E 4B 01 00 0F 05 51
arr      [  1        ]  =  random

01 4A 00 00 03 43 06 10 4B 02 00 02 4C
(  obj      .  prop  #  2        )</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">glob += (loc++ * arr[7])</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>45 0C 07 05 01 45 F0 07 07 08
glob  +  =  (  loc   +  +  *

59 F0 00 0E 4B 07 00 0F 02 4C
arr      [  7        ]  )</pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if loc = glob + 11</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <em>APPENDIX A: CODE PATTERNS</em> for details on how if statements and other conditionals are coded.
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>18 21 00 45 F0 05 45 0C 07 4B 0B 00 4C
if       loc   =  glob  +  11</pre>
</div>
</div>
<div class="paragraph">
<p>2 bytes give the skip distance (i.e., $0021 bytes) to the next-executed instruction if the current expression evaluates false.</p>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encoding_text"><a class="anchor" href="#_encoding_text"></a>19. ENCODING TEXT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Text is written uncompressed into the <strong>.HEX</strong> file (since there is not really any need for nor any great memory savings from whatever minor compression might be practical).
All text, however&#8201;&#8212;&#8201;including text in <code>print</code> statements, dictionary entries, and the text bank&#8201;&#8212;&#8201;is encoded by adding $14 (decimal 20) to each 8-bit ASCII value in order to prevent casual browsing of game data.</p>
</div>
<div class="paragraph">
<p>Text in <code>print</code> statements is written directly into the code in the form:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;stringdata#&gt; &lt;2 bytes&gt; ...encoded string...</pre>
</div>
</div>
<div class="paragraph">
<p>where the length of the string is given by the first two bytes following <code>&lt;stringdata#&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Text in dictionary entries is encoded in the dictionary table.
A dictionary entry with a given address (<em>addr</em>) appears in the dictionary at <em>addr</em>+2 (since the first two bytes in the dictionary table are reserved for the number of entries) as:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;1 byte&gt; ...encoded dictionary entry...</pre>
</div>
</div>
<div class="paragraph">
<p>where the maximum allowable length of a dictionary entry is 255 characters.</p>
</div>
<div class="paragraph">
<p>Text written to the text bank is encoded at a given address in the text bank as:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;2 bytes&gt; ...encoded text...</pre>
</div>
</div>
<div class="paragraph">
<p>where the length of the encoded text is given by the first two bytes</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that an address in the text bank requires 3 bytes in the game code, however, since the length of the text bank can exceed 64K.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_object_table"><a class="anchor" href="#_the_object_table"></a>20. THE OBJECT TABLE</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_objects_2"><a class="anchor" href="#_objects_2"></a>20.1. Objects</h3>
<div class="paragraph">
<p>The object table begins with two bytes giving the total number of objects.
The objects then follow in sequential order.
Each object requires 24 bytes:<sup class="footnote">[<a id="_footnoteref_71" class="footnote" href="#_footnotedef_71" title="View footnote.">71</a>]</sup></p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0 - 15</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Attributes (128 bits in total, 1 bit/attribute)</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>16 - 17</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parent</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>18 - 19</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sibling</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>20 - 21</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Child</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>22 - 23</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property table position</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The offset of any given object <em>n</em> from the start of the object table can therefore be found using:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>offset = <em>n</em> * 24 + 2</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If a parent has no parent, sibling, and/or child, the appropriate two-byte word is set to $0000.</p>
</div>
<div class="paragraph">
<p>The property table position represents the offset of the beginning of the given object&#8217;s property data from the start of the property table, as described below.</p>
</div>
</div>
<div class="sect2">
<h3 id="_attributes_3"><a class="anchor" href="#_attributes_3"></a>20.2. Attributes</h3>
<div class="paragraph">
<p>The 16 bytes of the attribute array contain 8 bits each, giving a total of 128 possible attributes.<sup class="footnote">[<a id="_footnoteref_72" class="footnote" href="#_footnotedef_72" title="View footnote.">72</a>]</sup>
Essentially, if the bits are thought of sequentially in that the first byte represents attributes 0 to 7, the second byte represents attributes 8 to 15, the third 16 to 23, and the fourth and final byte 24 to 31.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_property_table"><a class="anchor" href="#_the_property_table"></a>21. THE PROPERTY TABLE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The property table begins with two bytes giving the total number of properties.
This is followed by a list of default property values, each of one 16-bit (2 byte) word each.
After this, the properties themselves begin, starting with object 0.</p>
</div>
<div class="paragraph">
<p>The property values are entered sequentially, with no explicit identification of what object a particular value belongs to.
It is the object&#8217;s object-table entry that gives the location of a given object&#8217;s property data in the property table.</p>
</div>
<div class="paragraph">
<p>Each property requires at least 2 bytes:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of data words</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2 -</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data in 16-bit word form (2 bytes each)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Property routines are given a &#8220;length&#8221; of 255 ($FF), which indicates that one word of data follows, representing the (indexed) address of the routine.</p>
</div>
<div class="paragraph">
<p>At the end of each object in the property table comes the property number 255 ($FF)&#8201;&#8212;&#8201;not to be confused with the &#8220;length&#8221; 255, which denotes a routine address. &#8220;Property&#8221; number 255 is an exception to the two-byte minimum; it does not have any attached length byte or data words.
Each object has a place in the object table, even if it has no properties per se.
A propertyless object simply has the value 255 at its position in the property table.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Property data being written for an <strong>.HLB</strong> linkable file is slightly altered.
For example, property routines are marked by $FE instead of $FF.
See <em>XIII.b The Linker</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_before_after_and_other_complex_properties"><a class="anchor" href="#_before_after_and_other_complex_properties"></a>21.1. Before, After, and Other Complex Properties</h3>
<div class="paragraph">
<p>Consider the following complex property for an unspecified object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">after
{
    object DoGet
    {
        "You pick up the object."
    }
    object
    {
        "You can't do that with the object."
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A simple explanation of the above is that <code>&lt;object&gt;.after</code> is called following a call to a verbroutine with which <code>&lt;object&gt;</code> was involved.
If <code>&lt;object&gt;</code> was the object of the verbroutine (i.e., the <code>object</code> global), and the <code>verbroutine</code> global was <code>DoGet</code>, the first block runs.
The second block will run if no previous block has run.
For a full description of complex properties, see the Hugo Manual.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First of all, the entry in the property table for <code>&lt;object&gt;.after</code> will point to the first line of code in the property routine.
Arbitrarily, let&#8217;s assume this is $000044: the earliest possible code address following a blank grammar table.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>000040: FF 00 00 00 45 00 48 1A 00 25 15 00 47 00 00 00
000050: 0D 00 00 00 45 00 25 18 00 47 00 16 00 0D 00 00
000060: 0D 21 29</pre>
</div>
</div>
<div class="paragraph">
<p>That can be compared to the original source code as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000044: 45 00 48 1A 00</pre>
</div>
</div>
<div class="paragraph">
<p>The initial <code>object DoGet</code> block header, assuming that the engine-defined global <code>object</code> is global variable number 0, and that the address of <code>DoGet</code> is $000068 (represented as an indexed address as $001A).</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000049: 25 15 00</pre>
</div>
</div>
<div class="paragraph">
<p>Following the <code>jump</code> token ($25) is the indexed address to jump to if <code>object DoGet</code> isn&#8217;t matched.
In this case, it is $0015, which translates to the absolute address $000054 (i.e., the address of the next header).</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>00004C: 47 00 00 00</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;textdata#&gt;</code> label is followed by three bytes giving the address in the text bank of the printed string &#8220;You pick up the object.&#8221;</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000050: 0D 00 00 00</pre>
</div>
</div>
<div class="paragraph">
<p>$0D signals the end of this block of executable code, followed by zeroes padding to the next address boundary.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000054: 45 00</pre>
</div>
</div>
<div class="paragraph">
<p>This block header is simply <code>object</code>.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000056: 25 18 00</pre>
</div>
</div>
<div class="paragraph">
<p>As above, following the <code>jump</code> token ($25) is the indexed address to jump to if the block header isn&#8217;t matched.
In this case, it is $0018, which translates to $000060 (i.e., the closing $0D of the <code>after</code> routine).</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000059: 47 00 19 00 0D 00 00</pre>
</div>
</div>
<div class="paragraph">
<p>The second line of text is printed here, followed by $0D to signal the end of this block of code and zero-padding to the next address boundary.</p>
</div>
</div>
</div>
</li>
<li>
<p></p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>000060: 0D 21 29 4C</pre>
</div>
</div>
<div class="paragraph">
<p>A $0D signals the end of the <code>after</code> routine.
Property routines are followed by an automatic $21, $29, and $4C (i.e., <code>return true</code>).</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_event_table"><a class="anchor" href="#_the_event_table"></a>22. THE EVENT TABLE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The event table begins with two bytes giving the total number of events.
Each event requires 2 bytes:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>0 - 1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associated object (0 for a global event)</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><code>2 - 3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of event routine</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_the_dictionary_and_special_words"><a class="anchor" href="#_the_dictionary_and_special_words"></a>23. THE DICTIONARY AND SPECIAL WORDS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dictionary"><a class="anchor" href="#_dictionary"></a>23.1. Dictionary</h3>
<div class="paragraph">
<p>The dictionary begins with two bytes giving the total number of entries.
Each dictionary entry is composed of 1 or more bytes:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of entry (number of characters)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1 -</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry as an encrypted string</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_special_words"><a class="anchor" href="#_special_words"></a>23.2. Special Words</h3>
<div class="paragraph">
<p>The special words table begins with two bytes giving the total number of entries.
Each entry requires 5 bytes:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type (0 = synonym, 1 = removal, 2 = compound, 3 = user-defined punctuation)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1 - 2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First dictionary address</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3 - 4</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Second address (for synonyms and compounds)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resourcefiles"><a class="anchor" href="#_resourcefiles"></a>24. RESOURCEFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A resourcefile is used to store multiple images, sounds, music tracks, etc. in one manageable file format.
The format of a Hugo resourcefile is fairly straightforward.</p>
</div>
<div class="paragraph">
<p>Every resourcefile starts with a header of 6 bytes:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r</code> <strong>[Note: old 24-bit resourcefiles used <code>R</code>]</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>01</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version number (i.e., 31 for version 3.1)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>02 - 03</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>04 - 05</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of index, in bytes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Following the header is the index itself.
Each resource entry in the index looks like:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>00</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of entry name (i.e., <em>n</em> bytes)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>01 - <em>n</em></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4 bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset in resourcefile from end of index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4 bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of resource, in bytes</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Older resourcefiles (designated by <code>R</code> in the header) had a limit of 17 MB on resourcefile size (or of any contained resource) and used the following for offset and length:</p>
</div>
<table class="tableblock frame-all grid-none stripes-odd fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-center valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3 bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Offset in resourcefile from end of index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3 bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Length of resource, in bytes</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These are still supported by the Hugo Engine, but the compiler now writes 32-bit resourcefiles.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Resources are then appended sequentially immediately following the index.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_hugo_compiler_and_how_it_works"><a class="anchor" href="#_the_hugo_compiler_and_how_it_works"></a>25. THE HUGO COMPILER AND HOW IT WORKS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For reference, here is a simplified map of the compiler&#8217;s function calls, along with the source files in which they are located.
The leftmost functions are all called from <code>main()</code> in <strong>hc.c</strong>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>+----------------+
| ParseCommand() | - Parse command line, including filenames,
|    hcmisc.c    |   switches, and other settings
+----------------+
        |
+----------------+
|  OpenFiles()   | - Open initial source file, objectfile,
|   hcfile.c     |   listing, and temporary files
+----------------+
        |
+----------------+  +----------------------------------+
|    Pass1()     |  | GetLine()            - hcfile.c  |
|    hcpass.c    |--|                                  |
|                |  | CompilerDirective()  - hccomp.c  | [1.1]
| (Definitions)  |  | CompilerMem()        - hccomp.c  |
+----------------+  | AddDirectory()       - hcmisc.c  |
        |           |                                  |
        |           | Def...()             - hcdef.c   | [1.2]
        |           |                                  |
        |           | PrinttoAll()         - hcmisc.c  |
        |           |                                  |
        |           | (LinkerPass1()       - hclink.c) | [1.3]
        |           +----------------------------------+
        |
        |
+----------------+  +----------------------------+
|    Pass2()     |  | GetWords()     - hcfile.c  |
|    hcpass.c    |--|                            |
|                |  | Build...()     - hcbuild.c | [2.1]
|    (Build)     |  |                            |
+----------------+  | (LinkerPass2() - hclink.c) | [2.2]
        |           +----------------------------+
        |                          |
        |                          |
+----------------+       +--------------------------+
|    Pass3()     |       | BuildCode()  - hcbuild.c | [2.3]
|    hcpass.c    |--+    +--------------------------+
|                |  |                 |
| (Resolve/Link) |  |       +-----------------------+
+----------------+  |       | Code...()  - hccode.c | [2.4]
                    |       | Codeline() - hccode.c |
                    |       +-----------------------+
                    |                      |          [2.5]
                    |             \+------------------------+
                    +--------------| Write...()  - hcfile.c |
                                  /| WriteCode() - hcfile.c |
                                   +------------------------+</pre>
</div>
</div>
<div class="paragraph">
<p>In <strong>Pass 1</strong>, the initial source file and any included files are read into one contiguous temporary file (called <code>allfile</code> in the source).
Any compiler directives (i.e., lines beginning with <code>#</code>, <code>$</code> or <code>@</code>) are processed here [1.1], as are definitions of objects, attributes, properties, global variables, constants, and routines [1.2].
Once a line of source has been parsed and split into discrete words, it is written to <code>allfile</code> using <code>PrinttoAll()</code>.</p>
</div>
<div class="paragraph">
<p><strong>Pass 2</strong> is where the bulk of compilation takes place.
Lines of pre-parsed source are read from <code>allfile</code>.
After Pass 1, all symbols (except local variables) are known.
Individual constructs such as verbs, objects, routines, and events are processed via <code>Build&#8230;&#8203;()</code> functions (i.e., <code>BuildVerb()</code>, <code>BuildObject()</code>, etc.) [2.1].</p>
</div>
<div class="paragraph">
<p>At any point in <code>Pass2()</code>, the tokenized line currently being processed is held in the global <code>word[]</code> array, with the number of tokens in the current line in <code>words</code>.</p>
</div>
<div class="paragraph">
<p>Sections of executable code, such as routines, events, or property routines, are generated by calling <code>BuildCode()</code> [2.3], which in turn calls appropriate <code>Code&#8230;&#8203;()</code> functions as necessary (i.e., <code>CodeDo()</code>, <code>CodeIf()</code>, <code>CodeWhile()</code>, etc.), or simply <code>CodeLine()</code> for any line that doesn&#8217;t require special treatment [2.4].
Compiled byte-code is emitted to the objectfile via <code>WriteCode()</code> [2.5].</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In a departure from the normal order of defining symbols, synonyms, compounds words, removals, and user-defined punctuation are defined in <code>Pass2()</code>.
Local variables are defined in <code>BuildCode()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By <strong>Pass 3</strong>, all executable code has been written to the objectfile, structures exist in memory representing to-be-constructed tables, and the text bank (long sections of printed text) exists in a temporary file.
First, <code>ResolveAddr()</code> (from <strong>hcmisc.c</strong>) patches all references that were unknown at the time they were compiled.
<code>Pass3()</code> then writes the object table, the property table, the event table, the array table, synonyms/removals/compounds/user-defined punctuation, the dictionary, and the text bank.</p>
</div>
<div class="paragraph">
<p>If a debuggable executable (called an .HDX file) is being generated, the last thing <code>Pass3()</code> does is to write the symbolic names of all objects, properties, attributes, aliases, globals, routines, events, and arrays to the end of the file.</p>
</div>
<div class="sect2">
<h3 id="_compile_time_symbol_data"><a class="anchor" href="#_compile_time_symbol_data"></a>25.1. Compile-Time Symbol Data</h3>
<div class="paragraph">
<p>Here are the various structures, arrays, and variables used by the compiler to keep track of symbols at compile-time:</p>
</div>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Objects:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>objctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of objects</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>object[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of object <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>object_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>objattr[n][s]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute set <em>s</em> (32 attributes/set)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oprop[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location in <code>propdata[]</code> array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>objpropaddr[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location in property table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parent[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">physical parent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sibling[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">physical sibling</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>child[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">physical child</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oreplace[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of times replaced using the <code>replace</code> directive</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Attributes:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attrctr total</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attribute[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of attribute <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>attribute_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Properties:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of property <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propset[p]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true if property <em>p</em> has been defined for current object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propadd[p]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ADDITIVE_FLAG</code> bit is true if property <em>p</em> is additive;<br></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COMPLEX_FLAG</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bit is true if property <em>p</em> is a complex property</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propdata[a][b]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">array of all property data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>propheap</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">size of property table</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Labels:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>labelctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of labels</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of label <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>label_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>laddr[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indexed address of label</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Routines:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>routinectr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of routines</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>routine[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of routine <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>routine_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>raddr[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indexed address of routine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rreplace[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of times replaced using the <code>replace</code> directive</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Events (although not really symbols):</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of events</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventin[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">object to which event <em>n</em> is attached</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eventaddr[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indexed address of event code</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Aliases:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aliasctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of aliases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alias[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of alias <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>alias_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>aliasof[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">attribute or property aliased<br>
(either the attribute number, or the property number plus <code>MAXATTRIBUTES</code>)</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Global variables:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>globalctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of global variables</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>global[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of global <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>global_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>globaldef[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">initial value of global at startup</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Local variables:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>localctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of locals defined in the current code block</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>local[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of local <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>local_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>unused[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true until local <em>n</em> is used</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Constants:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of constants</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constant[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of constant <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constant_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>constantval[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">defined value of constant</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Array:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arrayctr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of arrays</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>array[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">symbolic name of array <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>array_hash[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hash value of symbol name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arrayaddr[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location in array table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arraylen[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">length of array <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arraysize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current size of array table</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Dictionary:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dictcount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of dictionary entries</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dicttable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current size of dictionary</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lexentry[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dictionary entry <em>n</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lexaddr[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location of entry <em>n</em> in dictionary table</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lexnext[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location of word following <em>n</em> in the <code>lexentry[]</code> array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lexstart[c]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location of first word beginning with character <em>c</em> in <code>lexentry[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lexlast[c]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">location of last word beginning with character <em>c</em> in <code>lexentry[]</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Special words:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>syncount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">total number of synonyms, compounds, removals, and user-defined punctuation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>syndata[n]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>synstruct</code> structure of <em>n</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The use of <code>&#8230;&#8203;_hash[n]</code> is a rough form of hash-table coding.
The compiler, in <code>FindHash()</code> in <strong>hcdef.c</strong>, produces an <em>almost</em> unique value for a given symbol based on the characters in it.
Only if <code>&#8230;&#8203;_hash[n]</code> matches an expected value does a more expensive <code>strcmp()</code> string comparison have to be performed to validate the &#8220;match&#8221; (or reject it).</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_linker"><a class="anchor" href="#_the_linker"></a>25.2. The Linker</h3>
<div class="paragraph">
<p>The compiler has to be able to both create a linkable file (called an .HLB file, as it is usually a precompiled version of the library) and read it back when a <code>#link</code> directive is encountered.</p>
</div>
<div class="paragraph">
<p>In the first case, the compiler writes an .HLB file whenever the <code>-h</code> switch is set at invocation.
In order to do that, it does the following things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Property routines, normally marked by a &#8220;length&#8221; of 255, are changed to a &#8220;length&#8221; of 254.</p>
</li>
<li>
<p>All addresses are appended to the end of the file instead of being resolved in <code>Pass3()</code>. (Labels, being local and therefore not visible outside the .HLB file, are an exception; they are resolved as usual.)</p>
</li>
<li>
<p>Additional data (such as symbolic names) of objects and properties are written in <code>Pass3()</code>.
Immediately following the object table, the compiler, in <code>Pass3()</code>, writes all the relevant data for attributes, aliases, globals, constants, routines.</p>
</li>
<li>
<p>The value <code>$$</code> is written into the ID string in the header.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Reading back (i.e., linking) an .HLB file is done in two steps: <code>LinkerPass1()</code> [1.3], called from <code>Pass1()</code>, and <code>LinkerPass2()</code>[2.2], called from <code>Pass2()</code>. (The linker routines are found in the source file <strong>hclink.c</strong>.)</p>
</div>
<div class="paragraph">
<p><code>LinkerPass1()</code> simply skims the .HLB file for symbols and defines them accordingly, along with any relevant data.
It also reads the .HLB file&#8217;s text bank and writes it to the current file&#8217;s temporary file containing the current text bank.
Note that since linking must be done before any other definitions, there is no need to calculate offsets here for things like object numbers, addresses in the text bank, etc.</p>
</div>
<div class="paragraph">
<p><code>LinkerPass2()</code> is responsible for reading the actual executable code.
It does this mainly with a simple read/write (in blocks of 16K or smaller).
It then reads the resolve table appended to the end of the .HLB file and writes it to the current resolve table so that <code>Pass3()</code> can properly resolve the offset code addresses at the end of compilation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since the actual start of executable code will vary depending on the length of the grammar table, it is not known at the .HLB file&#8217;s compile-time what a given address may ultimately be.
It is only known that, for example, routine <em>R</em> is called from position <em>P</em> in the source.
Both <em>R</em> and <em>P</em> must be adjusted for the offset.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In <code>Pass3()</code>, <code>ResolveAddr()</code> is now able to resolve addresses from the linked file.
Additionally, those properties with a &#8220;length&#8221; of 254 are adjusted so that their values&#8212;&#8203;which are really addresses of property routines&#8212;&#8203;are adjusted as per the offset; the &#8220;length&#8221; of these properties is then written as 255.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_hugo_engine_and_how_it_works"><a class="anchor" href="#_the_hugo_engine_and_how_it_works"></a>26. THE HUGO ENGINE AND HOW IT WORKS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is a simple map of the main engine loop and the associated functions:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4wLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDEvUFItU1ZHLTIwMDEwNzE5L0RURC9zdmcxMC5kdGQiPgo8c3ZnIHdpZHRoPSIzNGNtIiBoZWlnaHQ9IjQxY20iIHZpZXdCb3g9IjE5OCAxMTggNjYzIDgwMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgPGc+CiAgICA8cGF0aCBzdHlsZT0iZmlsbDogI2Y4Y2VjYyIgZD0iTSA1NjAgMTIwIEwgODAwLDEyMCBDIDgzMy4xMzcsMTIwIDg2MCwxMzcuOTA5IDg2MCwxNjAgQyA4NjAsMTgyLjA5MSA4MzMuMTM3LDIwMCA4MDAsMjAwIEwgNTYwLDIwMCBDIDUyNi44NjMsMjAwIDUwMCwxODIuMDkxIDUwMCwxNjAgQyA1MDAsMTM3LjkwOSA1MjYuODYzLDEyMCA1NjAsMTIweiIvPgogICAgPHBhdGggc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgZD0iTSA1NjAgMTIwIEwgODAwLDEyMCBDIDgzMy4xMzcsMTIwIDg2MCwxMzcuOTA5IDg2MCwxNjAgQyA4NjAsMTgyLjA5MSA4MzMuMTM3LDIwMCA4MDAsMjAwIEwgNTYwLDIwMCBDIDUyNi44NjMsMjAwIDUwMCwxODIuMDkxIDUwMCwxNjAgQyA1MDAsMTM3LjkwOSA1MjYuODYzLDEyMCA1NjAsMTIwIi8+CiAgICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMDAwMDAwO3RleHQtYW5jaG9yOm1pZGRsZTtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjY4MCIgeT0iMTU1LjA2MSI+CiAgICAgIDx0c3BhbiB4PSI2ODAiIHk9IjE1NS4wNjEiPlJ1blJvdXRpbmUoImluaXQiIHJvdXRpbmUpPC90c3Bhbj4KICAgICAgPHRzcGFuIHg9IjY4MCIgeT0iMTc0LjgxNyI+aGVydW4uYzwvdHNwYW4+CiAgICA8L3RleHQ+CiAgPC9nPgogIDx0ZXh0IGZvbnQtc2l6ZT0iMTIuOCIgc3R5bGU9ImZpbGw6ICMwMDAwMDA7dGV4dC1hbmNob3I6c3RhcnQ7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjtmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjY4MCIgeT0iMTYwIj4KICAgIDx0c3BhbiB4PSI2ODAiIHk9IjE2MCI+PC90c3Bhbj4KICA8L3RleHQ+CiAgPGc+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogI2ZmZTU5OSIgeD0iMjAwIiB5PSIxMjAiIHdpZHRoPSIxMjAiIGhlaWdodD0iODAiLz4KICAgIDxyZWN0IHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHg9IjIwMCIgeT0iMTIwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjgwIi8+CiAgICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMDAwMDAwO3RleHQtYW5jaG9yOm1pZGRsZTtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjI2MCIgeT0iMTU0Ljc5NCI+CiAgICAgIDx0c3BhbiB4PSIyNjAiIHk9IjE1NC43OTQiPlJ1bkdhbWUoKTwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSIyNjAiIHk9IjE3NC41NSI+aGVydW4uYzwvdHNwYW4+CiAgICA8L3RleHQ+CiAgPC9nPgogIDxnPgogICAgPGxpbmUgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgeDE9IjUwMC4wMTgiIHkxPSIxNjAiIHgyPSIzMzEuOTU5IiB5Mj0iMTYwIi8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSIzMzEuOTU5LDE1NSAzMjEuOTU5LDE2MCAzMzEuOTU5LDE2NSAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iMzMxLjk1OSwxNTUgMzIxLjk1OSwxNjAgMzMxLjk1OSwxNjUgIi8+CiAgPC9nPgogIDxnPgogICAgPHJlY3Qgc3R5bGU9ImZpbGw6ICNmZmU1OTkiIHg9IjMyMCIgeT0iMjQwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjgwIi8+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4PSIzMjAiIHk9IjI0MCIgd2lkdGg9IjI2MCIgaGVpZ2h0PSI4MCIvPgogICAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogIzAwMDAwMDt0ZXh0LWFuY2hvcjptaWRkbGU7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsIiB4PSI0NTAiIHk9IjI3NC43OTQiPgogICAgICA8dHNwYW4geD0iNDUwIiB5PSIyNzQuNzk0Ij5SdW5Sb3V0aW5lKCJtYWluIiByb3V0aW5lKTwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSI0NTAiIHk9IjI5NC41NSI+aGVydW4uYzwvdHNwYW4+CiAgICA8L3RleHQ+CiAgPC9nPgogIDxnPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6ICNkNGUxZjUiIHBvaW50cz0iMzQ5LjExOCwzNjAgNTgwLDM2MCA1NTAuODgyLDQ0MCAzMjAsNDQwICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSIzNDkuMTE4LDM2MCA1ODAsMzYwIDU1MC44ODIsNDQwIDMyMCw0NDAgIi8+CiAgICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMDAwMDAwO3RleHQtYW5jaG9yOm1pZGRsZTtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjQ1MCIgeT0iNDA0LjY3MiI+CiAgICAgIDx0c3BhbiB4PSI0NTAiIHk9IjQwNC42NzIiPlBsYXllciBpbnB1dDwvdHNwYW4+CiAgICA8L3RleHQ+CiAgPC9nPgogIDxnPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6ICNmZmNlOWYiIHBvaW50cz0iNDUwLDcxOC42NjggNTgxLjI1Miw3NTkuMzM0IDQ1MCw4MDAgMzE4Ljc0OCw3NTkuMzM0ICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSI0NTAsNzE4LjY2OCA1ODEuMjUyLDc1OS4zMzQgNDUwLDgwMCAzMTguNzQ4LDc1OS4zMzQgIi8+CiAgICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMDAwMDAwO3RleHQtYW5jaG9yOm1pZGRsZTtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjQ1MCIgeT0iNzY0LjAwNiI+CiAgICAgIDx0c3BhbiB4PSI0NTAiIHk9Ijc2NC4wMDYiPklucHV0IGlzIHZhbGlkPzwvdHNwYW4+CiAgICA8L3RleHQ+CiAgPC9nPgogIDxnPgogICAgPGxpbmUgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgeDE9IjQ1MCIgeTE9IjMyMC44OTgiIHgyPSI0NTAiIHkyPSIzNDguMTAyIi8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSI0NDUsMzQ4LjEwMiA0NTAsMzU4LjEwMiA0NTUsMzQ4LjEwMiAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iNDQ1LDM0OC4xMDIgNDUwLDM1OC4xMDIgNDU1LDM0OC4xMDIgIi8+CiAgPC9nPgogIDxwb2x5bGluZSBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiBwb2ludHM9IjI4MCwyMDAgMjgwLDc1OS4zMzQgMzE4Ljc0OCw3NTkuMzM0ICIvPgogIDxnPgogICAgPGxpbmUgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgeDE9IjI4MCIgeTE9IjQwMCIgeDI9IjMyMy41NTgiIHkyPSI0MDAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiAjMDAwMDAwIiBwb2ludHM9IjMyMy41NTgsNDA1IDMzMy41NTgsNDAwIDMyMy41NTgsMzk1ICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSIzMjMuNTU4LDQwNSAzMzMuNTU4LDQwMCAzMjMuNTU4LDM5NSAiLz4KICA8L2c+CiAgPGc+CiAgICA8bGluZSBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4MT0iMjgwIiB5MT0iMjgwIiB4Mj0iMzA5IiB5Mj0iMjgwIi8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSIzMDksMjg1IDMxOSwyODAgMzA5LDI3NSAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iMzA5LDI4NSAzMTksMjgwIDMwOSwyNzUgIi8+CiAgPC9nPgogIDxnPgogICAgPHJlY3Qgc3R5bGU9ImZpbGw6ICNmZmU1OTkiIHg9IjMyMCIgeT0iNDgwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjgwIi8+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4PSIzMjAiIHk9IjQ4MCIgd2lkdGg9IjI2MCIgaGVpZ2h0PSI4MCIvPgogICAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogIzAwMDAwMDt0ZXh0LWFuY2hvcjptaWRkbGU7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsIiB4PSI0NTAiIHk9IjUxNC43OTQiPgogICAgICA8dHNwYW4geD0iNDUwIiB5PSI1MTQuNzk0Ij5QYXJzZSgpPC90c3Bhbj4KICAgICAgPHRzcGFuIHg9IjQ1MCIgeT0iNTM0LjU1Ij5oZXBhcnNlLmM8L3RzcGFuPgogICAgPC90ZXh0PgogIDwvZz4KICA8Zz4KICAgIDxsaW5lIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHgxPSI0NTAiIHkxPSI0NDAuOTc3IiB4Mj0iNDUwIiB5Mj0iNDY5Ii8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSI0NDUsNDY5IDQ1MCw0NzkgNDU1LDQ2OSAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iNDQ1LDQ2OSA0NTAsNDc5IDQ1NSw0NjkgIi8+CiAgPC9nPgogIDxnPgogICAgPGxpbmUgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgeDE9IjQ1MCIgeTE9IjU2MC44OTgiIHgyPSI0NTAiIHkyPSI1ODguMTAyIi8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSI0NDUsNTg4LjEwMiA0NTAsNTk4LjEwMiA0NTUsNTg4LjEwMiAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iNDQ1LDU4OC4xMDIgNDUwLDU5OC4xMDIgNDU1LDU4OC4xMDIgIi8+CiAgPC9nPgogIDxnPgogICAgPHJlY3Qgc3R5bGU9ImZpbGw6ICNmZmU1OTkiIHg9IjMyMCIgeT0iNjAwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjgwIi8+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4PSIzMjAiIHk9IjYwMCIgd2lkdGg9IjI2MCIgaGVpZ2h0PSI4MCIvPgogICAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogIzAwMDAwMDt0ZXh0LWFuY2hvcjptaWRkbGU7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsIiB4PSI0NTAiIHk9IjYzNC43OTQiPgogICAgICA8dHNwYW4geD0iNDUwIiB5PSI2MzQuNzk0Ij5NYXRjaENvbW1hbmQoKTwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSI0NTAiIHk9IjY1NC41NSI+aGVwYXJzZS5jPC90c3Bhbj4KICAgIDwvdGV4dD4KICA8L2c+CiAgPGc+CiAgICA8bGluZSBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4MT0iNDUwIiB5MT0iNjgwLjk5OSIgeDI9IjQ1MCIgeTI9IjcwNi42NjgiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiAjMDAwMDAwIiBwb2ludHM9IjQ0NSw3MDYuNjY4IDQ1MCw3MTYuNjY4IDQ1NSw3MDYuNjY4ICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSI0NDUsNzA2LjY2OCA0NTAsNzE2LjY2OCA0NTUsNzA2LjY2OCAiLz4KICA8L2c+CiAgPGc+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogI2ZmZTU5OSIgeD0iNjIwIiB5PSI2MDAiIHdpZHRoPSIyNDAiIGhlaWdodD0iODAiLz4KICAgIDxyZWN0IHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHg9IjYyMCIgeT0iNjAwIiB3aWR0aD0iMjQwIiBoZWlnaHQ9IjgwIi8+CiAgICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMDAwMDAwO3RleHQtYW5jaG9yOnN0YXJ0O2ZvbnQtZmFtaWx5OkNvbnNvbGFzO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbCIgeD0iNjI5IiB5PSI2MzQuNzk0Ij4KICAgICAgPHRzcGFuIHg9IjYyOSIgeT0iNjM0Ljc5NCI+TWF0Y2hXb3JkKCnigIfigIfigIctIGhlcGFyc2UuYzwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSI2MjkiIHk9IjY1NC41NSI+TWF0Y2hPYmplY3QoKeKAhy0gaGVwYXJzZS5jPC90c3Bhbj4KICAgIDwvdGV4dD4KICA8L2c+CiAgPGc+CiAgICA8bGluZSBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4MT0iNTgwIiB5MT0iNjIwIiB4Mj0iNjA5IiB5Mj0iNjIwIi8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSI2MDksNjI1IDYxOSw2MjAgNjA5LDYxNSAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iNjA5LDYyNSA2MTksNjIwIDYwOSw2MTUgIi8+CiAgPC9nPgogIDxnPgogICAgPGxpbmUgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgeDE9IjU4OS43MzYiIHkxPSI2NjAiIHgyPSI2MjAiIHkyPSI2NjAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiAjMDAwMDAwIiBwb2ludHM9IjU4Mi4yMzYsNjYwIDU5Mi4yMzYsNjU1IDU4OS43MzYsNjYwIDU5Mi4yMzYsNjY1ICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSI1ODIuMjM2LDY2MCA1OTIuMjM2LDY1NSA1ODkuNzM2LDY2MCA1OTIuMjM2LDY2NSAiLz4KICA8L2c+CiAgPGc+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogI2ZmZTU5OSIgeD0iMzIwIiB5PSI4NDAiIHdpZHRoPSIyNjAiIGhlaWdodD0iODAiLz4KICAgIDxyZWN0IHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHg9IjMyMCIgeT0iODQwIiB3aWR0aD0iMjYwIiBoZWlnaHQ9IjgwIi8+CiAgICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMDAwMDAwO3RleHQtYW5jaG9yOm1pZGRsZTtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjQ1MCIgeT0iODc0Ljc5NCI+CiAgICAgIDx0c3BhbiB4PSI0NTAiIHk9Ijg3NC43OTQiPlJ1blJvdXRpbmUocGVyZm9ybWFkZHIpPC90c3Bhbj4KICAgICAgPHRzcGFuIHg9IjQ1MCIgeT0iODk0LjU1Ij5oZXJ1bi5jPC90c3Bhbj4KICAgIDwvdGV4dD4KICA8L2c+CiAgPGc+CiAgICA8cG9seWxpbmUgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSIzMjAsODgwIDI0MCw4ODAgMjQwLDIxMS45OCAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiAjMDAwMDAwIiBwb2ludHM9IjI0NSwyMTEuOTggMjQwLDIwMS45OCAyMzUsMjExLjk4ICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSIyNDUsMjExLjk4IDI0MCwyMDEuOTggMjM1LDIxMS45OCAiLz4KICA8L2c+CiAgPGc+CiAgICA8bGluZSBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiB4MT0iNDUwIiB5MT0iODAwIiB4Mj0iNDUwIiB5Mj0iODI5Ii8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogIzAwMDAwMCIgcG9pbnRzPSI0NDUsODI5IDQ1MCw4MzkgNDU1LDgyOSAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2U6ICMwMDAwMDAiIHBvaW50cz0iNDQ1LDgyOSA0NTAsODM5IDQ1NSw4MjkgIi8+CiAgPC9nPgogIDx0ZXh0IGZvbnQtc2l6ZT0iMTUuODA0NCIgc3R5bGU9ImZpbGw6ICMwMDAwMDA7dGV4dC1hbmNob3I6c3RhcnQ7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsIiB4PSI0NjAiIHk9IjgyMCI+CiAgICA8dHNwYW4geD0iNDYwIiB5PSI4MjAiPlllczwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IGZvbnQtc2l6ZT0iMTUuODA0NCIgc3R5bGU9ImZpbGw6ICMwMDAwMDA7dGV4dC1hbmNob3I6c3RhcnQ7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsIiB4PSIzMDAiIHk9Ijc0MCI+CiAgICA8dHNwYW4geD0iMzAwIiB5PSI3NDAiPk5vPC90c3Bhbj4KICA8L3RleHQ+CiAgPGc+CiAgICA8cmVjdCBzdHlsZT0iZmlsbDogI2ZmZTU5OSIgeD0iNjIwIiB5PSI3NDAiIHdpZHRoPSIyNDAiIGhlaWdodD0iMTgwLjA0NCIvPgogICAgPHJlY3Qgc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgeD0iNjIwIiB5PSI3NDAiIHdpZHRoPSIyNDAiIGhlaWdodD0iMTgwLjA0NCIvPgogICAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogIzAwMDAwMDt0ZXh0LWFuY2hvcjpzdGFydDtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWwiIHg9IjYyOSIgeT0iNzY1LjU1Ij4KICAgICAgPHRzcGFuIHg9IjYyOSIgeT0iNzY1LjU1Ij5FeHByZXNzaW9uIGV2YWx1YXRvcjo8L3RzcGFuPgogICAgICA8dHNwYW4geD0iNjI5IiB5PSI3ODUuMzA2Ij5oZWV4cHIuYzwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSI2MjkiIHk9IjgwNS4wNjEiPjwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSI2MjkiIHk9IjgyNC44MTciPlNldHVwRXhwcigpICAgICAgICAgIDwvdHNwYW4+CiAgICAgIDx0c3BhbiB4PSI2MjkiIHk9Ijg0NC41NzIiPuKAh+KAh3wgICAgICAgICAgICA8L3RzcGFuPgogICAgICA8dHNwYW4geD0iNjI5IiB5PSI4NjQuMzI4Ij5HZXRWYWx1ZSgpIC0gR2V0VmFsKCk8L3RzcGFuPgogICAgICA8dHNwYW4geD0iNjI5IiB5PSI4ODQuMDgzIj7igIfigId8ICAgICAgICAgICA8L3RzcGFuPgogICAgICA8dHNwYW4geD0iNjI5IiB5PSI5MDMuODM5Ij5FdmFsRXhwcigpICAgICAgICAgICA8L3RzcGFuPgogICAgPC90ZXh0PgogIDwvZz4KICA8Zz4KICAgIDxsaW5lIHN0eWxlPSJmaWxsOiBub25lOyBmaWxsLW9wYWNpdHk6MDsgc3Ryb2tlLXdpZHRoOiAyOyBzdHJva2UtZGFzaGFycmF5OiA0OyBzdHJva2U6ICMwMDAwMDAiIHgxPSI1ODAiIHkxPSI4NjAiIHgyPSI2MDkiIHkyPSI4NjAiLz4KICAgIDxwb2x5Z29uIHN0eWxlPSJmaWxsOiAjMDAwMDAwIiBwb2ludHM9IjYwOSw4NjUgNjE5LDg2MCA2MDksODU1ICIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6IG5vbmU7IGZpbGwtb3BhY2l0eTowOyBzdHJva2Utd2lkdGg6IDI7IHN0cm9rZTogIzAwMDAwMCIgcG9pbnRzPSI2MDksODY1IDYxOSw4NjAgNjA5LDg1NSAiLz4KICA8L2c+CiAgPGc+CiAgICA8bGluZSBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlLWRhc2hhcnJheTogNDsgc3Ryb2tlOiAjMDAwMDAwIiB4MT0iNTg5LjczNiIgeTE9IjkwMCIgeDI9IjYyMCIgeTI9IjkwMCIvPgogICAgPHBvbHlnb24gc3R5bGU9ImZpbGw6ICMwMDAwMDAiIHBvaW50cz0iNTgyLjIzNiw5MDAgNTkyLjIzNiw4OTUgNTg5LjczNiw5MDAgNTkyLjIzNiw5MDUgIi8+CiAgICA8cG9seWdvbiBzdHlsZT0iZmlsbDogbm9uZTsgZmlsbC1vcGFjaXR5OjA7IHN0cm9rZS13aWR0aDogMjsgc3Ryb2tlOiAjMDAwMDAwIiBwb2ludHM9IjU4Mi4yMzYsOTAwIDU5Mi4yMzYsODk1IDU4OS43MzYsOTAwIDU5Mi4yMzYsOTA1ICIvPgogIDwvZz4KICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjMWU5MGZmO3RleHQtYW5jaG9yOnN0YXJ0O2ZvbnQtZmFtaWx5OkNvbnNvbGFzO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjcwMCIgeD0iMzIwIiB5PSIyMzQuNTUiPgogICAgPHRzcGFuIHg9IjMyMCIgeT0iMjM0LjU1Ij5NQUlOIEVYRUNVVElPTiBMT09QPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogI2ZmMDAwMDt0ZXh0LWFuY2hvcjplbmQ7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NzAwIiB4PSI1ODAiIHk9IjIzNC41NSI+CiAgICA8dHNwYW4geD0iNTgwIiB5PSIyMzQuNTUiPjEuMTwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IGZvbnQtc2l6ZT0iMTUuODA0NCIgc3R5bGU9ImZpbGw6ICNmZjAwMDA7dGV4dC1hbmNob3I6ZW5kO2ZvbnQtZmFtaWx5OkNvbnNvbGFzO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjcwMCIgeD0iNTgwIiB5PSIzNTQuNTUiPgogICAgPHRzcGFuIHg9IjU4MCIgeT0iMzU0LjU1Ij4xLjI8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjZmYwMDAwO3RleHQtYW5jaG9yOmVuZDtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDo3MDAiIHg9IjU4MCIgeT0iNDc0LjU1Ij4KICAgIDx0c3BhbiB4PSI1ODAiIHk9IjQ3NC41NSI+Mi4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogI2ZmMDAwMDt0ZXh0LWFuY2hvcjplbmQ7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NzAwIiB4PSI1ODAiIHk9IjU5NC41NSI+CiAgICA8dHNwYW4geD0iNTgwIiB5PSI1OTQuNTUiPjIuMjwvdHNwYW4+CiAgPC90ZXh0PgogIDx0ZXh0IGZvbnQtc2l6ZT0iMTUuODA0NCIgc3R5bGU9ImZpbGw6ICNmZjAwMDA7dGV4dC1hbmNob3I6ZW5kO2ZvbnQtZmFtaWx5OkNvbnNvbGFzO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjcwMCIgeD0iODYwIiB5PSI1OTQuNTUiPgogICAgPHRzcGFuIHg9Ijg2MCIgeT0iNTk0LjU1Ij4yLjM8L3RzcGFuPgogIDwvdGV4dD4KICA8dGV4dCBmb250LXNpemU9IjE1LjgwNDQiIHN0eWxlPSJmaWxsOiAjZmYwMDAwO3RleHQtYW5jaG9yOmVuZDtmb250LWZhbWlseTpDb25zb2xhcztmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDo3MDAiIHg9Ijg2MCIgeT0iNzM0LjU1Ij4KICAgIDx0c3BhbiB4PSI4NjAiIHk9IjczNC41NSI+NC4xPC90c3Bhbj4KICA8L3RleHQ+CiAgPHRleHQgZm9udC1zaXplPSIxNS44MDQ0IiBzdHlsZT0iZmlsbDogI2ZmMDAwMDt0ZXh0LWFuY2hvcjplbmQ7Zm9udC1mYW1pbHk6Q29uc29sYXM7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NzAwIiB4PSI1ODAiIHk9IjgzNC41NSI+CiAgICA8dHNwYW4geD0iNTgwIiB5PSI4MzQuNTUiPjMuMTwvdHNwYW4+CiAgPC90ZXh0Pgo8L3N2Zz4K" alt="hugo book2 14 flowchart engine" width="60%">
</div>
</div>
<div class="paragraph">
<p>The functions in <strong>herun.c</strong> comprise most of the core game loop and calling points. <code>RunGame()</code> manages the game loop itself [1.1], which can be thought of as being:</p>
</div>
<div class="paragraph text-center">
<p><strong>Main routine</strong> &#8594; <strong>Player input</strong> &#8594; <strong>Parsing</strong> &#8594; <strong>Action</strong> (if valid)</p>
</div>
<div class="paragraph">
<p><strong>Player input</strong> [1.2] is the point at which the engine requests a new input line (usually from the keyboard, but possibly from another source such as a file during command playback).</p>
</div>
<div class="paragraph">
<p>The <strong>Parsing</strong> section [2.1] refers to the in-engine breakdown and analysis of the input line.
The input line is matched against the grammar table in <code>MatchCommand()</code> [2.2]&#8201;&#8212;&#8201;using <code>MatchWord()</code> and <code>MatchObject()</code> [2.3] to identify either individual words as specified in the grammar, or groups of words that may represent an object name.</p>
</div>
<div class="paragraph">
<p>If a match is made, the appropriate globals (<code>object</code>, <code>xobject</code>, <code>verbroutine</code>) are set, and <code>Perform()</code> is called [3.1] (or, if <code>Perform()</code> has not been defined, the built-in substitute).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that if the command is directed to an object&#8201;&#8212;&#8201;i.e., another character&#8201;&#8212;&#8201;<code>SpeakTo()</code> is called instead of <code>Perform()</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>RunRoutine()</code> is the method by which any function calls are executed.
At any point in <code>RunRoutine()</code> (or in functions called by it), the value <code>mem[codeptr]</code> is the byte value (i.e., the token number) of the current instruction.
The value of <code>codeptr</code> advances as execution progresses.</p>
</div>
<div class="paragraph">
<p>Whenever it is necessary for the engine to evaluate an expression, the expression evaluator subsystem in <strong>heexpr.c</strong> is invoked [4.1].
Here, the <code>eval[]</code> array is initialized with the expression to be evaluated by calling <code>SetupExpr()</code> (which will in turn call <code>GetValue()</code> to sequentially retrieve the elements of the expression).
The expression currently in <code>eval[]</code> is solved by calling <code>EvalExpr()</code>.</p>
</div>
<div class="sect2">
<h3 id="_runtime_symbol_data"><a class="anchor" href="#_runtime_symbol_data"></a>26.1. Runtime Symbol Data</h3>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Code execution:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mem[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">loaded .HEX file image</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defseg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current memory segment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>codeseg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">code segment (i.e., 0)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>codeptr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current code position</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stack_depth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current calling depth</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Display:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pbuffer[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">print buffer for line-wrapping</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentpos</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current position (pixel or character)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentline</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current row (line)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>full</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">counter for <code>PromptMore()</code> page-ending</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fcolor<br>
  bgcolor<br>
  icolor<br>
  default_bgcolor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">colors for foreground, background, input, and default background</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>currentfont</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">current font bitmask</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>textto</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">if non-zero, text is printed to this array</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SCREENWIDTH<br>
  SCREENHEIGHT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">maximum possible screen dimensions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inwindow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true if in a window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>physical_windowwidth<br>
  physical_windowheight<br>
  physical_windowleft<br>
  physical_windowtop<br>
  physical_windowright<br>
  physical_windowbottom</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#8220;physical&#8221; window dimensions, in pixels or characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>charwidth<br>
  lineheight<br>
  FIXEDCHARWIDTH<br>
  FIXEDLINEHEIGHT<br>
  current_text_x<br>
  current_text_y</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for font output management</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Parsing:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>words</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of parsed words in input</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>word[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">breakdown of input into words</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wd[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">breakdown of input into dictionary entries</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Arguments and expressions:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>var[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">global and local variables</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>passlocal[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">locals passed to a routine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments_passed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of arguments passed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">return value (from a routine)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>incdec</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">amount a value is being incremented or decremented</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<caption class="title">Undo management:</caption>
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undostack[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">for saving undo information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undoptr</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of operations undoable</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undoturn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of operations for this turn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undoinvalid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">when undo is invalid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>undorecord</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true when recording undo info</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_non_portable_functionality"><a class="anchor" href="#_non_portable_functionality"></a>26.2. Non-Portable Functionality</h3>
<div class="paragraph">
<p>The Hugo Engine requires a number of non-portable functions which provide the interface layer between the engine and the operating system on which it is running.
These functions are:</p>
</div>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_blockalloc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large-block <code>malloc()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_blockfree</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large-block <code>free()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_splitpath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For splitting/combining filename/path</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_makepath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">elements as per OS naming conventions</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_getfilename</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Asks the user for a filename</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_overwrite</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verifies overwrite of a filename</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_closefiles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fcloseall()</code> or equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_getkey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getch()</code> or equivalent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_getline</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keyboard line input</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_waitforkey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cycles while waiting for a keypress</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_iskeywaiting</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reports if a keypress is waiting</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_timewait</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waits for 1/<em>n</em> seconds</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_init_screen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performs necessary display setup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_hasgraphics</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns graphics availability</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_setgametitle</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets title of window/screen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_cleanup_screen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performs necessary screen cleanup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_clearfullscreen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clears entire display area</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_clearwindow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clears currently defined window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_settextmode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performs necessary text setup</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_settextwindow</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines window in display area</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_settextpos</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets cursor/text-output position</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_scrollwindowup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scrolls currently defined window</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_font</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets font for text output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_settextcolor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets foreground color for text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_setbackcolor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets background color for text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_color</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a valid color reference</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_print</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Outputs formatted text</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_charwidth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns width of a given character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_textwidth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns width of a given string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_strlen</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strlen()</code> for embedded codes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_specialchar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Translation for special characters</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hugo_hasvideo</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns video availability<sup class="footnote">[<a id="_footnoteref_73" class="footnote" href="#_footnotedef_73" title="View footnote.">73</a>]</sup></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For elaboration of the intent and implementation of these functions, see <strong>heblank.c</strong> in the standard source distribution (<strong>hugov31_source.tar.gz</strong>), or one of the implementations such as <strong>hemsvc.c</strong> (in <strong>hugov31_win32_source.zip</strong>, the Windows source package), <strong>hegcc.c</strong> (in <strong>hugov31_unix_source.tar.gz</strong>, the gcc/Unix package), etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_savefile_format"><a class="anchor" href="#_savefile_format"></a>26.3. Savefile Format</h3>
<div class="paragraph">
<p>Hugo saves the game state by (among other things) saving the dynamic memory from start of the object table to the start of the text bank (i.e., including objects, properties, array data, and the dictionary).
It does this, however, in a format that only notes if the data has changed from its initial state.</p>
</div>
<div class="paragraph">
<p>The structure of a Hugo savefile looks like this:</p>
</div>
<table class="tableblock frame-all grid-none stripes-even fit-content">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0000&#8201;&#8212;&#8201;0001</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID (assigned by compiler at compile-time)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0002&#8201;&#8212;&#8201;0009</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serial number</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>000A&#8201;&#8212;&#8201;0209</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All variables (global and local, 256*2 bytes)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>020A&#8201;&#8212;&#8201;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object table to text bank (see below)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>n bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Undo data (where <em>n</em> = <code>MAXUNDO</code>*5*2 bytes)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2 bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undoptr</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2 bytes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undoturn</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1 byte</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undoinvalid</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1 byte</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">undorecord</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In saving from the object table up to the start of the text bank, the engine performs a comparison of the original gamefile against in-memory dynamic data (which may have changed).</p>
</div>
<div class="paragraph">
<p>If a given byte <em>n</em> in a savefile is non-zero, it represents that the next <em>n</em> sequential bytes are identical between the gamefile and the saved data.
If <em>n</em> is 0, the byte <em>n</em>+1 gives the value from the memory image. (Although it takes 2 bytes to represent a single changed byte, the position within both the gamefile and the memory image only increases by 1.)</p>
</div>
<div class="paragraph">
<p>The practical implementation of the Hugo savefile format is found in <code>RunSave()</code> and <code>RunRestore()</code> in <strong>herun.c</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dark_secrets_of_the_hugo_debugger"><a class="anchor" href="#_dark_secrets_of_the_hugo_debugger"></a>27. DARK SECRETS OF THE HUGO DEBUGGER</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Hugo Debugger is basically a modified build of the Hugo Engine; the two share the same core code for program execution, but the debugger wraps it in a calling framework that allows the user (or the debugger itself) to control&#8201;&#8212;&#8201;i.e., start, stop, or step through&#8201;&#8212;&#8201;execution.</p>
</div>
<div class="paragraph">
<p>The key difference with the debugger build of the engine is in <code>RunRoutine()</code>, which in the debugger looks more like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>      ...
       |
       |
+--------------+     +------------+
| RunRoutine() |----&gt;| Debugger() | (if debugger_interrupt is non-false)
|   herun.c    |     |   hd.c     |
+--------------+     +------------+
       |
       |
      ...</pre>
</div>
</div>
<div class="paragraph">
<p>The debugger build contains a global flag called <code>debugger_interrupt</code>; if this flag is non-false, <code>RunRoutine()</code> is interrupted before executing the next instruction.</p>
</div>
<div class="paragraph">
<p>The <code>Debugger()</code> function is responsible for switching to and updating the debugger display.
<code>Debugger()</code> is also the hub for any debugger functions initiated by the user, such as setting breakpoints, setting watch expressions, changing values, moving objects, etc.</p>
</div>
<div class="paragraph">
<p>The debugger controls program execution by returning from <code>Debugger()</code> to <code>RunRoutine()</code>.
If <code>debugger_interrupt</code> is true, only the current instruction will execute, then control will pass back to <code>Debugger()</code> (i.e., stepping).
In order to resume free execution, <code>Debugger()</code> returns with <code>debugger_interrupt</code> set to false.</p>
</div>
<div class="paragraph">
<p>A number of other variables in the debugger influence program execution in addition to <code>debugger_interrupt</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>debugger_run</code>        
</td>
<td class="hdlist2">
<p>true when engine is running freely</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>debugger_collapsing</code> 
</td>
<td class="hdlist2">
<p>true when collapsing the call</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>debugger_step_over</code>  
</td>
<td class="hdlist2">
<p>true if stepping over (i.e., same-level stepping)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>debugger_skip</code>       
</td>
<td class="hdlist2">
<p>true if skipping next instruction</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>debugger_finish</code>     
</td>
<td class="hdlist2">
<p>true if finishing current routine</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>debugger_step_back</code>  
</td>
<td class="hdlist2">
<p>true if stepping backward</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>step_nest</code>           
</td>
<td class="hdlist2">
<p>for stepping over nested calls (i.e., with <code>debugger_step_over</code>)</p>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_debugger_expression_evaluation"><a class="anchor" href="#_debugger_expression_evaluation"></a>27.1. Debugger Expression Evaluation</h3>
<div class="paragraph">
<p>The debugger must evaluate expressions in several contexts, including when solving watch expressions and when changing an existing value.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In-debugger expression management is contained primarily in <strong>hdval.c</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to do this, the debugger includes a minimal version of the compiler&#8217;s expression parser.
It parses a user-supplied expression in the function <code>ParseExpression()</code>.
What <code>ParseExpression()</code> does is to essentially compile that expression, storing the result in the debug workspace in the array table.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Remember that the address of the debug workspace&#8201;&#8212;&#8201;256 bytes after any user-defined array storage&#8201;&#8212;&#8201;is found in the header in <strong>.HDX</strong> files.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After writing the expression, the debugger can then set <code>codeptr</code> to the start of the debug workspace, then call the engine&#8217;s <code>SetupExpr()</code> and <code>EvalExpr()</code> functions as it would to evaluate any other expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_hdx_file_format"><a class="anchor" href="#_the_hdx_file_format"></a>27.2. The .HDX File Format</h3>
<div class="paragraph">
<p>The <strong>.HDX</strong> file format for Hugo debuggable executables, as well as having some additional information in the header (see <em>II.b The Header</em>) and a 256 byte workspace reserved at the end of the array table, appends symbolic debugging data as follows:</p>
</div>
<table class="tableblock frame-all grid-none stripes-even fit-content center">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Object names</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For each object: 1 byte giving the length, followed by the name as a string</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong># of properties</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property names</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For each property: 1 byte (length), then the name</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong># of attributes</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Attribute names</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For each attribute: 1 byte (length), then the name</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong># of aliases</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Alias names</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For each alias: 1 byte (length), then the name, then two bytes for the association</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong># of routines</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Routine names</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For each routine: 1 byte (length), then the name</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong># of events</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event data</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 bytes for each&#8201;&#8212;&#8201;2 bytes for the parent; 2 bytes for the address</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><div class="content"><div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong># of arrays</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Array data</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For each array: 1 byte for the name length, followed by the name, followed by 2 bytes for the address</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that it isn&#8217;t necessary to store the total number of objects, since that is already available at the start of the normal object table.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_patterns"><a class="anchor" href="#_code_patterns"></a>Appendix H: CODE PATTERNS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>What follows is a detailed breakdown of how the set of valid tokens in Hugo is encoded and read within compiled code.</p>
</div>
<div class="paragraph">
<p>Tokens simply marked <strong>TOKEN</strong> are coded just as the byte value of the token in question; no other formatting or necessary token/value is required to follow.
These are typically used for delimitation, signaling the end of a structure or structure component, etc.</p>
</div>
<div class="paragraph">
<p><strong>STATEMENTS</strong> are those tokens that are read by the engine as some sort of operation&#8201;&#8212;&#8201;typically, these are &#8220;start of line&#8221; tokens, with some exceptions.</p>
</div>
<div class="paragraph">
<p><strong>VALUES</strong> return an integer value to the engine within the context of an expression.
See <em>III.b Data Types</em>, which describes all the valid types of values.</p>
</div>
<div class="paragraph">
<p><strong>INTERNAL</strong> tokens never appear in source code.
These are added by the compiler for use by the engine.</p>
</div>
<div class="paragraph">
<p>A &#8220;code block&#8221; is any executable statement or statements followed by a terminating $0D (<code>}</code>).</p>
</div>
<div class="paragraph">
<p>Constructions may include <em>expressions</em> or <em>values</em>; the difference between the two is that values are expected to be discrete data types.
Note also that <code>GetVal()</code> in <strong>heexpr.c</strong> allows a solvable expression bracketed by $01 (<code>(</code>) and $02 (<code>)</code>) to be treated as a discrete value.</p>
</div>
<div class="paragraph">
<p>Source references point to places in the Hugo C source code that may help to clarify how a particular construction is coded/interpreted.
While not specifically mentioned, the compiling of many tokens is localized in <code>CodeLine()</code> in <strong>hccode.c</strong>, and the execution of many simple statements is localized in <code>RunRoutine()</code> in <strong>herun.c</strong>.
The reading of values from data types or expressions begins with <code>GetValue()</code> in <strong>heexpr.c</strong>, with the basic identification of values in <code>GetVal()</code>.</p>
</div>
<table class="tableblock frame-all grid-rows stripes-none fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>01</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>(</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>02</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>03</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>.</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>04</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>:</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em><strong>reserved</strong></em> (not coded)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>05</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>06</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>07</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>08</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>09</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>0A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>0B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>0C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>{</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>0D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>}</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div>
<div class="paragraph">
<p>(Signifies the end of a code block)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>0E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>[</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>0F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>]</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>10</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>11</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>~</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>12</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>13</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>&#8656;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>14</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>~=</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>15</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>16</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>17</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>18</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>18 &lt;skip distance&gt; &lt;expression&gt; 4C
    &lt;conditional block&gt;
&lt;next statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if &lt;expression&gt;
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the two bytes of <code>&lt;skip distance&gt;</code> are the absolute distance&#8201;&#8212;&#8201;in low-byte/high-byte order&#8201;&#8212;&#8201;from the first byte of the pair to the next line of code that will execute if <code>&lt;expression&gt;</code> evaluates to false, i.e., the distance to <code>&lt;next statement&gt;</code>.
If <code>&lt;expression&gt;</code> evaluates to a non-false value, <code>&lt;conditional block&gt;</code> is run.
Note that $4C indicates end-of-line.</p>
</div>
<div class="paragraph">
<p><code>&lt;expression&gt;</code> is simply a tokenized representation of the expression as it appears in the source line.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeIf()</code></p>
</li>
<li>
<p><strong>herun.c</strong> &#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>19</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>,</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>1A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>else</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>1A &lt;skip distance&gt;
    &lt;conditional block&gt;
&lt;next statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">else
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;conditional block&gt;</code> runs only if no immediately preceding <code>if</code> or <code>elseif</code> condition has been met.
If a previous condition has been met, control passes ahead to <code>&lt;next statment&gt;</code>, i.e., forward the number of bytes given by the two bytes of <code>&lt;skip distance&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeLine()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>1B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>elseif</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>1B &lt;skip distance&gt; &lt;expression&gt; 4C
    &lt;conditional block&gt;
&lt;next statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">elseif &lt;expression&gt;
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See if.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeIf()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>1C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>while</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>:&lt;starting point&gt;
1C &lt;skip distance&gt; &lt;expression&gt; 4C
    &lt;conditional block&gt;
25 &lt;starting point&gt;
&lt;next statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">while &lt;expression&gt;
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As long as <code>&lt;expression&gt;</code> evaluates to a non-false value, &lt;conditional block&gt; is run.
Note the implicit jump ($25) coded by the compiler to maintain the loop&#8201;&#8212;&#8201;<code>&lt;starting point&gt;</code> is only an address; only the two-byte address following $25 is written as a jump-back point.
See if.</p>
</div>
<div class="paragraph">
<p>Note that because the <code>&lt;starting point&gt;</code> is written as a two-byte indexed address, it must begin on an address boundary, padded with empty ($00) values, if necessary.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeWhile()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>1D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>do</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>1D &lt;skip distance&gt;
:&lt;starting point&gt;
    &lt;block&gt;
1C &lt;two bytes&gt; &lt;expression&gt; 4C
&lt;next statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">do
{...}
while &lt;expression&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If, after <code>&lt;block&gt;</code> executes, <code>&lt;expression&gt;</code> evaluates to a non-false value, the engine returns to <code>&lt;starting point&gt;</code> (which must begin on an address boundary).
The two bytes following while ($1C) match the syntax of the normal while loop, but are undefined for this usage.
Instead, the distance to the next statement is given after the do token ($1D) in the two bytes of <code>&lt;skip distance&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeDo()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunDo()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>1E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>select</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>1E</pre>
</div>
</div>
<div class="paragraph">
<p>When encountered by the engine, resets the conditional-statement evaluator, i.e., so that the next case conditional is treated as an <code>if</code> instead of an <code>elseif</code>.
Note that the variable that follows <code>select</code> in a line of source code is not coded here (but it is needed by the compiler to construct subsequent <code>case</code> statements).</p>
</div>
<div class="paragraph">
<p>See case.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeSelect()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>1F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>case</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="paragraph">
<p>Treated identically by the engine to <code>elseif</code> once a select <code>token</code> ($1E) has reset the conditional-statement evaluator to no previous matches.</p>
</div>
<div class="paragraph">
<p>In other words, what the compiler does is take:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>select &lt;expression&gt;
    case &lt;test1&gt;
        &lt;first conditional block&gt;
    case &lt;test2&gt;
        &lt;second conditional block&gt;
    ...
    case else
        &lt;default conditional block&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>and restructure it into:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>1F &lt;skip distance&gt; &lt;expression&gt; 05 &lt;test1&gt; 4C
    &lt;first conditional block&gt;
1F &lt;skip distance&gt; &lt;expression&gt; 05 &lt;test2&gt; 4C
    &lt;second conditional block&gt;
1A &lt;skip distance&gt;
    &lt;default conditional block&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Note that $1A is the <code>else</code> token, $05 is the <code>=</code> token, and that the two bytes of <code>&lt;skip distance&gt;</code> give the distance to the next <code>case</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeSelect()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>20</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>for</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;assignment&gt;
:&lt;starting point&gt;
20 &lt;skip distance&gt; &lt;expression&gt; 4C
    &lt;conditional block&gt;
    &lt;modifying expression&gt;
    25 &lt;starting point&gt;
&lt;next statement&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">for (&lt;assign&gt;; &lt;expr&gt;; &lt;modifying&gt;)
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;assignment&gt;</code>, if given in the source code, is coded as a regular executable assignment of some data type.
Again, nothing is explicitly coded at <code>&lt;starting point&gt;</code>&#8201;&#8212;&#8201;it is simply a reference point for the <code>jump</code> ($25) to return to.
The <code>for</code> ($20) line operates as a regular conditional test (see <code>if</code>).
The <code>&lt;modifying expression&gt;</code> is appended after the conditional block is coded.
This, like the <code>&lt;assignment&gt;</code> is simply a regular executable assignment.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hccode.c</strong>&#8201;&#8212;&#8201;<code>CodeFor()</code></p>
</li>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunIf()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>21</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>return</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>21 &lt;expression&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">return &lt;expression&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;expression&gt;</code> is optional, so that a standalone return order can be coded as:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>21 4C</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>22</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>break</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>22</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>23</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>and</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>24</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>or</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>25</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>jump</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>25 &lt;address&gt;</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">jump &lt;label&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;address&gt;</code> is two bytes giving the indexed address of the next statement to be executed.<br>
(The <code>&lt;label&gt;</code> is coded as <code>&lt;address&gt;</code>.)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>26</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>run</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>26 &lt;value&gt; 4C<sup class="footnote">[<a id="_footnoteref_74" class="footnote" href="#_footnotedef_74" title="View footnote.">74</a>]</sup></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> is simply read and forgotten, as in running an <code>object.property</code> property routine and throwing away the value.</p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_74">
<a href="#_footnoteref_74">74</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>27</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>is</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>&lt;object&gt; is &lt;attribute&gt;</code> (statement form)<br>
<code>&lt;object&gt; is &lt;attribute&gt;</code> (value form).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>28</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>not</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>29</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>29</pre>
</div>
</div>
<div class="paragraph">
<p>Hard-coded Boolean constant meaning 1.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>2A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>2A</pre>
</div>
</div>
<div class="paragraph">
<p>Hard-coded Boolean constant meaning 0.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>2B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>local</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em><strong>reserved</strong></em> (not coded)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>2C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>verb</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>2C &lt;n&gt; &lt;dict_1&gt; &lt;dict_2&gt;...&lt;dict_n&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Occurs in the grammar table and explicitly denotes the beginning of a new verb, where the single byte <code>&lt;n&gt;</code> gives the number of dictionary words coded immediately following representing synonyms for this verb.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>2D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>xverb</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>2D &lt;n&gt; &lt;dict_1&gt; &lt;dict_2&gt;...&lt;dict_n&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Coded and handled identically to <code>verb</code>, except that it is flagged differently so the engine knows it is a &#8220;non-action&#8221;.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>2E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>held</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>2F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>multi</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>30</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>multiheld</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>31</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>newline</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>PRINT TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Signals a <code>print</code> statement to issue a newline <em>only</em> if one is needed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>32</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>anything</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>33</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>print</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>33 &lt;print data&gt; 4C</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>33 &lt;print data&gt; 0B &lt;print data&gt; ... 4C</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;print data&gt;</code> is one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>stringdata#</code></p>
</li>
<li>
<p>any value, treated as a dictionary entry</p>
</li>
<li>
<p><code>parse$</code></p>
</li>
<li>
<p><code>serial$</code></p>
</li>
<li>
<p><code>newline</code></p>
</li>
<li>
<p><code>capital</code></p>
</li>
<li>
<p><code>number</code></p>
</li>
<li>
<p><code>hex</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Multiple <code>&lt;print data&gt;</code> sequences are separated by a semicolon (<code>;</code>) token ($0B).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunPrint()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>34</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>number</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong> or <strong>PRINT TOKEN</strong></p>
</div>
<div class="paragraph">
<p>In a <code>print</code> statement, signals that the following value should be printed as a number, not as the corresponding dictionary entry.</p>
</div>
<div class="paragraph">
<p>In a grammar line, represents any integer number.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>35</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>capital</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>PRINT TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Signals that the following dictionary entry should have its first letter capitalized.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>36</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>text</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>36 3B &lt;value&gt; 4C<sup class="footnote">[<a id="_footnoteref_75" class="footnote" href="#_footnotedef_75" title="View footnote.">75</a>]</sup></pre>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_75">
<a href="#_footnoteref_75">75</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">text to n</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> is either an address in the array table, or constant 0 (to restore text output to the standard display).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>37</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>graphics</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="paragraph">
<p>(Not implemented.)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>38</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>color</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>38 &lt;value&gt; 4C
38 &lt;value&gt; 19 &lt;value&gt; 4C
38 &lt;value&gt; 19 &lt;value&gt; 19 &lt;value&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">color foreground
color foreground, background
color foreground, background, inputcolor</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> is a Hugo color value from 0 to 17 giving the foreground text color.
If a second value is given, separated by a comma ($19), it represents the background color.
If a third value is given, separated by a comma ($19), it represents the input color.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>39</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>remove</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>39 &lt;value&gt; 4C<sup class="footnote">[<a id="_footnoteref_76" class="footnote" href="#_footnotedef_76" title="View footnote.">76</a>]</sup></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_76">
<a href="#_footnoteref_76">76</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">remove &lt;object&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunMove()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>3A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>move</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>3A &lt;value&gt; 3B &lt;value&gt; 4<sup class="footnote">[<a id="_footnoteref_77" class="footnote" href="#_footnotedef_77" title="View footnote.">77</a>]</sup></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_77">
<a href="#_footnoteref_77">77</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">move &lt;object1&gt; to &lt;object2&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunMove()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>3B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>to</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Followed by a value, as in:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>3B &lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Typically found in <code>print to n</code>, <code>text to n</code>, etc., in which case the line will finish with <code>eol#</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>...3B &lt;value&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>3C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>parent</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>3C 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">parent(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the parent object of the object resulting from <code>&lt;expression&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Alternate usage is as a grammar token, coded simply as $3C with no following parenthetical expression.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>3D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>sibling</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>3D 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">sibling(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the sibling of the object resulting from <code>&lt;expression&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>3E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>child</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>3E 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">child(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the child object of the object resulting from <code>&lt;expression&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>3F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>youngest</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>3F 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">youngest(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the youngest (most recently added) child object of the object resulting from <code>&lt;expression&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>40</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>eldest</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>40 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">eldest(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Interpreted identically to <code>child(&#8230;&#8203;)</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>41</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>younger</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>41 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">younger(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Interpreted identically to <code>sibling(&#8230;&#8203;)</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>42</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>elder</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>42 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">elder(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the object number of the object more recently added to the parent of the object resulting from <code>&lt;expression&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>43</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>prop#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>43 &lt;property&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;property&gt;</code> is a single byte giving the property number.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>44</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>attr#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>44 &lt;attribute&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;attribute&gt;</code> is a single byte giving the attribute number.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>45</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>var#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>45 &lt;variable&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;variable&gt;</code> is a single byte giving the variable number. 0-239 are global variables, and 240-255 are local to this routine/event/etc.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>46</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>dictentry#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>46 &lt;dictionary entry&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;dictionary entry&gt;</code> is two bytes (in low-byte/high-byte order) giving the address of the entry in the dictionary table.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>47</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>text#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>47 &lt;text address&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;text address&gt;</code> is three bytes (in lowest-to-highest byte order) giving the address of the entry in the text bank.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>48</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>routine#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL STATEMENT</strong> or <strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>48 &lt;routine address&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;routine address&gt;</code> is two bytes giving the indexed address of the specified routine.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>49</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>debugdata#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL DATA</strong></p>
</div>
<div class="paragraph">
<p>Is followed by data that is helpful to the engine at runtime&#8201;&#8212;&#8201;not visible in, for example, the debugger&#8217;s code window.</p>
</div>
<div class="paragraph">
<p>E.g., local variable name:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>49 45 &lt;byte&gt; &lt;data&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;byte&gt;</code> is a single byte giving the number of following <code>&lt;data&gt;</code> bytes, which give the name of the next local variable as an ASCII string.
Read by the debugger; ignored by the engine.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>4A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>object#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>4A &lt;object number&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;object number&gt;</code> is two bytes giving the number of the specified object.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>4B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>value#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>4B &lt;number&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;number&gt;</code> is two bytes giving the specified constant value.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>4C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>eol#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL TOKEN</strong></p>
</div>
<div class="paragraph">
<p>End-of-line marker.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>4D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>system</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL STATEMENT</strong> or <strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>4D 01 &lt;value&gt; 02 4C<sup class="footnote">[<a id="_footnoteref_78" class="footnote" href="#_footnotedef_78" title="View footnote.">78</a>]</sup></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_78">
<a href="#_footnoteref_78">78</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">system(&lt;value&gt;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the system-level function designated by <code>&lt;value&gt;</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <em>The Hugo Programming Manual</em> for further elaboration on the <code>system</code> statement.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Obsolete usage:<sup class="footnote">[<a id="_footnoteref_79" class="footnote" href="#_footnotedef_79" title="View footnote.">79</a>]</sup></p>
</div>
<div class="literalblock">
<div class="content">
<pre>4D &lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> is some Hugo data type giving the number of the system function to call.</p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_79">
<a href="#_footnoteref_79">79</a>. Not implemented post-v2.2.
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunSystem()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>4E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>notheld</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>4F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>multinotheld</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>50</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>window</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">window n</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>50 &lt;value&gt; 4C</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">window left, top, right, bottom</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>50 &lt;v1&gt; 19 &lt;v2&gt; 19 &lt;v3&gt; 19 &lt;v4&gt; 4C</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">window</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>50 4C</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">window 0</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>50 4B 00 00 4C</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> or <code>&lt;v<em>n</em>&gt;</code>, if present, gives a number of lines or screen coordinate.
All instances of the <code>window</code> statement are followed by a code block except for <code>window 0</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <em>The Hugo Programming Manual</em> for further elaboration on the <code>window</code> statement.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Prior to v2.4, the third syntax, i.e., <code>window</code> alone, complied as <code>50 4C</code> in v2.3 or simply <code>50</code> in early versions, followed by a code block, was the only usage.
The result was a window beginning at the top of the screen, reaching down to the current cursor row at the termination of the block, and protected then from scrolling of the bottom/main window.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunWindow()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>51</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>random</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>51 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">random(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns a random value between 1 and <code>&lt;expression&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>52</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>word</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>52 0E &lt;expression&gt; 0F</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>As in:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">word[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the dictionary address of <code>word[&lt;expression&gt;</code>].</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>53</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>locate</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>53 &lt;value&gt; 4C
53 &lt;value&gt; 19 &lt;value&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">locate x
locate x, y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> is the column position to reposition the cursor to within the currently defined window.
If a second value is given, it represents the new row position.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>54</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>parse$</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Read-only engine variable representing the engine parser&#8217;s internal <code>parse$</code> string.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunPrint()</code></p>
</li>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>Dict()</code>, <code>GetWord()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>55</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>children</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>55 01 &lt;expression&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">children(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Returns the number of children owned by the object resulting from <code>&lt;expression&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>56</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>in</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">for &lt;object&gt; in &lt;parent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">if &lt;object&gt; [not] in &lt;parent&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>57</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>pause</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>57</pre>
</div>
</div>
<div class="paragraph">
<p>Waits for a keypress.
Stores the resulting key value in <code>word[0]</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>58</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>runevents</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>58</pre>
</div>
</div>
<div class="paragraph">
<p>Runs all events in scope.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>59</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>arraydata#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>array[&lt;expression&gt;]</code>&#8201;&#8212;&#8201;element <code>&lt;expression&gt;</code> of array <code>&lt;array&gt;</code></p>
<div class="literalblock">
<div class="content">
<pre>59 &lt;array&gt; 0E &lt;value&gt; 0F</pre>
</div>
</div>
</li>
<li>
<p><code>array[]</code> -‚Äì length of array <code>&lt;array&gt;</code></p>
<div class="literalblock">
<div class="content">
<pre>59 &lt;array&gt; 0E 0F</pre>
</div>
</div>
</li>
<li>
<p><code>array</code> -‚Äì address of array <code>&lt;array&gt;</code></p>
<div class="literalblock">
<div class="content">
<pre>59 &lt;array&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;array&gt;</code> is two bytes giving the address of the array in the array table.</p>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>5A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>call</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>STATEMENT or VALUE</p>
</div>
<div class="literalblock">
<div class="content">
<pre>5A &lt;value&gt; 4C<sup class="footnote">[<a id="_footnoteref_80" class="footnote" href="#_footnotedef_80" title="View footnote.">80</a>]</sup></pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_80">
<a href="#_footnoteref_80">80</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C) when used as a statement.
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">call &lt;routine address&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;value&gt;</code> gives the indexed address of the routine to be called.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>5B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>stringdata#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>PRINT TOKEN</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>5B &lt;<em>n</em>&gt; &lt;char1&gt; &lt;char2&gt; &lt;char3&gt; ... &lt;char<em>n</em>&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Valid only in a <code>print</code> statement.
<code>&lt;<em>n</em>&gt;</code> gives the number of characters contained in the print string.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunPrint()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>5C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>save</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = save</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine&#8217;s save-game procedure (which includes filename input); returns a true value on success, or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunSave()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>5D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>restore</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = restore</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine&#8217;s restore-game procedure (which includes filename input); returns a true value on success, or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunRestore()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>5E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>quit</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>5E</pre>
</div>
</div>
<div class="paragraph">
<p>Terminates program execution and exits the engine.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>5F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>input</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>5F</pre>
</div>
</div>
<div class="paragraph">
<p>Prompts for user input, storing the resulting word(s) in the <code>word[]</code> array.
Unknown (i.e., non-dictionary) words become 0, or <code>""</code>; the last unknown word is stored in <code>parse$</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunInput()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>60</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>serial$</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>PRINT TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Read-only engine variable representing the compiler-determined serial number.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>GetWord()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>61</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>cls</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>61</pre>
</div>
</div>
<div class="paragraph">
<p>Clears the currently defined text window.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>62</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>scripton</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong>
<strong>As in:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = scripton</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine&#8217;s begin-scripting procedure (which includes filename input); returns a true value on success, or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunScript()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>63</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>scriptoff</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = scriptoff</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine&#8217;s end-scripting procedure; returns a true value on success, or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunScript()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>64</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>restart</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = restart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Attempts to reload the dynamic game data and restart the game loop; returns a true value on success or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>65</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>hex</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>PRINT TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Signals that the following value should be printed as a hexadecimal number, not as the corresponding dictionary entry.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>66</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>object</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Removed as a token after grammar table is compiled so that <code>object</code> can refer to the object global variable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>67</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>xobject</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>GRAMMAR TOKEN</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Removed as a token after grammar table is compiled so that <code>xobject</code> can refer to the xobject global variable.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>68</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>68 01 &lt;expr1&gt; 19 &lt;expr2&gt; 19 &lt;expr3&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = string(a, "apple", 8)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine string-writing function to write the dictionary entry <code>&lt;expr2&gt;</code> into the array table at the array address given by <code>&lt;expr1&gt;</code>, to a maximum of <code>&lt;expr3&gt;</code> characters.
<code>&lt;expr1&gt;</code> is any data type or expression; <code>&lt;expr2&gt;</code> is either a value or the <code>parse$</code> token ($54); <code>&lt;expr3&gt;</code> is optional, and if it is not given, the $02 token comes in place of the second $19.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>herun.c</strong>&#8201;&#8212;&#8201;<code>RunString()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>69</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>array</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>69 &lt;value&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Forces <code>&lt;value&gt;</code> to be used as an address in the array table, so that <code>array &lt;value&gt;</code> can be used as <code>arraydata#</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>heexpr.c</strong>&#8201;&#8212;&#8201;<code>GetVal()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>6A</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>printchar</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>6A &lt;value1&gt; 19 &lt;value2&gt; 19 ... 4C</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">printchar 'A', 'B',...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Outputs a single ASCII character value at the current screen position.
Multiple values are separated by $19; the sequence is terminated by $4C.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>6B</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>undo</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = undo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Attempts to restore all data changes made since the last typed input; returns a true value on success or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>SaveUndo()</code>, <code>Undo()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>6C</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>dict</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>6C 01 &lt;expr1&gt; 19 &lt;expr2&gt; 02</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = dict(&lt;array&gt;, &lt;len&gt;)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine dictionary-writing function to write the given string into the dictionary, to a maximum of <code>&lt;len&gt;</code> characters.
If <code>&lt;expr1&gt;</code> is <code>parse$</code> ($54), then the value of <code>parse$</code> is used; otherwise <code>&lt;expr1&gt;</code> is an array address in the array table.
If the string is already a dictionary entry, its location is returned.
Otherwise, it is appended to the end of the table, and the new location is returned.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>Dict()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>6D</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>recordon</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = recordon</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine&#8217;s begin-command-recording procedure (which includes filename input); returns a true value on success, or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>RecordCommands()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>6E</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>recordoff</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = recordoff</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engine&#8217;s end-command-recording procedure; returns a true value on success, or false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>RecordCommands()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="3"><p class="tableblock"><strong>6F</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>writefile</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>6F &lt;value&gt; 4C<sup class="footnote">[<a id="_footnoteref_81" class="footnote" href="#_footnotedef_81" title="View footnote.">81</a>]</sup>
    ...file i/o code block...</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_81">
<a href="#_footnoteref_81">81</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">writefile &lt;file&gt;
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Opens the file named by the dictionary entry <code>&lt;value&gt;</code>, erasing it if it previously exists, and runs the following code block.
Upon any error, jumps to the end of the file i/o code block and closes <code>&lt;file&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>Source:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><strong>hemisc.c</strong>&#8201;&#8212;&#8201;<code>FileIO()</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>70</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>readfile</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>70 &lt;value&gt; 4C<sup class="footnote">[<a id="_footnoteref_82" class="footnote" href="#_footnotedef_82" title="View footnote.">82</a>]</sup>
    ...file i/o code block...</pre>
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_82">
<a href="#_footnoteref_82">82</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">readfile &lt;file&gt;
{...}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Opens the file named by the dictionary entry <code>&lt;value&gt;</code> and runs the following code block.
Upon any error, jumps to the end of the file i/o code block and closes <code>&lt;file&gt;</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>71</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>writeval</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>71 &lt;value&gt; 19 &lt;value&gt; 19 ... 4C<sup class="footnote">[<a id="_footnoteref_83" class="footnote" href="#_footnotedef_83" title="View footnote.">83</a>]</sup></pre>
</div>
</div>
<div class="paragraph">
<p>Valid only in a <code>writefile</code> block.
Writes <code>&lt;value&gt;</code> as a 16-bit integer to the currently open file.
Multiple values are separated by $19.</p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_83">
<a href="#_footnoteref_83">83</a>. Pre-v2.3 omitted the <code>eol#</code> marker ($4C).
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>72</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>readval</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = readval</code></pre>
</div>
</div>
<div class="paragraph">
<p>Valid only in a <code>readfile</code> block.
Reads a 16-bit integer from the currently open file.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" rowspan="2"><p class="tableblock"><strong>73</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>playback</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>VALUE</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-right valign-top"><p class="tableblock"><strong>As in:</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-hugo" data-lang="hugo">x = playback</code></pre>
</div>
</div>
<div class="paragraph">
<p>Calls the engines command-playback procedure (including filename input) and attempts to begin command playback from the requested file.
If found, player input in <code>RunGame()</code> is overridden by commands in the file until end-of-file.
Returns true on success, false on failure.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>74</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>colour</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="paragraph">
<p>Treated identically to $38: <code>color</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>75</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>picture</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>75 &lt;value1&gt; 19 &lt;value2&gt; 4C
75 &lt;value1&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p>Attempts to load and display a JPEG-format picture either as resource <code>&lt;value2&gt;</code> in resourcefile <code>&lt;value1&gt;</code>, or, if <code>&lt;value2&gt;</code> is not given, simply as filename <code>&lt;value1&gt;</code>.
(All <code>&lt;values&gt;</code> are dictionary entries.)
If there is an error, the <code>system_status</code> global variable is set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>76</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>label#</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>INTERNAL DATA</strong></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>77</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>sound</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>77 [79] &lt;value1&gt; 19 &lt;value2&gt; [19 &lt;value3&gt;] 4C
77 &lt;value1&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p>Attempts to load and play a WAV-format sample as resource <code>&lt;value2&gt;</code> in resourcefile <code>&lt;value1&gt;</code>.
(<code>&lt;value1&gt;</code> and <code>&lt;value2&gt;</code> are dictionary entries.)
If <code>&lt;value3&gt;</code> is given, the sample output volume is set to <code>&lt;value3&gt;</code> (as a percentage of normal output).
If <code>&lt;value1&gt;</code> is 0, the current sound is stopped.
If there is an error, the <code>system_status</code> global variable is set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>78</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>music</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>STATEMENT</strong></p>
</div>
<div class="literalblock">
<div class="content">
<pre>78 [79] &lt;value1&gt; 19 &lt;value2&gt; [19 &lt;value3&gt;] 4C
78 &lt;value1&gt; 4C</pre>
</div>
</div>
<div class="paragraph">
<p>Attempts to load and play a music resource<sup class="footnote">[<a id="_footnoteref_84" class="footnote" href="#_footnotedef_84" title="View footnote.">84</a>]</sup> as resource <code>&lt;value2&gt;</code> in resourcefile <code>&lt;value1&gt;</code>.
(<code>&lt;value1&gt;</code> and <code>&lt;value2&gt;</code> are dictionary entries.)
If <code>&lt;value3&gt;</code> is given, the music output volume is set to <code>&lt;value3&gt;</code> (as a percentage of normal output).
If <code>&lt;value1&gt;</code> is 0, the current music is stopped.
If there is an error, the <code>system_status</code> global variable is set.</p>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_84">
<a href="#_footnoteref_84">84</a>. Version 2.5 supports MOD, S3M, and XM-format music modules. Version 3.0 and later additionally support MIDI and MP3 files.
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>79</strong></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>repeat</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>TOKEN</strong></p>
</div>
<div class="paragraph">
<p>Used by <code>sound</code> and <code>music</code> statements.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. If not, or if you&#8217;d like some additional interesting reading, there are a number of excellent resources to investigate further, some of which are listed in <em>APPENDIX G:</em> <em>ADDITIONAL RESOURCES</em>.
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. The best and most popular of these earlier systems are TADS (Mike Roberts, 1987) and Inform (Graham Nelson, 1993).
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. Other ports done by the author are for Windows, Linux, Macintosh, DOS, BeOS, Pocket PC, and PalmOS.
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. Normally, unless the Main routine explicitly returns&#8212;&#8203;as opposed to just running through to the closing brace&#8212;&#8203;the Hugo Engine continues running. Those familiar with the C programming language may notice the slight difference here: whereas in C the main() function is the entry point for a C program, in Hugo Init is the entry point, and Main can be thought of as the &#8220;each-turn routine&#8221;. For more elaboration on the execution pattern of a Hugo program, see <em>IX.</em> <em>THE GAME LOOP</em>.
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. While it&#8217;s a little beyond the scope of this manual to talk about what exactly a 16-bit integer is (partly because you don&#8217;t need to worry about it, other than to know they involve a range of 65536, either 0 to 65535 or -32768 to 32767). Essentially, &#8220;bits&#8221; refer to 1s or 0s in a base 2 number system (so that the right-most bit is the 1s, the next-to-right-most is the 2s, the next the 4s, the next the 8s, etc.) For example, the 4-bit number 1100 is equal to decimal 12, since 8+4=12. (If you&#8217;re familiar with bitwise notation, you already knew that. If you&#8217;re not, it probably didn&#8217;t particularly clear anything up, but as always, not to worry.)
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. Built-in functions are just like other Hugo functions except that they&#8217;re never defined anywhere in source code or any library file: the compiler and engine always know about them. To distinguish them, they&#8217;re generally printed in lowercase, whereas program-defined routines (including library routines) are almost always capitalized.
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. Routine addresses are also stored as 16-bit integers. However, those versed at all in such calculations will notice that if such a value was treated as an absolute address, then any addressable executable code would be limited to 64K in size (65536 bytes, the maximum size of an unsigned 16-bit integer). Such is not the case, since the routine address is actually an indexed representation of the absolute address, allowing Hugo games to far exceed any such limit in their size of executable code.
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. The section <em>IV.e.</em> <em>Operators and Assignments</em> goes into greater detail on assigning values to variables.
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. But keep an eye out for issues of comment maintenance. Again, a good comment should add clarity to a section of code, but it (usually) shouldn&#8217;t restate exactly what the code is doing. Doing that just means that when you change the code, you have to change the comment to keep it accurate, too, which if you&#8217;ve overcommented means doing the same thing twice, and increasing the chances of getting out of sync so that the comment doesn&#8217;t perfectly reflect the code it&#8217;s supposed to be commenting.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. Which is why, in certain cases, the -a switch can be helpful.
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. It&#8217;s also no coincidence that the <code>nothing</code> object is equal in its value to 0, which also represents the empty string <code>""</code> (see <em>II.c Data Types</em>). The fact that these three are (value-wise, at least) identical will come in handy, as what it means in practice is that 0/null/empty/nothing/etc. is the same in every context.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. See <em>APPENDIX D:</em> <em>HUGOFIX AND THE HUGO DEBUGGER</em>.
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. For this reason, attributes are sometimes thought of as being &#8220;lightweight classes&#8221; in that, as can be seen in the list of attributes, they generally categorize an object as a certain &#8220;kind&#8221; of object&#8212;&#8203;although other than flagging the object with that particular quality they have no other direct effect.
</div>
<div class="footnote" id="_footnotedef_14">
<a href="#_footnoteref_14">14</a>. The container and platform attributes are mutually exclusive. An object cannot have both attributes, since in the library the idea of containment is one of an object being either &#8220;in&#8221; <em>or</em> &#8220;on&#8221; another object. There are available classes that aren&#8217;t part of the standard library distribution that allow an object to function as both.
</div>
<div class="footnote" id="_footnotedef_15">
<a href="#_footnoteref_15">15</a>. WhatsIn is a library function used to list in formatted fashion all the objects present in a location: see <em>APPENDIX B:</em> <em>THE HUGO LIBRARY.</em>
</div>
<div class="footnote" id="_footnotedef_16">
<a href="#_footnoteref_16">16</a>. Don&#8217;t worry too much about the specifics about what this code is supposed to be doing, or about the details of the language syntax. We&#8217;ll cover all of that in due course.
</div>
<div class="footnote" id="_footnotedef_17">
<a href="#_footnoteref_17">17</a>. Just for clarity: the Art routine from <strong>hugolib.h</strong> prints the appropriate article, if any, followed by the name of the object, such as &#8220;an apple&#8221; or &#8220;a suitcase&#8221;. The Acquire routine returns true only if the first object&#8217;s holding property plus the size property of the second object does not exceed the capacity property of the first object (i.e., if there&#8217;s room in the first object to move the second object into it).
</div>
<div class="footnote" id="_footnotedef_18">
<a href="#_footnoteref_18">18</a>. In this usage, a &#8220;physical&#8221; parent is one in the object tree. The found_in property allows you have an object considered in a location (i.e., a room object) without it being &#8220;physically&#8221; in that room object.
</div>
<div class="footnote" id="_footnotedef_19">
<a href="#_footnoteref_19">19</a>. Editing the library files is generally not recommended, and not only because you&#8217;ll have to re-apply your changes if you update to a newer release of the library. If you absolutely must change one of the library files, make a copy first.
</div>
<div class="footnote" id="_footnotedef_20">
<a href="#_footnoteref_20">20</a>. In terms of order-of-inclusion.
</div>
<div class="footnote" id="_footnotedef_21">
<a href="#_footnoteref_21">21</a>. Those readers who weren&#8217;t already aware of variables and their usage may at this point be starting to have high-school algebra flashbacks. That&#8217;s because we&#8217;re talking about the same concept&#8212;&#8203;but, promise, no one is going to be asked to solve any quadratic equations.
</div>
<div class="footnote" id="_footnotedef_22">
<a href="#_footnoteref_22">22</a>. These formatting combinations are valid for printing only; they are not treated as literal characters, as in, for example, expressions involving dictionary entries. Note also that (unlike in languages such as C) formatting sequences such as <code>\n</code> are treated as two characters in a string.
</div>
<div class="footnote" id="_footnotedef_23">
<a href="#_footnoteref_23">23</a>. Hugo follows standard order of operations for operator precedence.
</div>
<div class="footnote" id="_footnotedef_24">
<a href="#_footnoteref_24">24</a>. Measured in 16-bit words, or 2 bytes per element.
</div>
<div class="footnote" id="_footnotedef_25">
<a href="#_footnoteref_25">25</a>. &#8220;Arguments&#8221; are simply parameters passed to a routine at calling time. See <em>V.a</em> <em>Routines</em>.
</div>
<div class="footnote" id="_footnotedef_26">
<a href="#_footnoteref_26">26</a>. (The built-in engine variables <code>parse$</code> and <code>serial$</code> may be used in place of the dictionary entry address; see <em>VII.b</em> <em>The Parser</em> for a description.)
</div>
<div class="footnote" id="_footnotedef_27">
<a href="#_footnoteref_27">27</a>. C programmers are used to cases that &#8220;fall through&#8221; to the next <code>case</code> unless explicitly told not to do so; such is not the case with Hugo.
</div>
<div class="footnote" id="_footnotedef_28">
<a href="#_footnoteref_28">28</a>. Okay, this isn&#8217;t quite true. While there isn&#8217;t an <em>explicit</em> limit, if you create a single <code>case</code> line that runs on forever and ever, eventually you&#8217;ll reach the point where, for buffer reasons, the compiler isn&#8217;t able to compile it, and it will complain with an appropriate error.
</div>
<div class="footnote" id="_footnotedef_29">
<a href="#_footnoteref_29">29</a>. The jump keyword is more or less equivalent to goto in other languages. The reason it&#8217;s different in Hugo is mainly to encourage the use of the proper alternatives (i.e., for and while or do-while loops) in keeping with proper programming practices. And, in the end, less jumps and labels make for far more readable code.
</div>
<div class="footnote" id="_footnotedef_30">
<a href="#_footnoteref_30">30</a>. Routines return 0 by default, with the exception of <em>property routines</em>, which we&#8217;ll discuss shortly and which return true (or 1) by default.
</div>
<div class="footnote" id="_footnotedef_31">
<a href="#_footnoteref_31">31</a>. Remember here that both zero (0) and the empty string <code>""</code> are equal in value.
</div>
<div class="footnote" id="_footnotedef_32">
<a href="#_footnoteref_32">32</a>. The actual mechanics are described in <em>VIII.g</em> <em>Perform</em>.
</div>
<div class="footnote" id="_footnotedef_33">
<a href="#_footnoteref_33">33</a>. In the imperative sentence &#8220;Put the book on the shelf&#8221;, the book is the direct object, and the shelf is the indirect object.
</div>
<div class="footnote" id="_footnotedef_34">
<a href="#_footnoteref_34">34</a>. See <em>IX</em> <em>THE GAME LOOP</em>.
</div>
<div class="footnote" id="_footnotedef_35">
<a href="#_footnoteref_35">35</a>. <em>Verbs</em> are actions that the player uses to interact with the physical world of the game. <em>Xverbs</em> are &#8220;non-action&#8221; verbs that generally deal with system functions, such as getting help, saving a game, etc. but don&#8217;t otherwise affect the state of the game world See <em>VII.a</em> <em>Grammar Definition</em>.
</div>
<div class="footnote" id="_footnotedef_36">
<a href="#_footnoteref_36">36</a>. All of the capitalized CONSTANTS used here are defined in <strong>hugolib.h</strong>.
</div>
<div class="footnote" id="_footnotedef_37">
<a href="#_footnoteref_37">37</a>. A constant that tells <strong>objlib.h</strong> that we&#8217;re implementing a special class of plural/identical objects for use in the game.
</div>
<div class="footnote" id="_footnotedef_38">
<a href="#_footnoteref_38">38</a>. Events and scripts are discussed next.
</div>
<div class="footnote" id="_footnotedef_39">
<a href="#_footnoteref_39">39</a>. That is, by the FindObject routine in <strong>hugolib.h</strong>, as called by the engine.
</div>
<div class="footnote" id="_footnotedef_40">
<a href="#_footnoteref_40">40</a>. You can actually use the NumberWord routine from <strong>hugolib.h</strong> to do this a lot more efficiently.
</div>
<div class="footnote" id="_footnotedef_41">
<a href="#_footnoteref_41">41</a>. This is a library-set limit.
</div>
<div class="footnote" id="_footnotedef_42">
<a href="#_footnoteref_42">42</a>. In other words, it is the library that defines all the rules and useful-sounding names for properties, routines, and the like; the engine doesn&#8217;t really have any idea about the higher-level work being done by the library.
</div>
<div class="footnote" id="_footnotedef_43">
<a href="#_footnoteref_43">43</a>. For more information on debugging using HugoFix, see <em>APPENDIX D:</em> <em>HUGOFIX AND THE HUGO DEBUGGER</em>.
</div>
<div class="footnote" id="_footnotedef_44">
<a href="#_footnoteref_44">44</a>. For more information on debugging using HugoFix, see <em>APPENDIX D:</em> <em>HUGOFIX AND THE HUGO DEBUGGER</em>.
</div>
<div class="footnote" id="_footnotedef_45">
<a href="#_footnoteref_45">45</a>. For more information on debugging using HugoFix, see <em>APPENDIX D:</em> <em>HUGOFIX AND THE HUGO DEBUGGER</em>.
</div>
<div class="footnote" id="_footnotedef_46">
<a href="#_footnoteref_46">46</a>. The &lt;isxverb&gt; argument is new in v3.1.
</div>
<div class="footnote" id="_footnotedef_47">
<a href="#_footnoteref_47">47</a>. For more information on debugging using HugoFix, see <em>APPENDIX D:</em> <em>HUGOFIX AND THE HUGO DEBUGGER</em>.
</div>
<div class="footnote" id="_footnotedef_48">
<a href="#_footnoteref_48">48</a>. This also means that in order to create a dark location&#8212;&#8203;i.e., one that has no intrinsic lighting&#8212;&#8203;it is necessary to put an explicit <code>not light</code> in the object&#8217;s definition. In that case, in order for the player to see anything in the location, light will have to be provided either by an object in the location (such as a lamp) or by something portable that can be brought into the location (like a flashlight).
</div>
<div class="footnote" id="_footnotedef_49">
<a href="#_footnoteref_49">49</a>. The library uses the player_person global to properly format messages to the player.
</div>
<div class="footnote" id="_footnotedef_50">
<a href="#_footnoteref_50">50</a>. The scenery class has the static attribute, which makes scenery objects untakeable. This is largely the point of scenery objects.
</div>
<div class="footnote" id="_footnotedef_51">
<a href="#_footnoteref_51">51</a>. One could prevent duplication of properties and other parts of the object definitions by creating a common sundae class and deriving both fudge_sundae and butterscotch_sundae from it, changing only the adjective property.
</div>
<div class="footnote" id="_footnotedef_52">
<a href="#_footnoteref_52">52</a>. Using banana1 as a class to build subsequent banana objects from is a simple way of copying objects (and saves typing and/or copying-and-pasting).
</div>
<div class="footnote" id="_footnotedef_53">
<a href="#_footnoteref_53">53</a>. The author encourages the implementation of bananas in any game. More bananas mean more monkeys, and monkeys are always fun.
</div>
<div class="footnote" id="_footnotedef_54">
<a href="#_footnoteref_54">54</a>. See <strong>sample.hug</strong> for examples of the last two.
</div>
<div class="footnote" id="_footnotedef_55">
<a href="#_footnoteref_55">55</a>. Versions of Hugo prior to v3.0 may not support all resource types. See <em>APPENDIX F:</em> <em>HUGO VERSIONS</em> for more information.
</div>
<div class="footnote" id="_footnotedef_56">
<a href="#_footnoteref_56">56</a>. The result codes are defined in <strong>resource.h</strong>.
</div>
<div class="footnote" id="_footnotedef_57">
<a href="#_footnoteref_57">57</a>. Used generally for room objects in order to give a grammatically correct description if necessary; also for containers and platforms.
</div>
<div class="footnote" id="_footnotedef_58">
<a href="#_footnoteref_58">58</a>. A &#8220;grandchild&#8221; of an object is a child of a child of a given parent object, or a child object thereof, recursively searched.
</div>
<div class="footnote" id="_footnotedef_59">
<a href="#_footnoteref_59">59</a>. The HugoFix library should only be included during development. As always, when compiling a version for public release, the DEBUG flag should be omitted both to keep the filesize of the final Hugo executable down as well as to ensure that debugging functionality is not included in release builds.
</div>
<div class="footnote" id="_footnotedef_60">
<a href="#_footnoteref_60">60</a>. The Hugo Debugger is not technically a source-level debugger, however. During its development, its author has referred to it as a source(ish) level debugger&#8212;&#8203;what the debugger does, in effect, is to &#8220;decompile&#8221; compiled code into the tokens and symbols that comprise each line of code. The result is a very close approximation of the original source code.
</div>
<div class="footnote" id="_footnotedef_61">
<a href="#_footnoteref_61">61</a>. Previously to version 3.1, the size of the grammar and executable code segment was limited to 256K, and the maximum size was 17024K.
</div>
<div class="footnote" id="_footnotedef_62">
<a href="#_footnoteref_62">62</a>. The version format was changed between v2.0 and v2.1. Version 2.0 programs contained the value 2; version 2.1 programs contain the value 21, version 2.2 programs contain 22, etc.
</div>
<div class="footnote" id="_footnotedef_63">
<a href="#_footnoteref_63">63</a>. Pre-v2.3 allowed the programmer to specify an ID string, an unnecessary convention now&#8201;&#8212;&#8201;the ID string used to be used to create the default savefile name. The ID string is now auto-generated by the compiler and is compared by the engine to the ID of a saved game to see if they match. Precompiled headers have the ID string <code>$$</code>.
</div>
<div class="footnote" id="_footnotedef_64">
<a href="#_footnoteref_64">64</a>. Table offsets are equal to the offset of the beginning of the table from the start of data, divided by 16.
</div>
<div class="footnote" id="_footnotedef_65">
<a href="#_footnoteref_65">65</a>. Pre-v2.5 had no Perform junction routine; verb routines were called directly by the engine.
</div>
<div class="footnote" id="_footnotedef_66">
<a href="#_footnoteref_66">66</a>. For another example, see <em>APPENDIX A:</em> <em>CODE PATTERNS</em>. Several of the conditional statements&#8201;&#8212;&#8201;if, elseif, etc.&#8201;&#8212;&#8201;use two bytes to give the absolute skip distance to the next statement if the conditional test fails. The pair is coded in low-byte/high-byte order.
</div>
<div class="footnote" id="_footnotedef_67">
<a href="#_footnoteref_67">67</a>. v3.0 and later
</div>
<div class="footnote" id="_footnotedef_68">
<a href="#_footnoteref_68">68</a>. v3.0 and later
</div>
<div class="footnote" id="_footnotedef_69">
<a href="#_footnoteref_69">69</a>. Prior to version 3.1, this scaling factor was 4.
</div>
<div class="footnote" id="_footnotedef_70">
<a href="#_footnoteref_70">70</a>. See <em>XI.b</em> <em>Special Words</em>
</div>
<div class="footnote" id="_footnotedef_71">
<a href="#_footnoteref_71">71</a>. Pre-v2.1 objects had only 32 possible attributes, and the object size was only 12 bytes, with only 4 bytes given to the attribute array.
</div>
<div class="footnote" id="_footnotedef_72">
<a href="#_footnoteref_72">72</a>. In v2.1 and later; there were only 32 attributes in earlier versions
</div>
<div class="footnote" id="_footnotedef_73">
<a href="#_footnoteref_73">73</a>. v3.0 and later
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1<br>
</div>
</div>
</body>
</html>